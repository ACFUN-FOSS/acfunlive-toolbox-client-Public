{"version":3,"sources":["webpack://acfunlive-toolbox/./src/electron_browser/util_component/frames/zoomFrame.vue","webpack://acfunlive-toolbox/./src/electron_browser/util_component/frames/zoomFrame.vue?da38","webpack://acfunlive-toolbox/./src/electron_browser/util_component/frames/zoomFrame.vue?fe1c","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/index.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/style/index.vue","webpack://acfunlive-toolbox/./src/electron_browser/util_function/exportTo.ts","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/style/qa.ts","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/style/index.vue?c0b7","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/style/index.vue?07a3","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/index.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/common.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/common.vue?0de8","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/common.vue?88c9","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/filter.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/filter.vue?f940","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/filter.vue?7eeb","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/settingBlocks/index.ts","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/index.vue?dcde","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/config/index.vue?6d88","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/index.vue?4ad3","webpack://acfunlive-toolbox/./src/electron_browser/views/danmakuSetting/index.vue?8310","webpack://acfunlive-toolbox/./node_modules/file-saver/dist/FileSaver.min.js","webpack://acfunlive-toolbox/./node_modules/lodash/random.js"],"names":["class","style","styles","dynamic","defineComponent","name","props","allowZoom","default","zoomMax","parentResizeListener","childResizeListener","parentWidth","parentHeight","childWidth","childHeight","child","this","$el","firstChild","parent","getActualWidth","ResizeObserver","observe","computed","xZoom","yZoom","zoom","Math","max","transform","methods","getBoundingClientRect","width","height","offsetWidth","offsetHeight","render","activeTo","label","components","align","brightness","span","trigger","hint","hin","index","key","q","a","flex","title","loadCommand","type","dropdown","command","size","currentWidget","disabled","enable","styleType","typeOptions","value","saveCommand","min","step","zoomPreview","allow-zoom","currentStyle","currentWidgets","length","setting","config-mode","danmaku","max-height","widgets","widget","id","addWidget","widgetOptions","avaliable","includes","list","selected","action","widgetSelected","styleDialog","generateList","labelEn","form-footer","schema","styleForm","options","styleOption","styleOptionValue","getStyle","placeholder","toJSON","data","Blob","JSON","stringify","zoomFrame","baseList","danmakuRow","VueForm","icon","selectWidget","moveWidget","removeWidget","Boolean","watch","n","o","deep","error","loadFromStore","danmakuProfile","settingOfType","message","duration","loadFromFile","async","res","Object","assign","parse","reset","replace","fetch","then","json","saveToFile","removeStyleForm","$store","commit","state","web","toolBox","sameWidgetNum","filter","i","limit","offset","styleValue","currentIndex","indexOf","splice","generateMenu","output","option","styleOfType","push","children","map","e","pop","newStyle","keys","forEach","configMode","danmakuList","mockData","settings","settingTarget","settingBlocks","item","save","saveSync","maxNum","required","$emit","open","clubOnly","clubLevel","blackList","keyword","types","multiple","combineGift","combineLike","combineEnter","common","flow","mockTimer","markRaw","commonSettings","changeDialog","getProfile","polling","clearTimeout","hasMedal","clubName","resetFilter","filterUpdate","tempRank","$nextTick","setTimeout","giftList","likeList","newMock","mock","filtered","target","settingType","first","second","b","autoBom","console","warn","test","c","d","XMLHttpRequest","responseType","onload","g","response","onerror","send","status","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","URL","webkitURL","j","createElement","download","rel","href","origin","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","readAsDataURL","l","m","module","exports","baseRandom","isIterateeCall","toFinite","freeParseFloat","parseFloat","nativeMin","nativeRandom","random","lower","upper","floating","undefined","temp","rand"],"mappings":"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","file":"js/391.3be9f398.js","sourcesContent":["<template>\r\n\t<div class=\"zoomFrame\" :style=\"styles\">\r\n\t\t<div class=\"zoomContent\" :style=\"dynamic\">\r\n\t\t\t<slot></slot>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"frame\",\r\n\tprops: {\r\n\t\tallowZoom: {\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tzoomMax: {\r\n\t\t\tdefault: 1000\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\tdefault: {}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst parentResizeListener: any = null;\r\n\t\tconst childResizeListener: any = null;\r\n\t\treturn {\r\n\t\t\tparentResizeListener,\r\n\t\t\tchildResizeListener,\r\n\t\t\tparentWidth: 100,\r\n\t\t\tparentHeight: 100,\r\n\t\t\tchildWidth: 100,\r\n\t\t\tchildHeight: 100\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tconst child = this.$el.firstChild;\r\n\t\tconst parent = this.$el;\r\n\t\tthis.getActualWidth(parent, child);\r\n\t\t// @ts-ignore\r\n\t\tthis.childResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(child);\r\n\t\t// @ts-ignore\r\n\t\tthis.parentResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(parent);\r\n\t},\r\n\tcomputed: {\r\n\t\tdynamic(): any {\r\n\t\t\tif (this.allowZoom) {\r\n\t\t\t\tconst xZoom = this.childWidth / this.parentWidth;\r\n\t\t\t\tconst yZoom = this.childHeight / this.parentHeight;\r\n\t\t\t\tlet zoom = 0.9 / Math.max(xZoom, yZoom);\r\n\t\t\t\t// console.log(zoom)\r\n\t\t\t\tif (zoom > this.zoomMax) {\r\n\t\t\t\t\tzoom = this.zoomMax;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translateX(-50%) translateY(-50%) scaleX(${zoom}) scaleY(${zoom})`\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform:\r\n\t\t\t\t\t\t\"translateX(-50%) translateY(-50%) scaleX(1) scaleY(1)\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetActualWidth(parent: any, child: any) {\r\n\t\t\tthis.parentWidth = parent.getBoundingClientRect().width;\r\n\t\t\tthis.parentHeight = parent.getBoundingClientRect().height;\r\n\t\t\tthis.childWidth = child.offsetWidth;\r\n\t\t\tthis.childHeight = child.offsetHeight;\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.zoomFrame {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\toverflow: hidden;\r\n\t.zoomContent {\r\n\t\tposition: absolute;\r\n\t\ttransition: all 0.15s;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateX(-50%) translateY(-50%);\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"frame\",\r\n\tprops: {\r\n\t\tallowZoom: {\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tzoomMax: {\r\n\t\t\tdefault: 1000\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\tdefault: {}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst parentResizeListener: any = null;\r\n\t\tconst childResizeListener: any = null;\r\n\t\treturn {\r\n\t\t\tparentResizeListener,\r\n\t\t\tchildResizeListener,\r\n\t\t\tparentWidth: 100,\r\n\t\t\tparentHeight: 100,\r\n\t\t\tchildWidth: 100,\r\n\t\t\tchildHeight: 100\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tconst child = this.$el.firstChild;\r\n\t\tconst parent = this.$el;\r\n\t\tthis.getActualWidth(parent, child);\r\n\t\t// @ts-ignore\r\n\t\tthis.childResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(child);\r\n\t\t// @ts-ignore\r\n\t\tthis.parentResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(parent);\r\n\t},\r\n\tcomputed: {\r\n\t\tdynamic(): any {\r\n\t\t\tif (this.allowZoom) {\r\n\t\t\t\tconst xZoom = this.childWidth / this.parentWidth;\r\n\t\t\t\tconst yZoom = this.childHeight / this.parentHeight;\r\n\t\t\t\tlet zoom = 0.9 / Math.max(xZoom, yZoom);\r\n\t\t\t\t// console.log(zoom)\r\n\t\t\t\tif (zoom > this.zoomMax) {\r\n\t\t\t\t\tzoom = this.zoomMax;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translateX(-50%) translateY(-50%) scaleX(${zoom}) scaleY(${zoom})`\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform:\r\n\t\t\t\t\t\t\"translateX(-50%) translateY(-50%) scaleX(1) scaleY(1)\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetActualWidth(parent: any, child: any) {\r\n\t\t\tthis.parentWidth = parent.getBoundingClientRect().width;\r\n\t\t\tthis.parentHeight = parent.getBoundingClientRect().height;\r\n\t\t\tthis.childWidth = child.offsetWidth;\r\n\t\t\tthis.childHeight = child.offsetHeight;\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./zoomFrame.vue?vue&type=template&id=99b91f76&scoped=true\"\nimport script from \"./zoomFrame.vue?vue&type=script&lang=ts\"\nexport * from \"./zoomFrame.vue?vue&type=script&lang=ts\"\n\nimport \"./zoomFrame.vue?vue&type=style&index=0&id=99b91f76&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-99b91f76\"\n\nexport default script","<template>\r\n\t<div>\r\n\t\t<el-tabs class=\"tabs\" v-model=\"activeTo\">\r\n\t\t\t<el-tab-pane label=\"功能\" name=\"first\" />\r\n\t\t\t<el-tab-pane label=\"样式编辑器\" name=\"second\" />\r\n\t\t</el-tabs>\r\n\t\t<div style=\"height:504px\">\r\n\t\t\t<component :is=\"components[activeTo]\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, markRaw } from \"vue\";\r\nimport styleConfig from \"./style/index.vue\";\r\nimport danmakuConfig from \"./config/index.vue\";\r\nexport default defineComponent({\r\n\tname: \"danmakuConfig\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcomponents: {\r\n\t\t\t\tfirst: markRaw(danmakuConfig),\r\n\t\t\t\tsecond: markRaw(styleConfig)\r\n\t\t\t},\r\n\t\t\tactiveTo: \"first\"\r\n\t\t};\r\n\t}\r\n});\r\n</script>\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.tabs {\r\n\tposition: absolute;\r\n\ttop: -62px;\r\n\tright: 0px;\r\n\twidth: calc(100% - 50px);\r\n\t:deep .el-tabs__nav.is-top {\r\n\t\tfloat: right;\r\n\t}\r\n\t:deep .el-tabs__item {\r\n\t\tbox-shadow: none !important;\r\n\t}\r\n\t:deep .el-tabs__content {\r\n\t\tdisplay: none;\r\n\t}\r\n}\r\n</style>\r\n","<template>\r\n\t<content-frame align=\"row\" class=\"danmaku-setting\" :style=\"{'--brightness':brightness/100}\">\r\n\t\t<row-span :span=\"12\">\r\n\t\t\t<span class=\"hint\">\r\n\t\t\t\t用之前康康Q&A：\r\n\t\t\t\t<popver-help width=\"700px\" trigger=\"hover\">\r\n\t\t\t\t\t<div v-for=\"(hin,index) in hint\" :key=\"index\" style=\"margin-bottom:8px\">\r\n\t\t\t\t\t\tQ:<span class=\"hint\" v-html=\"hin.q\" /><br>\r\n\t\t\t\t\t\tA:<span class=\"hint\" v-html=\"hin.a\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</popver-help>\r\n\t\t\t</span>\r\n\t\t</row-span>\r\n\t\t<row-frame :flex=\"true\" width=\"100%\" style=\"margin-bottom:0px\">\r\n\t\t\t<row-span :span=\"2\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"step1:导入\">\r\n\t\t\t\t\t<el-dropdown @command=\"loadCommand\" type=\"primary\" trigger=\"click\" style=\"line-height:28px\">\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\">\r\n\t\t\t\t\t\t\t导入样式，从\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t\t\t<el-dropdown-menu>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"toolBox\">当前主播样式</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"web\">当前观众样式</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"d-toolBox\">默认主播样式</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"d-web\">默认观众样式</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"file\">文件</el-dropdown-item>\r\n\t\t\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-dropdown>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t\t<row-span :span=\"8.5\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"step2:选择类型编辑\">\r\n\t\t\t\t\t<el-radio-group @change=\"currentWidget={}\" :disabled=\"!enable\" size=\"mini\" v-model=\"styleType\">\r\n\t\t\t\t\t\t<el-radio-button v-for=\"type in typeOptions\" :label=\"type.value\" :key=\"type.value\">{{type.label}}\r\n\t\t\t\t\t\t</el-radio-button>\r\n\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t\t<row-span :span=\"1.5\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"step3:保存\">\r\n\t\t\t\t\t<el-dropdown @command=\"saveCommand\" type=\"primary\" trigger=\"click\" style=\"line-height:28px\">\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" :disabled=\"!enable\">\r\n\t\t\t\t\t\t\t保存到\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t\t\t<el-dropdown-menu>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"toolBox\">主播端</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"web\">观众端</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"both\">主播&观众端</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"file\">文件</el-dropdown-item>\r\n\t\t\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-dropdown>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\r\n\t\t</row-frame>\r\n\t\t<row-frame width=\"100%\" title=\"这是预览\">\r\n\t\t\t<div class=\"list-add-btn\" style=\"top:0px\">\r\n\t\t\t\t<div class=\"slider\">背景亮度：\r\n\t\t\t\t\t<el-slider style=\"width:100px\" v-model=\"brightness\" :min=\"20\" :max=\"100\" :step=\"1\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-checkbox v-model=\"zoomPreview\">缩放</el-checkbox>\r\n\t\t\t</div>\r\n\t\t\t<zoom-frame :allow-zoom=\"zoomPreview\" class=\"zoom-frame\" :styles=\"{width: '100%',height: '60px'}\">\r\n\t\t\t\t<div v-if=\"!enable\">么得内容，请先在上方导入样式</div>\r\n\t\t\t\t<div v-else-if=\"!currentStyle\">请先在上选择要编辑的弹幕类型</div>\r\n\t\t\t\t<div v-else-if=\"!currentWidgets.length\">请在左下添加组件</div>\r\n\t\t\t\t<danmaku-row style=\"white-space:nowrap\" v-else :setting=\"''\" :config-mode=\"true\" :danmaku=\"''\" />\r\n\t\t\t</zoom-frame>\r\n\t\t</row-frame>\r\n\t\t<row-frame :flex=\"true\" width=\"100%\" style=\"margin-bottom:0px\">\r\n\t\t\t<row-span :span=\"4\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"组件列表\">\r\n\t\t\t\t\t<div class=\"list-add-btn\" style=\"top:-10px\">\r\n\t\t\t\t\t\t<el-dropdown :max-height=\"200\" trigger=\"hover\">\r\n\t\t\t\t\t\t\t<el-button type=\"text\" :disabled=\"!currentStyle\">添加</el-button>\r\n\t\t\t\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t\t\t\t<el-dropdown-menu>\r\n\t\t\t\t\t\t\t\t\t<el-dropdown-item v-show=\"!(widget.widgetOptions.avaliable.length&&!widget.widgetOptions.avaliable.includes(styleType))\" v-for=\"widget in widgets\" style=\"width:150px\" :key=\"widget.id\" @click=\"addWidget(widget)\">\r\n\t\t\t\t\t\t\t\t\t\t{{widget.label}}\r\n\t\t\t\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</el-dropdown>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<base-list style=\"height:290px\" :list=\"currentWidgets\" :selected=\"currentWidget\" :action=\"action\" />\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t\t<row-span :span=\"8\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"设置参数\">\r\n\t\t\t\t\t<div v-show=\"widgetSelected\" class=\"list-add-btn\" style=\"top:0px;left:60px\">\r\n\t\t\t\t\t\t当前设置对象：{{currentWidget.label}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"list-add-btn\" style=\"top:-10px\">\r\n\t\t\t\t\t\t<el-button type=\"text\" :disabled=\"!widgetSelected\" @click=\"styleDialog=true;generateList()\">拉取样式</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"content\" style=\"height:290px;overflow-y:auto\">\r\n\t\t\t\t\t\t<vue-form :form-footer=\"{show:false}\" v-model=\"currentWidget.value\" v-if=\"widgets[currentWidget.labelEn]\" :schema=\"widgets[currentWidget.labelEn].styleForm\" />\r\n\t\t\t\t\t\t<div style=\"position:absolute;left:50%;top:50%;transform:translateX(-50%)\" v-else>右方选择组件</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t</content-frame>\r\n\t<el-dialog title=\"样式拉取(尽量用于拉取相同组件的样式，对于不同组件可能会出错)\" v-model=\"styleDialog\">\r\n\t\t<el-cascader :options=\"styleOption\" v-model=\"styleOptionValue\" @change=\"getStyle\" placeholder=\"请选择拉取样式\" />\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n\ttypeOptions,\r\n\tstyleConfig\r\n} from \"@front/components/danmakuFlow/utils/data\";\r\nimport zoomFrame from \"@front/util_component/frames/zoomFrame.vue\";\r\nimport baseList from \"@front/components/base/list/base.vue\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { defineComponent } from \"vue\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { randomId } from \"@front/util_function/base\";\r\nimport { loadAsText } from \"@front/util_function/file\";\r\nimport { toJSON } from \"@front/util_function/exportTo\";\r\nimport widgets from \"@front/components/danmakuFlow/widgets\";\r\nimport danmakuRow from \"@front/components/danmakuFlow/danmakuRow.vue\";\r\nimport { getMockByType } from \"@front/views/danmakuSetting/mock\";\r\nimport VueForm from \"@lljj/vue3-form-element\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { hint } from \"./qa\";\r\nexport default defineComponent({\r\n\tname: \"danmakuStyleConfig\",\r\n\tcomponents: { zoomFrame, baseList, danmakuRow, VueForm },\r\n\tdata() {\r\n\t\tconst currentWidgets: Array<any> = [];\r\n\t\tconst styleOption: Array<any> = [];\r\n\t\tconst styleOptionValue: Array<any> = [];\r\n\t\treturn {\r\n\t\t\thint: hint(),\r\n\t\t\tzoomPreview: true,\r\n\t\t\tstyleDialog: false, // 拉取样式选框\r\n\t\t\tstyleOption, // 拉取样式菜单\r\n\t\t\tstyleOptionValue, // 拉取样式缓存用\r\n\t\t\tstyleType: \"\",\r\n\t\t\tstyles: \"\",\r\n\t\t\twidgets,\r\n\t\t\tcurrentWidgets, // 当前弹幕类型里的组件列表\r\n\t\t\tcurrentStyle: false, // 当前弹幕类型设置\r\n\t\t\tcurrentWidget: {}, // 当前编辑的组件\r\n\t\t\tbrightness: 50,\r\n\t\t\taction: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-setting\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.selectWidget\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-top\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.moveWidget(-1)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-bottom\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.moveWidget(1)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-close\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.removeWidget\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters([\"danmakuProfile\"]),\r\n\t\ttypeOptions,\r\n\t\tmockDanmaku(): any {\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn getMockByType(this.styleType);\r\n\t\t},\r\n\t\tenable(): boolean {\r\n\t\t\treturn Boolean(this.styles);\r\n\t\t},\r\n\t\twidgetSelected(): boolean {\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn Boolean(this.currentWidget?.id);\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tstyleType(n, o) {\r\n\t\t\tif (!n) {\r\n\t\t\t\treturn;\r\n\t\t\t} // @ts-ignore\r\n\t\t\tthis.styles[n] = this.currentStyle =\r\n\t\t\t\tthis.styles[n] || styleConfig(this.styleType);\r\n\t\t},\r\n\t\tcurrentStyle: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tthis.currentWidgets = n?.widgets || [];\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t},\r\n\t\tcurrentWidgets: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tthis.currentStyle.widgets = n;\r\n\t\t\t\t} catch (error) {}\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadCommand(command: string) {\r\n\t\t\tconst loadFromStore = (type: string) => {\r\n\t\t\t\tthis.styles = cloneDeep(\r\n\t\t\t\t\tthis.danmakuProfile(type).settingOfType\r\n\t\t\t\t);\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"读取成功\",\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\"\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tconst loadFromFile = async () => {\r\n\t\t\t\tconst res: any = await loadAsText(\".json\");\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.styles = Object.assign(this.styles, JSON.parse(res));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\tmessage: \"读取失败\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst reset = (type: string) => {\r\n\t\t\t\ttype = type.replace(\"d-\", \"\");\r\n\t\t\t\tfetch(`/styles/${type}.json`)\r\n\t\t\t\t\t.then((res: any) => res.json())\r\n\t\t\t\t\t.then((json: any) => {\r\n\t\t\t\t\t\tthis.styles = json;\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tthis.styleType = \"\";\r\n\t\t\tthis.currentWidgets = [];\r\n\t\t\tthis.currentWidget = {};\r\n\t\t\tthis.currentStyle = false;\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase \"toolBox\":\r\n\t\t\t\tcase \"web\":\r\n\t\t\t\t\tloadFromStore(command);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"file\":\r\n\t\t\t\t\tloadFromFile();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"d-toolBox\":\r\n\t\t\t\tcase \"d-web\":\r\n\t\t\t\t\treset(command);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsaveCommand(command: string) {\r\n\t\t\tconst saveToFile = () => {\r\n\t\t\t\ttoJSON(\"新弹幕样式\", this.removeStyleForm(this.styles));\r\n\t\t\t};\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase \"toolBox\":\r\n\t\t\t\tcase \"web\":\r\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {\r\n\t\t\t\t\t\tstyleType: command,\r\n\t\t\t\t\t\tstyle: this.removeStyleForm(this.styles)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"both\":\r\n\t\t\t\t\tthis.$store.state.danmakuProfile.web.settingOfType = this.$store.state.danmakuProfile.toolBox.settingOfType = this.removeStyleForm(\r\n\t\t\t\t\t\tthis.styles\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"file\":\r\n\t\t\t\t\tsaveToFile();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"保存成功\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\"\r\n\t\t\t});\r\n\t\t},\r\n\t\taddWidget(widget: any) {\r\n\t\t\tif (!this.currentWidgets) {\r\n\t\t\t\tthis.currentWidgets = [];\r\n\t\t\t}\r\n\t\t\tconst sameWidgetNum = this.currentWidgets.filter((i: any) => {\r\n\t\t\t\treturn i.labelEn === widget.labelEn;\r\n\t\t\t}).length;\r\n\t\t\tconst limit = widget.widgetOptions.limit;\r\n\t\t\tif (limit && limit === sameWidgetNum) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: `${widget.label} 在本类型弹幕中只能有${limit}个`,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.currentWidgets = [\r\n\t\t\t\t...this.currentWidgets,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: randomId(6),\r\n\t\t\t\t\tlabel: widget.label,\r\n\t\t\t\t\tlabelEn: widget.labelEn,\r\n\t\t\t\t\tvalue: cloneDeep(widget.styleValue)\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t},\r\n\t\tremoveWidget(i: any) {\r\n\t\t\tif (this.currentWidget === i) {\r\n\t\t\t\tthis.currentWidget = \"\";\r\n\t\t\t}\r\n\t\t\tthis.currentWidgets = this.currentWidgets.filter((o: any) => {\r\n\t\t\t\treturn i !== o;\r\n\t\t\t});\r\n\t\t\treturn this.currentWidgets;\r\n\t\t},\r\n\t\tmoveWidget(o: number): any {\r\n\t\t\treturn (i: any) => {\r\n\t\t\t\tconst currentIndex = this.currentWidgets.indexOf(i);\r\n\t\t\t\tif (o < 0) {\r\n\t\t\t\t\tif (currentIndex === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.removeWidget(i).splice(currentIndex - 1, 0, i);\r\n\t\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (currentIndex === this.currentWidgets.length - 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.removeWidget(i).splice(currentIndex + 1, 0, i);\r\n\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\r\n\t\t\t};\r\n\t\t},\r\n\t\tselectWidget(i: any) {\r\n\t\t\tthis.currentWidget = i;\r\n\t\t},\r\n\t\tgenerateList() {\r\n\t\t\tthis.styleOptionValue = [];\r\n\t\t\tconst generateMenu = (style: any) => {\r\n\t\t\t\tconst output = [];\r\n\t\t\t\tfor (const option of this.typeOptions) {\r\n\t\t\t\t\tconst styleOfType: any = style[option.value];\r\n\t\t\t\t\tif (!styleOfType?.widgets.length) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tlabel: styleOfType.label || styleOfType.name,\r\n\t\t\t\t\t\tchildren: styleOfType.widgets.map((widget: any) => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tlabel: widget.label,\r\n\t\t\t\t\t\t\t\tvalue: widget.value\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn output;\r\n\t\t\t};\r\n\t\t\tthis.styleOption = [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"编辑中样式\",\r\n\t\t\t\t\tchildren: generateMenu(this.styles)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"主播弹幕样式\",\r\n\t\t\t\t\tchildren: generateMenu(\r\n\t\t\t\t\t\tthis.danmakuProfile(\"toolBox\").settingOfType\r\n\t\t\t\t\t)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"观众弹幕样式\",\r\n\t\t\t\t\tchildren: generateMenu(\r\n\t\t\t\t\t\tthis.danmakuProfile(\"web\").settingOfType\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t].filter(i => i.children.length);\r\n\t\t},\r\n\t\tgetStyle(e: any) {\r\n\t\t\tconst value = e.pop();\r\n\t\t\tconst currentWidget: any = this.currentWidget;\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (const key in currentWidget.value) {\r\n\t\t\t\t\t// if (key === \"config\") {\r\n\t\t\t\t\t// \tcontinue;\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tif (value[key]) {\r\n\t\t\t\t\t\tObject.assign(currentWidget.value[key], value[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.styleDialog = false;\r\n\t\t},\r\n\t\tremoveStyleForm(style: any) {\r\n\t\t\tconst newStyle = cloneDeep(style);\r\n\t\t\ttry {\r\n\t\t\t\tObject.keys(newStyle).forEach((key: any) => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (!newStyle[key].widgets) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewStyle[key].widgets.forEach((widget: any) => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tdelete widget.styleForm;\r\n\t\t\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {}\r\n\t\t\treturn newStyle;\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n@import \"@front/styles/scrollbar.scss\";\r\n@import \"@front/styles/backgrounds.scss\";\r\n.zoom-frame {\r\n\tposition: relative;\r\n\tz-index: 2;\r\n\tbackground-color: black;\r\n\t&::before {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-image: url($gird);\r\n\t\topacity: var(--brightness);\r\n\t}\r\n}\r\n.list-add-btn {\r\n\tposition: absolute;\r\n\tright: 0px;\r\n\tdisplay: flex;\r\n}\r\n.slider {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmargin-top: -10px;\r\n\tmargin-right: 20px;\r\n}\r\n.drop-down-item {\r\n\twidth: 150px;\r\n}\r\n.content {\r\n\t@include scrollbarDark();\r\n\twidth: calc(100%);\r\n}\r\n</style>\r\n","import FileSaver from \"file-saver\";\r\nexport const toJSON = (name: string, data: any) => {\r\n\tFileSaver.saveAs(\r\n\t\tnew Blob([JSON.stringify(data)], { type: \"\" }),\r\n\t\t`${name}.json`\r\n\t);\r\n};\r\nexport const toTXT = (name: string, content: string) => {\r\n\tFileSaver.saveAs(content, `${name}.txt`);\r\n};\r\n","export const hint = (): any => {\r\n\treturn [\r\n\t\t{\r\n\t\t\tq: \"要咋用？导入是啥？\",\r\n\t\t\ta:\r\n\t\t\t\t\"本工具箱支持样式导入导出，并且自带了2种样式（点击导入-主播版/观众版查看）,因此你可与其他同样使用工具箱的主播共享样式，或者让DD帮你定制样式;导入并编辑样式后应用到主播/观众端就可以啦\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tq: \"什么是主播端/观众端？有什么区别？为什么要分两种？\",\r\n\t\t\ta:\r\n\t\t\t\t\"主播端就是开播以后主播看的弹幕,观众端同上,在开发过程中我们发现a站的弹幕姬样式在主播一侧看来非常累人，显示信息不清晰，因此将样式分开设置，主播端可以把样式调整的更简约，清晰显示弹幕，观众端可以更花哨\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tq: \"那么怎么调整样式呢？\",\r\n\t\t\ta:\r\n\t\t\t\t\"一条弹幕由多个组件组成，如头像、用户名、评论等，选择某类型弹幕后在左下方添加/删除组件,点击齿轮编辑相应组件，点击上/下箭头调整组件左右排列,样式调整需要对一些基础的html/css知识有所了解,如果不是太懂建议只调整字体、颜色等,或者随便点点看看\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tq: \"编辑完以后咋弄？\",\r\n\t\t\ta:\r\n\t\t\t\t\"直接保存到主播端/观众端即可，如果是在直播中，弹幕样式会实时更新上去\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tq: \"每个类型弹幕都要设置一次，好麻烦！\",\r\n\t\t\ta:\r\n\t\t\t\t\"为此我们做了样式拉取功能，例如您在“评论”类型的弹幕中调整好了用户名的样式，在“点赞”类型的弹幕中只需添加用户名的组件并选中，点击右侧的“样式拉取”即可把评论的用户名样式拉过来\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tq: \"啊我不懂/有点麻烦/懒\",\r\n\t\t\ta:\r\n\t\t\t\t\"可以找DD或站内@<a href='http&#58&#47&#47www.acfun.cn/u/45443067' target='_blank'>ACFUN-FOSS_开源⑨课</a>进行定制(免费)\"\r\n\t\t}\r\n\t];\r\n};\r\n","\r\nimport {\r\n\ttypeOptions,\r\n\tstyleConfig\r\n} from \"@front/components/danmakuFlow/utils/data\";\r\nimport zoomFrame from \"@front/util_component/frames/zoomFrame.vue\";\r\nimport baseList from \"@front/components/base/list/base.vue\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { defineComponent } from \"vue\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { randomId } from \"@front/util_function/base\";\r\nimport { loadAsText } from \"@front/util_function/file\";\r\nimport { toJSON } from \"@front/util_function/exportTo\";\r\nimport widgets from \"@front/components/danmakuFlow/widgets\";\r\nimport danmakuRow from \"@front/components/danmakuFlow/danmakuRow.vue\";\r\nimport { getMockByType } from \"@front/views/danmakuSetting/mock\";\r\nimport VueForm from \"@lljj/vue3-form-element\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { hint } from \"./qa\";\r\nexport default defineComponent({\r\n\tname: \"danmakuStyleConfig\",\r\n\tcomponents: { zoomFrame, baseList, danmakuRow, VueForm },\r\n\tdata() {\r\n\t\tconst currentWidgets: Array<any> = [];\r\n\t\tconst styleOption: Array<any> = [];\r\n\t\tconst styleOptionValue: Array<any> = [];\r\n\t\treturn {\r\n\t\t\thint: hint(),\r\n\t\t\tzoomPreview: true,\r\n\t\t\tstyleDialog: false, // 拉取样式选框\r\n\t\t\tstyleOption, // 拉取样式菜单\r\n\t\t\tstyleOptionValue, // 拉取样式缓存用\r\n\t\t\tstyleType: \"\",\r\n\t\t\tstyles: \"\",\r\n\t\t\twidgets,\r\n\t\t\tcurrentWidgets, // 当前弹幕类型里的组件列表\r\n\t\t\tcurrentStyle: false, // 当前弹幕类型设置\r\n\t\t\tcurrentWidget: {}, // 当前编辑的组件\r\n\t\t\tbrightness: 50,\r\n\t\t\taction: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-setting\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.selectWidget\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-top\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.moveWidget(-1)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-bottom\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.moveWidget(1)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"el-icon-close\",\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\taction: this.removeWidget\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters([\"danmakuProfile\"]),\r\n\t\ttypeOptions,\r\n\t\tmockDanmaku(): any {\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn getMockByType(this.styleType);\r\n\t\t},\r\n\t\tenable(): boolean {\r\n\t\t\treturn Boolean(this.styles);\r\n\t\t},\r\n\t\twidgetSelected(): boolean {\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn Boolean(this.currentWidget?.id);\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tstyleType(n, o) {\r\n\t\t\tif (!n) {\r\n\t\t\t\treturn;\r\n\t\t\t} // @ts-ignore\r\n\t\t\tthis.styles[n] = this.currentStyle =\r\n\t\t\t\tthis.styles[n] || styleConfig(this.styleType);\r\n\t\t},\r\n\t\tcurrentStyle: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tthis.currentWidgets = n?.widgets || [];\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t},\r\n\t\tcurrentWidgets: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tthis.currentStyle.widgets = n;\r\n\t\t\t\t} catch (error) {}\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadCommand(command: string) {\r\n\t\t\tconst loadFromStore = (type: string) => {\r\n\t\t\t\tthis.styles = cloneDeep(\r\n\t\t\t\t\tthis.danmakuProfile(type).settingOfType\r\n\t\t\t\t);\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"读取成功\",\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\"\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tconst loadFromFile = async () => {\r\n\t\t\t\tconst res: any = await loadAsText(\".json\");\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.styles = Object.assign(this.styles, JSON.parse(res));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\tmessage: \"读取失败\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst reset = (type: string) => {\r\n\t\t\t\ttype = type.replace(\"d-\", \"\");\r\n\t\t\t\tfetch(`/styles/${type}.json`)\r\n\t\t\t\t\t.then((res: any) => res.json())\r\n\t\t\t\t\t.then((json: any) => {\r\n\t\t\t\t\t\tthis.styles = json;\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tthis.styleType = \"\";\r\n\t\t\tthis.currentWidgets = [];\r\n\t\t\tthis.currentWidget = {};\r\n\t\t\tthis.currentStyle = false;\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase \"toolBox\":\r\n\t\t\t\tcase \"web\":\r\n\t\t\t\t\tloadFromStore(command);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"file\":\r\n\t\t\t\t\tloadFromFile();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"d-toolBox\":\r\n\t\t\t\tcase \"d-web\":\r\n\t\t\t\t\treset(command);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsaveCommand(command: string) {\r\n\t\t\tconst saveToFile = () => {\r\n\t\t\t\ttoJSON(\"新弹幕样式\", this.removeStyleForm(this.styles));\r\n\t\t\t};\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase \"toolBox\":\r\n\t\t\t\tcase \"web\":\r\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {\r\n\t\t\t\t\t\tstyleType: command,\r\n\t\t\t\t\t\tstyle: this.removeStyleForm(this.styles)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"both\":\r\n\t\t\t\t\tthis.$store.state.danmakuProfile.web.settingOfType = this.$store.state.danmakuProfile.toolBox.settingOfType = this.removeStyleForm(\r\n\t\t\t\t\t\tthis.styles\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"file\":\r\n\t\t\t\t\tsaveToFile();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"保存成功\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\"\r\n\t\t\t});\r\n\t\t},\r\n\t\taddWidget(widget: any) {\r\n\t\t\tif (!this.currentWidgets) {\r\n\t\t\t\tthis.currentWidgets = [];\r\n\t\t\t}\r\n\t\t\tconst sameWidgetNum = this.currentWidgets.filter((i: any) => {\r\n\t\t\t\treturn i.labelEn === widget.labelEn;\r\n\t\t\t}).length;\r\n\t\t\tconst limit = widget.widgetOptions.limit;\r\n\t\t\tif (limit && limit === sameWidgetNum) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: `${widget.label} 在本类型弹幕中只能有${limit}个`,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.currentWidgets = [\r\n\t\t\t\t...this.currentWidgets,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: randomId(6),\r\n\t\t\t\t\tlabel: widget.label,\r\n\t\t\t\t\tlabelEn: widget.labelEn,\r\n\t\t\t\t\tvalue: cloneDeep(widget.styleValue)\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t},\r\n\t\tremoveWidget(i: any) {\r\n\t\t\tif (this.currentWidget === i) {\r\n\t\t\t\tthis.currentWidget = \"\";\r\n\t\t\t}\r\n\t\t\tthis.currentWidgets = this.currentWidgets.filter((o: any) => {\r\n\t\t\t\treturn i !== o;\r\n\t\t\t});\r\n\t\t\treturn this.currentWidgets;\r\n\t\t},\r\n\t\tmoveWidget(o: number): any {\r\n\t\t\treturn (i: any) => {\r\n\t\t\t\tconst currentIndex = this.currentWidgets.indexOf(i);\r\n\t\t\t\tif (o < 0) {\r\n\t\t\t\t\tif (currentIndex === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.removeWidget(i).splice(currentIndex - 1, 0, i);\r\n\t\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (currentIndex === this.currentWidgets.length - 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.removeWidget(i).splice(currentIndex + 1, 0, i);\r\n\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\r\n\t\t\t};\r\n\t\t},\r\n\t\tselectWidget(i: any) {\r\n\t\t\tthis.currentWidget = i;\r\n\t\t},\r\n\t\tgenerateList() {\r\n\t\t\tthis.styleOptionValue = [];\r\n\t\t\tconst generateMenu = (style: any) => {\r\n\t\t\t\tconst output = [];\r\n\t\t\t\tfor (const option of this.typeOptions) {\r\n\t\t\t\t\tconst styleOfType: any = style[option.value];\r\n\t\t\t\t\tif (!styleOfType?.widgets.length) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tlabel: styleOfType.label || styleOfType.name,\r\n\t\t\t\t\t\tchildren: styleOfType.widgets.map((widget: any) => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tlabel: widget.label,\r\n\t\t\t\t\t\t\t\tvalue: widget.value\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn output;\r\n\t\t\t};\r\n\t\t\tthis.styleOption = [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"编辑中样式\",\r\n\t\t\t\t\tchildren: generateMenu(this.styles)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"主播弹幕样式\",\r\n\t\t\t\t\tchildren: generateMenu(\r\n\t\t\t\t\t\tthis.danmakuProfile(\"toolBox\").settingOfType\r\n\t\t\t\t\t)\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"观众弹幕样式\",\r\n\t\t\t\t\tchildren: generateMenu(\r\n\t\t\t\t\t\tthis.danmakuProfile(\"web\").settingOfType\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t].filter(i => i.children.length);\r\n\t\t},\r\n\t\tgetStyle(e: any) {\r\n\t\t\tconst value = e.pop();\r\n\t\t\tconst currentWidget: any = this.currentWidget;\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (const key in currentWidget.value) {\r\n\t\t\t\t\t// if (key === \"config\") {\r\n\t\t\t\t\t// \tcontinue;\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tif (value[key]) {\r\n\t\t\t\t\t\tObject.assign(currentWidget.value[key], value[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.styleDialog = false;\r\n\t\t},\r\n\t\tremoveStyleForm(style: any) {\r\n\t\t\tconst newStyle = cloneDeep(style);\r\n\t\t\ttry {\r\n\t\t\t\tObject.keys(newStyle).forEach((key: any) => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (!newStyle[key].widgets) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewStyle[key].widgets.forEach((widget: any) => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tdelete widget.styleForm;\r\n\t\t\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {}\r\n\t\t\treturn newStyle;\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=677be982&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=677be982&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-677be982\"\n\nexport default script","<template>\r\n\t<content-frame class=\"danmaku-setting\" :style=\"{'--brightness':brightness/100}\">\r\n\t\t<row-frame title=\"预览\">\r\n\t\t\t<div class=\"list-add-btn\" style=\"top:0px\">\r\n\t\t\t\t<div class=\"slider\">背景亮度：\r\n\t\t\t\t\t<el-slider style=\"width:100px\" v-model=\"brightness\" :min=\"20\" :max=\"100\" :step=\"1\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<row-span>\r\n\t\t\t\t<div class=\"danmaku-list-bg\">\r\n\t\t\t\t\t<flow class=\"danmaku-list\" :configMode=\"true\" :danmakuList=\"mockData\" :max=\"100\" :settings=\"settings\" />\r\n\t\t\t\t</div>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t\t<row-frame title=\"设置对象\">\r\n\t\t\t<row-span>\r\n\t\t\t\t<el-radio-group v-model=\"settingTarget\" size=\"mini\">\r\n\t\t\t\t\t<el-radio-button label=\"toolBox\">主播版</el-radio-button>\r\n\t\t\t\t\t<el-radio-button label=\"web\">观众版</el-radio-button>\r\n\t\t\t\t</el-radio-group>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t\t<div class=\"right-content\">\r\n\t\t\t<component v-model:settings=\"settings\" v-model:mockData=\"mockData\" v-for=\"(item,index) in settingBlocks\" :key=\"index\" :is=\"item\" />\r\n\t\t\t<el-button @click=\"save\" size=\"mini\" type=\"primary\">保存（{{{'toolBox':'主播端','web':'观众端'}[settingTarget]}}设置）</el-button>\r\n\t\t\t<el-button v-show=\"settingTarget==='toolBox'\" @click=\"saveSync\" size=\"mini\" type=\"primary\">保存并同步到观众端</el-button>\r\n\t\t</div>\r\n\t</content-frame>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, markRaw } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport { initMock, getMock } from \"./../mock\";\r\nimport flow from \"@front/components/danmakuFlow/index.vue\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport random from \"lodash/random\";\r\nimport { toANY } from \"@front/util_function/type\";\r\nimport { rank } from \"@front/datas/room\";\r\nimport { settings, commonSettings } from \"@front/datas/danmaku\";\r\nimport { settingBlocks } from \"./settingBlocks\";\r\nimport { Filter } from \"@front/components/danmakuFlow/utils/common\";\r\nimport { ElMessage } from \"element-plus\";\r\nexport default defineComponent({\r\n\tname: \"danmakuSetting\",\r\n\tcomponents: { flow },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmockTimer: toANY(null),\r\n\t\t\tmockData: initMock(),\r\n\t\t\tsettingBlocks: settingBlocks().map(i => markRaw(i)),\r\n\t\t\tbrightness: 50,\r\n\t\t\tsettingTarget: \"toolBox\",\r\n\t\t\tsettings: settings(),\r\n\t\t\tcommonSettings: commonSettings(),\r\n\t\t\tchangeDialog: false,\r\n\t\t\tfilter: new Filter()\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getProfile(this.settingTarget);\r\n\t\tthis.polling();\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tclearTimeout(this.mockTimer);\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"danmakuSession\", \"rank\", \"danmakuProfile\"]),\r\n\t\ttempRank(): any {\r\n\t\t\treturn {\r\n\t\t\t\t...rank(),\r\n\t\t\t\thasMedal: true,\r\n\t\t\t\tclubName: \"ACER\"\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tsettingTarget: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tthis.getProfile(n);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsettings: {\r\n\t\t\thandler() {\r\n\t\t\t\tthis.resetFilter();\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tpolling() {\r\n\t\t\tclearTimeout(this.mockTimer);\r\n\t\t\tthis.mockData = this.filter.filterUpdate(\r\n\t\t\t\t[...getMock(random(0, 3))],\r\n\t\t\t\tthis.mockData,\r\n\t\t\t\tthis.settings,\r\n\t\t\t\tthis.commonSettings,\r\n\t\t\t\tthis.tempRank\r\n\t\t\t).list;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.mockTimer = setTimeout(this.polling, random(0, 2) * 1000);\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetFilter() {\r\n\t\t\tthis.filter.giftList = [];\r\n\t\t\tthis.filter.likeList = [];\r\n\t\t\tconst newMock = [...this.mockData].map((mock: any) => {\r\n\t\t\t\treturn { ...mock };\r\n\t\t\t});\r\n\t\t\tthis.mockData = this.filter.filter(\r\n\t\t\t\tnewMock,\r\n\t\t\t\tthis.settings,\r\n\t\t\t\tthis.commonSettings,\r\n\t\t\t\tthis.tempRank\r\n\t\t\t).filtered;\r\n\t\t},\r\n\t\tgetProfile(target: any) {\r\n\t\t\tthis.settings = cloneDeep(this.danmakuProfile[target]);\r\n\t\t\tthis.commonSettings =\r\n\t\t\t\tcloneDeep(this.$store.state.danmakuProfile.common) ||\r\n\t\t\t\tcommonSettings();\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tthis.$store.commit(\"updateSettings\", {\r\n\t\t\t\tsettingType: this.settingTarget,\r\n\t\t\t\tsetting: this.settings\r\n\t\t\t});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveSync() {\r\n\t\t\tconst save = {\r\n\t\t\t\t...this.settings\r\n\t\t\t};\r\n\t\t\tdelete save.settingOfType;\r\n\t\t\tObject.assign(this.danmakuProfile.toolBox, save);\r\n\t\t\tObject.assign(this.danmakuProfile.web, save);\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存并同步\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n@import \"@front/styles/scrollbar.scss\";\r\n@import \"@front/styles/backgrounds.scss\";\r\n.danmaku-setting {\r\n\tposition: absolute;\r\n\theight: 100%;\r\n\t.danmaku-list-bg {\r\n\t\twidth: 100%;\r\n\t\tposition: relative;\r\n\t\tbackground-color: black;\r\n\t\toverflow: hidden;\r\n\t\tborder: $--border-base;\r\n\t\tborder-radius: $--border-radius-base;\r\n\t\tbox-shadow: $--box-shadow-base;\r\n\t\t&::before {\r\n\t\t\tcontent: \"\";\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground-image: url($gird);\r\n\t\t\topacity: var(--brightness);\r\n\t\t}\r\n\t}\r\n\t.danmaku-list {\r\n\t\theight: 350px !important;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.right-content {\r\n\t\t@include scrollbarDark();\r\n\t\twidth: 55%;\r\n\t\t:deep .el-checkbox-button__inner {\r\n\t\t\tpadding-left: 5px !important;\r\n\t\t\tpadding-right: 5px !important;\r\n\t\t}\r\n\t\t:deep > div {\r\n\t\t\twidth: 100% !important;\r\n\t\t}\r\n\t\toverflow-y: scroll;\r\n\t}\r\n}\r\n.disabled {\r\n\tcolor: $--color-text-secondary;\r\n}\r\n.list-add-btn {\r\n\tposition: absolute;\r\n\tright: 0px;\r\n\tdisplay: flex;\r\n\t.slider {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-top: -10px;\r\n\t\tmargin-right: 20px;\r\n\t}\r\n}\r\n</style>\r\n","<template>\r\n\t<row-frame title=\"一般设置\" :flex=\"true\">\r\n\t\t<row-span :span=\"5\">\r\n\t\t\t最大回滚弹幕数量\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-input-number size=\"mini\" v-model=\"setting.maxNum\" />\r\n\t\t</row-span>\r\n\t\t<span class=\"hint\">请根据机器性能自行调节</span>\r\n\t</row-frame>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tsettings: {\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tsetting: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.settings;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:settings\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tsettings: {\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tsetting: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.settings;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:settings\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./common.vue?vue&type=template&id=3c615228&scoped=true\"\nimport script from \"./common.vue?vue&type=script&lang=ts\"\nexport * from \"./common.vue?vue&type=script&lang=ts\"\nscript.render = render\nscript.__scopeId = \"data-v-3c615228\"\n\nexport default script","<template>\r\n\t<row-frame title=\"过滤器\" :flex=\"true\">\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t开启过滤\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch v-model=\"setting.filter.open\" />\r\n\t\t</row-span>\r\n\t\t<!-- <row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t游客过滤\r\n\t\t</row-span> -->\r\n\t\t<!-- <row-span :span=\"3\">\r\n\t\t\t<el-switch v-model=\"setting.filter.visitor\" :disabled=\"!setting.filter.open\" />\r\n\t\t</row-span> -->\r\n\t</row-frame>\r\n\t<row-frame :flex=\"true\">\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t牌子过滤\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch v-model=\"setting.filter.clubOnly\" :disabled=\"!setting.filter.open\" />\r\n\t\t</row-span>\r\n\t\t<row-span :class=\"{disabled:!(setting.filter.open)}\" :span=\"3\">\r\n\t\t\t等级过滤\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-input-number :disabled=\"!(setting.filter.open)\" style=\"margin-left:8px\" v-model=\"setting.clubLevel\" :min=\"0\" :step=\"1\" size=\"mini\" />\r\n\t\t</row-span>\r\n\t\t<div class=\"hint\">牌子过滤：只显示挂主播牌子的弹幕（主播没牌子则不生效）；<br>\r\n\t\t\t等级过滤：只显示大于一定等级的牌子的弹幕</div>\r\n\t</row-frame>\r\n\t<row-frame :flex=\"true\">\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t黑名单\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.blackList\" />\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t关键词屏蔽\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.keyword\" />\r\n\t\t</row-span>\r\n\t</row-frame>\r\n\t<row-frame :flex=\"true\">\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t弹幕显示\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"9\" v-show=\"setting.filter.blackList\">\r\n\t\t\t<el-select :disabled=\"!setting.filter.open\" v-model=\"setting.filter.types\" multiple size=\"mini\" style=\"width:100%\" placeholder=\"多选显示弹幕类型\">\r\n\t\t\t\t<el-option v-for=\"type in typeOptions\" :label=\"type.label\" :value=\"type.value\" :key=\"type.value\" />\r\n\t\t\t</el-select>\r\n\t\t</row-span>\r\n\t</row-frame>\r\n\t<row-frame title=\"弹幕合并\" :flex=\"true\">\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t礼物连击\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.combineGift\" />\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t点赞\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.combineLike\" />\r\n\t\t</row-span>\r\n\t</row-frame>\r\n\t<row-frame title=\"\" :flex=\"true\">\r\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\r\n\t\t\t进入直播间\r\n\t\t</row-span>\r\n\t\t<row-span :span=\"3\">\r\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.combineEnter\" />\r\n\t\t</row-span>\r\n\t\t<div class=\"hint\">合并：针对一定时期内相同用户发出的相同类型弹幕进行合并</div>\r\n\t</row-frame>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tsettings: {\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tmockData: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\ttypeOptions,\r\n\t\tsetting: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.settings;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:settings\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n","\r\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tsettings: {\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tmockData: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\ttypeOptions,\r\n\t\tsetting: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.settings;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:settings\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./filter.vue?vue&type=template&id=51e16fca\"\nimport script from \"./filter.vue?vue&type=script&lang=ts\"\nexport * from \"./filter.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","// import settingTarget from \"./settingTarget.vue\";\r\nimport common from \"./common.vue\";\r\n// import combine from \"./combine.vue\";\r\nimport filter from \"./filter.vue\";\r\nexport const settingBlocks = (): Array<any> => {\r\n\treturn [common, filter];\r\n};\r\n","\r\nimport { defineComponent, markRaw } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport { initMock, getMock } from \"./../mock\";\r\nimport flow from \"@front/components/danmakuFlow/index.vue\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport random from \"lodash/random\";\r\nimport { toANY } from \"@front/util_function/type\";\r\nimport { rank } from \"@front/datas/room\";\r\nimport { settings, commonSettings } from \"@front/datas/danmaku\";\r\nimport { settingBlocks } from \"./settingBlocks\";\r\nimport { Filter } from \"@front/components/danmakuFlow/utils/common\";\r\nimport { ElMessage } from \"element-plus\";\r\nexport default defineComponent({\r\n\tname: \"danmakuSetting\",\r\n\tcomponents: { flow },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmockTimer: toANY(null),\r\n\t\t\tmockData: initMock(),\r\n\t\t\tsettingBlocks: settingBlocks().map(i => markRaw(i)),\r\n\t\t\tbrightness: 50,\r\n\t\t\tsettingTarget: \"toolBox\",\r\n\t\t\tsettings: settings(),\r\n\t\t\tcommonSettings: commonSettings(),\r\n\t\t\tchangeDialog: false,\r\n\t\t\tfilter: new Filter()\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getProfile(this.settingTarget);\r\n\t\tthis.polling();\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tclearTimeout(this.mockTimer);\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"danmakuSession\", \"rank\", \"danmakuProfile\"]),\r\n\t\ttempRank(): any {\r\n\t\t\treturn {\r\n\t\t\t\t...rank(),\r\n\t\t\t\thasMedal: true,\r\n\t\t\t\tclubName: \"ACER\"\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tsettingTarget: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tthis.getProfile(n);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsettings: {\r\n\t\t\thandler() {\r\n\t\t\t\tthis.resetFilter();\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tpolling() {\r\n\t\t\tclearTimeout(this.mockTimer);\r\n\t\t\tthis.mockData = this.filter.filterUpdate(\r\n\t\t\t\t[...getMock(random(0, 3))],\r\n\t\t\t\tthis.mockData,\r\n\t\t\t\tthis.settings,\r\n\t\t\t\tthis.commonSettings,\r\n\t\t\t\tthis.tempRank\r\n\t\t\t).list;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.mockTimer = setTimeout(this.polling, random(0, 2) * 1000);\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetFilter() {\r\n\t\t\tthis.filter.giftList = [];\r\n\t\t\tthis.filter.likeList = [];\r\n\t\t\tconst newMock = [...this.mockData].map((mock: any) => {\r\n\t\t\t\treturn { ...mock };\r\n\t\t\t});\r\n\t\t\tthis.mockData = this.filter.filter(\r\n\t\t\t\tnewMock,\r\n\t\t\t\tthis.settings,\r\n\t\t\t\tthis.commonSettings,\r\n\t\t\t\tthis.tempRank\r\n\t\t\t).filtered;\r\n\t\t},\r\n\t\tgetProfile(target: any) {\r\n\t\t\tthis.settings = cloneDeep(this.danmakuProfile[target]);\r\n\t\t\tthis.commonSettings =\r\n\t\t\t\tcloneDeep(this.$store.state.danmakuProfile.common) ||\r\n\t\t\t\tcommonSettings();\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tthis.$store.commit(\"updateSettings\", {\r\n\t\t\t\tsettingType: this.settingTarget,\r\n\t\t\t\tsetting: this.settings\r\n\t\t\t});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveSync() {\r\n\t\t\tconst save = {\r\n\t\t\t\t...this.settings\r\n\t\t\t};\r\n\t\t\tdelete save.settingOfType;\r\n\t\t\tObject.assign(this.danmakuProfile.toolBox, save);\r\n\t\t\tObject.assign(this.danmakuProfile.web, save);\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存并同步\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=0644e57c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0644e57c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0644e57c\"\n\nexport default script","\r\nimport { defineComponent, markRaw } from \"vue\";\r\nimport styleConfig from \"./style/index.vue\";\r\nimport danmakuConfig from \"./config/index.vue\";\r\nexport default defineComponent({\r\n\tname: \"danmakuConfig\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcomponents: {\r\n\t\t\t\tfirst: markRaw(danmakuConfig),\r\n\t\t\t\tsecond: markRaw(styleConfig)\r\n\t\t\t},\r\n\t\t\tactiveTo: \"first\"\r\n\t\t};\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=66a0b505&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=66a0b505&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-66a0b505\"\n\nexport default script","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","var baseRandom = require('./_baseRandom'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseFloat = parseFloat;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min,\n    nativeRandom = Math.random;\n\n/**\n * Produces a random number between the inclusive `lower` and `upper` bounds.\n * If only one argument is provided a number between `0` and the given number\n * is returned. If `floating` is `true`, or either `lower` or `upper` are\n * floats, a floating-point number is returned instead of an integer.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @memberOf _\n * @since 0.7.0\n * @category Number\n * @param {number} [lower=0] The lower bound.\n * @param {number} [upper=1] The upper bound.\n * @param {boolean} [floating] Specify returning a floating-point number.\n * @returns {number} Returns the random number.\n * @example\n *\n * _.random(0, 5);\n * // => an integer between 0 and 5\n *\n * _.random(5);\n * // => also an integer between 0 and 5\n *\n * _.random(5, true);\n * // => a floating-point number between 0 and 5\n *\n * _.random(1.2, 5.2);\n * // => a floating-point number between 1.2 and 5.2\n */\nfunction random(lower, upper, floating) {\n  if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n    upper = floating = undefined;\n  }\n  if (floating === undefined) {\n    if (typeof upper == 'boolean') {\n      floating = upper;\n      upper = undefined;\n    }\n    else if (typeof lower == 'boolean') {\n      floating = lower;\n      lower = undefined;\n    }\n  }\n  if (lower === undefined && upper === undefined) {\n    lower = 0;\n    upper = 1;\n  }\n  else {\n    lower = toFinite(lower);\n    if (upper === undefined) {\n      upper = lower;\n      lower = 0;\n    } else {\n      upper = toFinite(upper);\n    }\n  }\n  if (lower > upper) {\n    var temp = lower;\n    lower = upper;\n    upper = temp;\n  }\n  if (floating || lower % 1 || upper % 1) {\n    var rand = nativeRandom();\n    return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n  }\n  return baseRandom(lower, upper);\n}\n\nmodule.exports = random;\n"],"sourceRoot":""}