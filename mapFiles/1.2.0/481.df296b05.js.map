{"version":3,"sources":["webpack://acfunlive-toolbox/./src/electron_browser/util_component/frames/zoomFrame.vue","webpack://acfunlive-toolbox/./src/electron_browser/util_component/frames/zoomFrame.vue?da38","webpack://acfunlive-toolbox/./src/electron_browser/util_component/frames/zoomFrame.vue?fe1c","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/index.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/style/index.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/style/form.ts","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/style/default.ts","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/style/index.vue?ed2b","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/style/index.vue?dfd6","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/config/index.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/config/rules.vue","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/config/rules.vue?7da8","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/config/rules.vue?3cae","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/config/index.vue?9422","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/config/index.vue?b859","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/index.vue?8a8c","webpack://acfunlive-toolbox/./src/electron_browser/views/superChat/index.vue?a554","webpack://acfunlive-toolbox/./node_modules/lodash/clone.js"],"names":["class","style","styles","dynamic","defineComponent","name","props","allowZoom","default","zoomMax","parentResizeListener","childResizeListener","parentWidth","parentHeight","childWidth","childHeight","child","this","$el","firstChild","parent","getActualWidth","ResizeObserver","observe","computed","xZoom","yZoom","zoom","Math","max","transform","methods","getBoundingClientRect","width","height","offsetWidth","offsetHeight","render","activeTo","label","components","align","flex","span","title","allow-zoom","theme","scBlock","block","configMode","themeID","selectTheme","size","key","value","themes","id","remove","saveCommand","type","trigger","max-height","dropdown","command","disabled","form-footer","schema","rule","saveAsDialog","show-close","close-on-click-modal","footer","newName","saveThemeAs","properties","config","text","background","backgroundType","backgroundColor","backgroundDynamic","backgroundImage","backgroundSizeType","backgroundSize","backgroundPosition","backgroundOpacity","listStyle","font","fontSize","fontWeight","color","textShadowWidth","panelStyle","textShadowColor","zoomFrame","VueForm","listBlock","listPanel","defaultTheme","danmaku","triggerValue","listDuration","nextLevel","getTheme","filter","them","list","duration","offset","message","saveTheme","find","Object","assign","rules","$store","state","danmakuProfile","common","superChat","forEach","commit","unshift","then","res","catch","e","console","error","enable","webEnable","showNextLevel","displayType","item","index","sort","save","step","min","modelValue","$event","placeholder","applyTheme","add","$emit","previous","slice","push","rul","saveCheck","a","b","errmsg","first","markRaw","second","baseClone","CLONE_SYMBOLS_FLAG","clone","module","exports"],"mappings":"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","file":"js/481.df296b05.js","sourcesContent":["<template>\r\n\t<div class=\"zoomFrame\" :style=\"styles\">\r\n\t\t<div class=\"zoomContent\" :style=\"dynamic\">\r\n\t\t\t<slot></slot>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"frame\",\r\n\tprops: {\r\n\t\tallowZoom: {\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tzoomMax: {\r\n\t\t\tdefault: 1000\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\tdefault: {}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst parentResizeListener: any = null;\r\n\t\tconst childResizeListener: any = null;\r\n\t\treturn {\r\n\t\t\tparentResizeListener,\r\n\t\t\tchildResizeListener,\r\n\t\t\tparentWidth: 100,\r\n\t\t\tparentHeight: 100,\r\n\t\t\tchildWidth: 100,\r\n\t\t\tchildHeight: 100\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tconst child = this.$el.firstChild;\r\n\t\tconst parent = this.$el;\r\n\t\tthis.getActualWidth(parent, child);\r\n\t\t// @ts-ignore\r\n\t\tthis.childResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(child);\r\n\t\t// @ts-ignore\r\n\t\tthis.parentResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(parent);\r\n\t},\r\n\tcomputed: {\r\n\t\tdynamic(): any {\r\n\t\t\tif (this.allowZoom) {\r\n\t\t\t\tconst xZoom = this.childWidth / this.parentWidth;\r\n\t\t\t\tconst yZoom = this.childHeight / this.parentHeight;\r\n\t\t\t\tlet zoom = 0.9 / Math.max(xZoom, yZoom);\r\n\t\t\t\t// console.log(zoom)\r\n\t\t\t\tif (zoom > this.zoomMax) {\r\n\t\t\t\t\tzoom = this.zoomMax;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translateX(-50%) translateY(-50%) scaleX(${zoom}) scaleY(${zoom})`\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform:\r\n\t\t\t\t\t\t\"translateX(-50%) translateY(-50%) scaleX(1) scaleY(1)\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetActualWidth(parent: any, child: any) {\r\n\t\t\tthis.parentWidth = parent.getBoundingClientRect().width;\r\n\t\t\tthis.parentHeight = parent.getBoundingClientRect().height;\r\n\t\t\tthis.childWidth = child.offsetWidth;\r\n\t\t\tthis.childHeight = child.offsetHeight;\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.zoomFrame {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\toverflow: hidden;\r\n\t.zoomContent {\r\n\t\tposition: absolute;\r\n\t\ttransition: all 0.15s;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateX(-50%) translateY(-50%);\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"frame\",\r\n\tprops: {\r\n\t\tallowZoom: {\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tzoomMax: {\r\n\t\t\tdefault: 1000\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\tdefault: {}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst parentResizeListener: any = null;\r\n\t\tconst childResizeListener: any = null;\r\n\t\treturn {\r\n\t\t\tparentResizeListener,\r\n\t\t\tchildResizeListener,\r\n\t\t\tparentWidth: 100,\r\n\t\t\tparentHeight: 100,\r\n\t\t\tchildWidth: 100,\r\n\t\t\tchildHeight: 100\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tconst child = this.$el.firstChild;\r\n\t\tconst parent = this.$el;\r\n\t\tthis.getActualWidth(parent, child);\r\n\t\t// @ts-ignore\r\n\t\tthis.childResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(child);\r\n\t\t// @ts-ignore\r\n\t\tthis.parentResizeListener = new ResizeObserver(() => {\r\n\t\t\tthis.getActualWidth(parent, child);\r\n\t\t}).observe(parent);\r\n\t},\r\n\tcomputed: {\r\n\t\tdynamic(): any {\r\n\t\t\tif (this.allowZoom) {\r\n\t\t\t\tconst xZoom = this.childWidth / this.parentWidth;\r\n\t\t\t\tconst yZoom = this.childHeight / this.parentHeight;\r\n\t\t\t\tlet zoom = 0.9 / Math.max(xZoom, yZoom);\r\n\t\t\t\t// console.log(zoom)\r\n\t\t\t\tif (zoom > this.zoomMax) {\r\n\t\t\t\t\tzoom = this.zoomMax;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translateX(-50%) translateY(-50%) scaleX(${zoom}) scaleY(${zoom})`\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform:\r\n\t\t\t\t\t\t\"translateX(-50%) translateY(-50%) scaleX(1) scaleY(1)\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetActualWidth(parent: any, child: any) {\r\n\t\t\tthis.parentWidth = parent.getBoundingClientRect().width;\r\n\t\t\tthis.parentHeight = parent.getBoundingClientRect().height;\r\n\t\t\tthis.childWidth = child.offsetWidth;\r\n\t\t\tthis.childHeight = child.offsetHeight;\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./zoomFrame.vue?vue&type=template&id=99b91f76&scoped=true\"\nimport script from \"./zoomFrame.vue?vue&type=script&lang=ts\"\nexport * from \"./zoomFrame.vue?vue&type=script&lang=ts\"\n\nimport \"./zoomFrame.vue?vue&type=style&index=0&id=99b91f76&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-99b91f76\"\n\nexport default script","<template>\r\n\t<div>\r\n\t\t<el-tabs class=\"tabs\" v-model=\"activeTo\">\r\n\t\t\t<el-tab-pane label=\"功能\" name=\"first\" />\r\n\t\t\t<el-tab-pane label=\"样式编辑器\" name=\"second\" />\r\n\t\t</el-tabs>\r\n\t\t<div style=\"height:504px\">\r\n\t\t\t<component :is=\"components[activeTo]\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, markRaw } from \"vue\";\r\nimport styleConfig from \"./style/index.vue\";\r\nimport superChatConfig from \"./config/index.vue\";\r\nexport default defineComponent({\r\n\tname: \"superChat\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcomponents: {\r\n\t\t\t\tfirst: markRaw(superChatConfig),\r\n\t\t\t\tsecond: markRaw(styleConfig)\r\n\t\t\t},\r\n\t\t\tactiveTo: \"first\"\r\n\t\t};\r\n\t}\r\n});\r\n</script>\r\n<style scoped lang='scss'>\r\n.tabs {\r\n\tposition: absolute;\r\n\ttop: -62px;\r\n\tright: 0px;\r\n\twidth: calc(100% - 50px);\r\n\t:deep .el-tabs__nav.is-top {\r\n\t\tfloat: right;\r\n\t}\r\n\t:deep .el-tabs__item {\r\n\t\tbox-shadow: none !important;\r\n\t}\r\n\t:deep .el-tabs__content {\r\n\t\tdisplay: none;\r\n\t}\r\n}\r\n</style>\r\n","<template>\r\n\t<content-frame align=\"column\" class=\"danmaku-setting\">\r\n\t\t<row-frame :flex=\"true\" style=\"margin-bottom:0px\">\r\n\t\t\t<row-span :span=\"12\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"胶囊预览\">\r\n\t\t\t\t\t<zoom-frame :allow-zoom=\"true\" class=\"zoom-frame\" style=\"height:50px\">\r\n\t\t\t\t\t\t<list-block v-if=\"theme\" :scBlock=\"block\" />\r\n\t\t\t\t\t</zoom-frame>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t\t<row-span :span=\"12\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"面板预览\">\r\n\t\t\t\t\t<zoom-frame :allow-zoom=\"false\" class=\"zoom-frame\" style=\"height:150px\">\r\n\t\t\t\t\t\t<list-panel v-if=\"theme\" :configMode=\"true\" :scBlock=\"block\" />\r\n\t\t\t\t\t</zoom-frame>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t\t<row-frame style=\"height:100%\" :flex=\"true\">\r\n\t\t\t<row-span :span=\"10\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"选择主题编辑\">\r\n\t\t\t\t\t<el-select v-model=\"themeID\" @change=\"selectTheme\" size=\"mini\">\r\n\t\t\t\t\t\t<el-option key=\"0\" label=\"默认\" :value=\"0\" />\r\n\t\t\t\t\t\t<el-option class=\"option\" v-for=\"theme in themes\" :key=\"theme.id\" :label=\"theme.label\" :value=\"theme.id\">\r\n\t\t\t\t\t\t\t<span class=\"label\">{{ theme.label }}</span>\r\n\t\t\t\t\t\t\t<span @click.stop.prevent=\"remove(theme)\" class=\"closeBtn el-icon-circle-close\" />\r\n\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t\t<row-span :span=\"2\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\" \">\r\n\t\t\t\t\t<el-dropdown @command=\"saveCommand\" type=\"primary\" trigger=\"click\" style=\"line-height:28px\" max-height=\"200px\">\r\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" :disabled=\"!theme\">\r\n\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t\t\t<el-dropdown-menu>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"save\">保存</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"saveAs\">存为新主题</el-dropdown-item>\r\n\t\t\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-dropdown>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t\t<div class=\"hint\">纯色背景和动态背景任选其一，动态背景请根据机器性能谨慎选择</div>\r\n\t\t\t<row-span :span=\"12\">\r\n\t\t\t\t<row-frame width=\"100%\" title=\"选项\">\r\n\t\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t\t<vue-form :form-footer=\"{show:false}\" v-model=\"theme\" v-if=\"theme\" :schema=\"rule\" />\r\n\t\t\t\t\t\t<div style=\"position:absolute;left:50%;top:50%;transform:translateX(-50%)\" v-else>上方选择主题以编辑</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</row-frame>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t</content-frame>\r\n\t<el-dialog title=\"新建主题\" v-model=\"saveAsDialog\" :show-close=\"false\" :close-on-click-modal=\"false\">\r\n\t\t主题名称：\r\n\t\t<el-input size=\"mini\" v-model=\"newName\" />\r\n\t\t<template #footer>\r\n\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t<el-button size=\"mini\" @click=\"saveAsDialog = false;newName='新主题'\">取消</el-button>\r\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"saveThemeAs\">好的</el-button>\r\n\t\t\t</span>\r\n\t\t</template>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport zoomFrame from \"@front/util_component/frames/zoomFrame.vue\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { defineComponent } from \"vue\";\r\nimport { randomId } from \"@front/util_function/base\";\r\nimport { getPaidGift } from \"@front/views/danmakuSetting/mock\";\r\nimport { scFromDanmaku } from \"@front/components/superChat/utils/getter\";\r\nimport VueForm from \"@lljj/vue3-form-element\";\r\nimport rule from \"@front/views/superChat/style/form\";\r\nimport listBlock from \"@front/components/superChat/listBlock.vue\";\r\nimport listPanel from \"@front/components/superChat/listPanel.vue\";\r\nimport { loadSuperChat, saveSuperChat } from \"@front/util_function/system\";\r\nimport defaultTheme from \"./default\";\r\nimport { ElMessage } from \"element-plus\";\r\nexport default defineComponent({\r\n\tname: \"superChatStyleConfig\",\r\n\tcomponents: { zoomFrame, VueForm, listBlock, listPanel },\r\n\tdata() {\r\n\t\tconst themes: any = [];\r\n\t\tconst theme: any = \"\";\r\n\t\treturn {\r\n\t\t\trule: rule(),\r\n\t\t\ttheme,\r\n\t\t\tthemes,\r\n\t\t\tthemeID: \"\",\r\n\t\t\tnewName: \"新主题\",\r\n\t\t\tsaveAsDialog: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tdefaultTheme,\r\n\t\tblock(): any {\r\n\t\t\tif (!this.theme) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst danmaku = getPaidGift();\r\n\t\t\treturn scFromDanmaku(danmaku, {\r\n\t\t\t\trule: {\r\n\t\t\t\t\ttriggerValue: 0,\r\n\t\t\t\t\tlistDuration: 1000,\r\n\t\t\t\t\ttheme: this.theme,\r\n\t\t\t\t\tthemeID: this.themeID\r\n\t\t\t\t},\r\n\t\t\t\tnextLevel: 10000\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getTheme();\r\n\t},\r\n\tmethods: {\r\n\t\tremove(theme: any) {\r\n\t\t\tconst id = theme.id;\r\n\t\t\tif (this.themeID === id) {\r\n\t\t\t\tthis.themeID = this.theme = \"\";\r\n\t\t\t}\r\n\t\t\tthis.themes = this.themes.filter((them: any) => them !== theme);\r\n\t\t\tsaveSuperChat({\r\n\t\t\t\tlist: this.themes\r\n\t\t\t});\r\n\t\t\tElMessage({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\toffset: 60,\r\n\t\t\t\tmessage: \"删除成功！\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveCommand(command: string) {\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase \"save\":\r\n\t\t\t\t\tthis.saveTheme();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"saveAs\":\r\n\t\t\t\t\tthis.saveAsDialog = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectTheme(value: any) {\r\n\t\t\tif (value === 0) {\r\n\t\t\t\tthis.theme = defaultTheme();\r\n\t\t\t} else {\r\n\t\t\t\tconst theme = this.themes.find(\r\n\t\t\t\t\t(theme: any) => theme.id === value\r\n\t\t\t\t);\r\n\t\t\t\tif (theme) {\r\n\t\t\t\t\tthis.theme = cloneDeep(theme.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsaveTheme() {\r\n\t\t\tconst theme = this.themes.find(\r\n\t\t\t\t(theme: any) => theme.id === this.themeID\r\n\t\t\t);\r\n\t\t\tif (theme) {\r\n\t\t\t\tObject.assign(theme.value, this.theme);\r\n\t\t\t\tsaveSuperChat({\r\n\t\t\t\t\tlist: this.themes\r\n\t\t\t\t});\r\n\t\t\t\tconst rules = this.$store.state.danmakuProfile.common?.superChat\r\n\t\t\t\t\t?.rules;\r\n\t\t\t\tif (rules) {\r\n\t\t\t\t\trules.forEach((rule: any) => {\r\n\t\t\t\t\t\tif (rule.themeID === this.themeID) {\r\n\t\t\t\t\t\t\trule.theme = cloneDeep(this.theme);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.saveThemeAs();\r\n\t\t\t}\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\toffset: 60,\r\n\t\t\t\tmessage: \"保存成功！\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveThemeAs() {\r\n\t\t\tconst id = randomId(6);\r\n\t\t\tthis.themes.unshift({\r\n\t\t\t\tid,\r\n\t\t\t\tlabel: this.newName,\r\n\t\t\t\tvalue: cloneDeep(this.theme)\r\n\t\t\t});\r\n\t\t\tsaveSuperChat({\r\n\t\t\t\tlist: this.themes\r\n\t\t\t});\r\n\t\t\tthis.newName = \"新主题\";\r\n\t\t\tElMessage({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\toffset: 60,\r\n\t\t\t\tmessage: \"另存为成功！\"\r\n\t\t\t});\r\n\t\t\tthis.themeID = id;\r\n\t\t\tthis.theme = cloneDeep(this.theme);\r\n\t\t\tthis.saveAsDialog = false;\r\n\t\t},\r\n\t\tgetTheme() {\r\n\t\t\tloadSuperChat()\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.themes = res.list;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\tthis.themes = [];\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n@import \"@front/styles/scrollbar.scss\";\r\n@import \"@front/styles/backgrounds.scss\";\r\n.content {\r\n\theight: calc(100vh - 350px);\r\n\t@include scrollbarDark();\r\n}\r\n.zoom-frame {\r\n\twidth: 100%;\r\n\theight: 60px;\r\n\tposition: relative;\r\n\tz-index: 2;\r\n\tbackground-color: black;\r\n\t&::before {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-image: url($gird);\r\n\t\topacity: var(--brightness);\r\n\t}\r\n}\r\n.option {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\t&:hover .closeBtn {\r\n\t\tdisplay: inherit;\r\n\t}\r\n\t.closeBtn {\r\n\t\tcolor: $--color-text-secondary;\r\n\t\tdisplay: none;\r\n\t\tcursor: pointer;\r\n\t\t&:hover {\r\n\t\t\tcolor: $--color-text-primary;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import {\r\n\tcolorF,\r\n\tintegerF,\r\n\tselectF,\r\n\tstringF,\r\n\tnumberF,\r\n\tbackgroundImageF,\r\n\tfontF\r\n} from \"@front/components/danmakuFlow/utils/form\";\r\nimport {\r\n\tbackgroundType,\r\n\tbackgroundPosition,\r\n\tfontWeight,\r\n\tbackgroundSizeType\r\n} from \"@front/datas/styleOptions\";\r\nimport { backgroundArray } from \"@front/components/superChat/backgrounds\";\r\nexport default () => {\r\n\treturn {\r\n\t\ttype: \"object\",\r\n\t\tproperties: {\r\n\t\t\tconfig: {\r\n\t\t\t\ttype: \"object\",\r\n\t\t\t\ttitle: \"基础配置\",\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\ttext: stringF(\"初始文字\", \"100%\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: \"object\",\r\n\t\t\t\ttitle: \"背景设置\",\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tbackgroundType: selectF(\r\n\t\t\t\t\t\t\"背景类型\",\r\n\t\t\t\t\t\tbackgroundType(),\r\n\t\t\t\t\t\t\"50%\"\r\n\t\t\t\t\t),\r\n\t\t\t\t\tbackgroundColor: {\r\n\t\t\t\t\t\t\"ui:hidden\": \"{{parentFormData.backgroundType !== 0}}\",\r\n\t\t\t\t\t\t...colorF(\"背景颜色\", \"25%\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbackgroundDynamic: {\r\n\t\t\t\t\t\t\"ui:hidden\": \"{{parentFormData.backgroundType !== 1}}\",\r\n\t\t\t\t\t\t...selectF(\"动态背景选择\", backgroundArray, \"50%\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbackgroundImage: backgroundImageF(\"背景图片\"),\r\n\t\t\t\t\tbackgroundSizeType: selectF(\r\n\t\t\t\t\t\t\"背景图片填充\",\r\n\t\t\t\t\t\tbackgroundSizeType(),\r\n\t\t\t\t\t\t\"50%\"\r\n\t\t\t\t\t),\r\n\t\t\t\t\tbackgroundSize: {\r\n\t\t\t\t\t\t\"ui:hidden\":\r\n\t\t\t\t\t\t\t\"{{parentFormData.backgroundSizeType !== 0}}\",\r\n\t\t\t\t\t\t...integerF(\"背景尺寸\", \"25%\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbackgroundPosition: selectF(\r\n\t\t\t\t\t\t\"图片位置\",\r\n\t\t\t\t\t\tbackgroundPosition(),\r\n\t\t\t\t\t\t\"25%\"\r\n\t\t\t\t\t),\r\n\t\t\t\t\tbackgroundOpacity: integerF(\"图片透明度\", \"50%\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlistStyle: {\r\n\t\t\t\ttype: \"object\",\r\n\t\t\t\ttitle: \"胶囊设置\",\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tfont: fontF(\"字体\", \"50%\"),\r\n\t\t\t\t\tfontSize: integerF(\"字号\", \"25%\"),\r\n\t\t\t\t\tfontWeight: selectF(\"字粗\", fontWeight(), \"25%\"),\r\n\t\t\t\t\tcolor: colorF(\"颜色\", \"25%\"),\r\n\t\t\t\t\ttextShadowWidth: numberF(\"文字轮廓\", \"25%\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpanelStyle: {\r\n\t\t\t\ttype: \"object\",\r\n\t\t\t\ttitle: \"面板设置\",\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tfont: fontF(\"字体\", \"50%\"),\r\n\t\t\t\t\tfontSize: integerF(\"字号\", \"25%\"),\r\n\t\t\t\t\tfontWeight: selectF(\"字粗\", fontWeight(), \"25%\"),\r\n\t\t\t\t\tcolor: colorF(\"颜色\", \"25%\"),\r\n\t\t\t\t\ttextShadowWidth: numberF(\"文字轮廓\", \"25%\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","export default () => {\r\n\treturn {\r\n\t\tconfig: {\r\n\t\t\ttext: \"我永远单推主播！\"\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tbackgroundType: 0,\r\n\t\t\tbackgroundColor: \"rgba(16,128,185,1)\",\r\n\t\t\tbackgroundImage: \"\",\r\n\t\t\tbackgroundSize: 100,\r\n\t\t\tbackgroundPosition: \"center\",\r\n\t\t\tbackgroundDynamic: \"default\",\r\n\t\t\tbackgroundSizeType: 0,\r\n\t\t\tbackgroundOpacity: 100\r\n\t\t},\r\n\t\tlistStyle: {\r\n\t\t\tfont: \"/fonts/站酷快乐体.ttf\",\r\n\t\t\tfontSize: 14,\r\n\t\t\tfontWeight: \"bolder\",\r\n\t\t\tcolor: \"rgba(255, 255, 255, 1)\",\r\n\t\t\ttextShadowWidth: 0.6,\r\n\t\t\ttextShadowColor: \"#000\"\r\n\t\t},\r\n\t\tpanelStyle: {\r\n\t\t\tfont: \"/fonts/极影毁片圆.ttf\",\r\n\t\t\tfontSize: 14,\r\n\t\t\tfontWeight: \"lighter\",\r\n\t\t\tcolor: \"rgba(255, 255, 255, 1)\",\r\n\t\t\ttextShadowWidth: 0.6,\r\n\t\t\ttextShadowColor: \"#000\"\r\n\t\t}\r\n\t};\r\n};\r\n","\r\nimport zoomFrame from \"@front/util_component/frames/zoomFrame.vue\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { defineComponent } from \"vue\";\r\nimport { randomId } from \"@front/util_function/base\";\r\nimport { getPaidGift } from \"@front/views/danmakuSetting/mock\";\r\nimport { scFromDanmaku } from \"@front/components/superChat/utils/getter\";\r\nimport VueForm from \"@lljj/vue3-form-element\";\r\nimport rule from \"@front/views/superChat/style/form\";\r\nimport listBlock from \"@front/components/superChat/listBlock.vue\";\r\nimport listPanel from \"@front/components/superChat/listPanel.vue\";\r\nimport { loadSuperChat, saveSuperChat } from \"@front/util_function/system\";\r\nimport defaultTheme from \"./default\";\r\nimport { ElMessage } from \"element-plus\";\r\nexport default defineComponent({\r\n\tname: \"superChatStyleConfig\",\r\n\tcomponents: { zoomFrame, VueForm, listBlock, listPanel },\r\n\tdata() {\r\n\t\tconst themes: any = [];\r\n\t\tconst theme: any = \"\";\r\n\t\treturn {\r\n\t\t\trule: rule(),\r\n\t\t\ttheme,\r\n\t\t\tthemes,\r\n\t\t\tthemeID: \"\",\r\n\t\t\tnewName: \"新主题\",\r\n\t\t\tsaveAsDialog: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tdefaultTheme,\r\n\t\tblock(): any {\r\n\t\t\tif (!this.theme) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst danmaku = getPaidGift();\r\n\t\t\treturn scFromDanmaku(danmaku, {\r\n\t\t\t\trule: {\r\n\t\t\t\t\ttriggerValue: 0,\r\n\t\t\t\t\tlistDuration: 1000,\r\n\t\t\t\t\ttheme: this.theme,\r\n\t\t\t\t\tthemeID: this.themeID\r\n\t\t\t\t},\r\n\t\t\t\tnextLevel: 10000\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getTheme();\r\n\t},\r\n\tmethods: {\r\n\t\tremove(theme: any) {\r\n\t\t\tconst id = theme.id;\r\n\t\t\tif (this.themeID === id) {\r\n\t\t\t\tthis.themeID = this.theme = \"\";\r\n\t\t\t}\r\n\t\t\tthis.themes = this.themes.filter((them: any) => them !== theme);\r\n\t\t\tsaveSuperChat({\r\n\t\t\t\tlist: this.themes\r\n\t\t\t});\r\n\t\t\tElMessage({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\toffset: 60,\r\n\t\t\t\tmessage: \"删除成功！\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveCommand(command: string) {\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase \"save\":\r\n\t\t\t\t\tthis.saveTheme();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"saveAs\":\r\n\t\t\t\t\tthis.saveAsDialog = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectTheme(value: any) {\r\n\t\t\tif (value === 0) {\r\n\t\t\t\tthis.theme = defaultTheme();\r\n\t\t\t} else {\r\n\t\t\t\tconst theme = this.themes.find(\r\n\t\t\t\t\t(theme: any) => theme.id === value\r\n\t\t\t\t);\r\n\t\t\t\tif (theme) {\r\n\t\t\t\t\tthis.theme = cloneDeep(theme.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsaveTheme() {\r\n\t\t\tconst theme = this.themes.find(\r\n\t\t\t\t(theme: any) => theme.id === this.themeID\r\n\t\t\t);\r\n\t\t\tif (theme) {\r\n\t\t\t\tObject.assign(theme.value, this.theme);\r\n\t\t\t\tsaveSuperChat({\r\n\t\t\t\t\tlist: this.themes\r\n\t\t\t\t});\r\n\t\t\t\tconst rules = this.$store.state.danmakuProfile.common?.superChat\r\n\t\t\t\t\t?.rules;\r\n\t\t\t\tif (rules) {\r\n\t\t\t\t\trules.forEach((rule: any) => {\r\n\t\t\t\t\t\tif (rule.themeID === this.themeID) {\r\n\t\t\t\t\t\t\trule.theme = cloneDeep(this.theme);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.saveThemeAs();\r\n\t\t\t}\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\toffset: 60,\r\n\t\t\t\tmessage: \"保存成功！\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveThemeAs() {\r\n\t\t\tconst id = randomId(6);\r\n\t\t\tthis.themes.unshift({\r\n\t\t\t\tid,\r\n\t\t\t\tlabel: this.newName,\r\n\t\t\t\tvalue: cloneDeep(this.theme)\r\n\t\t\t});\r\n\t\t\tsaveSuperChat({\r\n\t\t\t\tlist: this.themes\r\n\t\t\t});\r\n\t\t\tthis.newName = \"新主题\";\r\n\t\t\tElMessage({\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\toffset: 60,\r\n\t\t\t\tmessage: \"另存为成功！\"\r\n\t\t\t});\r\n\t\t\tthis.themeID = id;\r\n\t\t\tthis.theme = cloneDeep(this.theme);\r\n\t\t\tthis.saveAsDialog = false;\r\n\t\t},\r\n\t\tgetTheme() {\r\n\t\t\tloadSuperChat()\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.themes = res.list;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\tthis.themes = [];\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=463d263b&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=463d263b&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-463d263b\"\n\nexport default script","<template>\r\n\t<content-frame id=\"superChat\" align=\"row\">\r\n\t\t<div class=\"hint\">设置好规则以后，直播过程在主播端和观众端都会将符合规则的礼物及送礼人的最新弹幕置顶显示</div>\r\n\t\t<div class=\"hint\">晋级条件：显示还差多少打赏更换到下一个牌子(开启后到样式编辑器查看效果)</div>\r\n\t\t<row-frame title=\" \" style=\"width:100%\" :flex=\"true\">\r\n\t\t\t<row-span :span=\"1\">\r\n\t\t\t\t开启\r\n\t\t\t</row-span>\r\n\t\t\t<row-span :span=\"1\">\r\n\t\t\t\t<el-switch v-model=\"superChat.enable\" />\r\n\t\t\t</row-span>\r\n\t\t\t<template v-if=\"superChat.enable\">\r\n\t\t\t\t<row-span :span=\"1.5\">\r\n\t\t\t\t\t观众端开启\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"1\">\r\n\t\t\t\t\t<el-switch v-model=\"superChat.webEnable\" />\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"1.8\">\r\n\t\t\t\t\t显示晋级条件\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"1\">\r\n\t\t\t\t\t<el-switch v-model=\"superChat.showNextLevel\" />\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"1\">\r\n\t\t\t\t\t单位\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"1.7\">\r\n\t\t\t\t\t<el-select style=\"margin-top:-8px\" size=\"mini\" v-model=\"superChat.displayType\">\r\n\t\t\t\t\t\t<el-option v-for=\"(item,index) in displayType\" :key=\"index\" :label=\"item.label\" :value=\"item.value\" />\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span style=\"text-align:right;\" :span=\"1\">\r\n\t\t\t\t\t<el-button size=\"mini\" style=\"margin-top:-8px\" type=\"primary\" @click=\"sort\">排序</el-button>\r\n\t\t\t\t</row-span>\r\n\t\t\t</template>\r\n\t\t\t<row-span style=\"text-align:right;\" :span=\"1\">\r\n\t\t\t\t<el-button size=\"mini\" style=\"margin-top:-8px\" type=\"primary\" @click=\"save\">保存</el-button>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t\t<row-frame v-show=\"superChat.enable\" title=\"规则配置\" style=\"width:100%\" :flex=\"true\">\r\n\t\t\t<rule v-model=\"superChat.rules\" />\r\n\t\t</row-frame>\r\n\t</content-frame>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { displayType } from \"./data\";\r\nimport { superChat } from \"@front/datas/danmaku\";\r\nimport { mapState } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport rule from \"./rules.vue\";\r\nexport default defineComponent({\r\n\tname: \"superChat\",\r\n\tcomponents: { rule },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsuperChat: superChat()\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"danmakuProfile\"]),\r\n\t\tdisplayType\r\n\t},\r\n\tmounted() {\r\n\t\tthis.superChat =\r\n\t\t\tcloneDeep(this.danmakuProfile.common.superChat) || superChat();\r\n\t},\r\n\tmethods: {\r\n\t\tsave() {\r\n\t\t\tif (!this.saveCheck()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.danmakuProfile.common.superChat = cloneDeep(this.superChat);\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t},\r\n\t\tsort() {\r\n\t\t\tthis.superChat.rules.sort((a: any, b: any) => {\r\n\t\t\t\treturn b.triggerValue - a.triggerValue;\r\n\t\t\t});\r\n\t\t\tthis.superChat.rules = [...this.superChat.rules];\r\n\t\t},\r\n\t\tsaveCheck() {\r\n\t\t\tthis.sort();\r\n\t\t\tlet previous: any = null;\r\n\t\t\tlet errmsg = \"\";\r\n\t\t\tthis.superChat.rules.forEach((rule: any) => {\r\n\t\t\t\tif (!previous) {\r\n\t\t\t\t\tprevious = rule;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (rule.triggerValue === previous.triggerValue) {\r\n\t\t\t\t\terrmsg = \"错误：存在多个金额相同的规则\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (rule.listDuration > previous.listDuration) {\r\n\t\t\t\t\terrmsg = \"错误：金额越大的规则持续时间应该越长\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (errmsg) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: errmsg,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn !errmsg;\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/scrollbar.scss\";\r\n#superChat {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\t@include scrollbarDark();\r\n}\r\n</style>\r\n","<template>\r\n\t<div class=\"super-chat-rule\">\r\n\t\t<div class=\"rule-block\" v-for=\"(rule,index) in rules\" :key=\"index\">\r\n\t\t\t<el-divider><span class=\"tips\">规则{{index+1}}</span></el-divider>\r\n\t\t\t<row-frame title=\"\" style=\"width:100%\" :flex=\"true\">\r\n\t\t\t\t<row-span :span=\"3\">\r\n\t\t\t\t\t<p>金额（AC币）</p>\r\n\t\t\t\t\t<div class=\"number-input\">\r\n\t\t\t\t\t\t>=\r\n\t\t\t\t\t\t<el-input-number :step=\"10\" :min=\"0\" size=\"mini\" v-model=\"rule.triggerValue\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"2\">\r\n\t\t\t\t\t<p>持续时间(秒)</p>\r\n\t\t\t\t\t<el-input-number size=\"mini\" :min=\"15\" :modelValue=\"rule.listDuration/1000\" @update:modelValue=\"rule.listDuration=$event*1000\" />\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span :span=\"3.5\">\r\n\t\t\t\t\t<p>选择主题</p>\r\n\t\t\t\t\t<el-select placeholder=\"请选择主题面板\" size=\"mini\" v-model=\"rule.themeID\" @change=\"applyTheme(rule,$event)\">\r\n\t\t\t\t\t\t<el-option label=\"默认\" value=\"0\" />\r\n\t\t\t\t\t\t<el-option v-for=\"theme in themes\" :key=\"theme.id\" :label=\"theme.label\" :value=\"theme.id\" />\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</row-span>\r\n\t\t\t\t<row-span style=\"text-align:right\" :span=\"3.5\">\r\n\t\t\t\t\t<p>&nbsp;</p>\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"remove(rule)\">删除</el-button>\r\n\t\t\t\t</row-span>\r\n\t\t\t</row-frame>\r\n\t\t</div>\r\n\t\t<el-button style=\"width:100%;text-align:center\" size=\"mini\" type=\"primary\" @click=\"add\">添加+</el-button>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport clone from \"lodash/clone\";\r\nimport { backgroundType } from \"./data\";\r\nimport { superChatBlockSetting } from \"@front/components/superChat/utils/data\";\r\nimport { loadSuperChat } from \"@front/util_function/system\";\r\nimport defaultTheme from \"./../style/default\";\r\nexport default defineComponent({\r\n\tname: \"superChatRule\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tthemes: []\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tdefaultTheme,\r\n\t\tbackgroundType,\r\n\t\trules: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.modelValue;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:modelValue\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getTheme();\r\n\t},\r\n\tmethods: {\r\n\t\tadd() {\r\n\t\t\tconst previous =\r\n\t\t\t\tclone(this.rules.slice(-1)[0]) || superChatBlockSetting();\r\n\t\t\tthis.rules.push({\r\n\t\t\t\t...previous,\r\n\t\t\t\ttriggerValue: previous.triggerValue + 1,\r\n\t\t\t\tlistDuration: previous.listDuration + 5000\r\n\t\t\t});\r\n\t\t},\r\n\t\tremove(rule: any) {\r\n\t\t\tthis.rules = this.rules.filter((rul: any) => rule !== rul);\r\n\t\t},\r\n\t\tgetTheme() {\r\n\t\t\tloadSuperChat()\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.themes = res.list;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.themes = [];\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tapplyTheme(rule: any, themeID: any) {\r\n\t\t\tif (themeID === \"0\") {\r\n\t\t\t\trule.theme = defaultTheme();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst theme: any = this.themes.find(\r\n\t\t\t\t(theme: any) => theme.id === themeID\r\n\t\t\t);\r\n\t\t\tif (theme) {\r\n\t\t\t\trule.theme = theme.value;\r\n\t\t\t} else {\r\n\t\t\t\trule.themeID = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.super-chat-rule {\r\n\twidth: 100%;\r\n\t.number-input {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t& > div {\r\n\t\t\tflex-grow: 1;\r\n\t\t\t:deep .el-input__inner {\r\n\t\t\t\twidth: 100% !important;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport clone from \"lodash/clone\";\r\nimport { backgroundType } from \"./data\";\r\nimport { superChatBlockSetting } from \"@front/components/superChat/utils/data\";\r\nimport { loadSuperChat } from \"@front/util_function/system\";\r\nimport defaultTheme from \"./../style/default\";\r\nexport default defineComponent({\r\n\tname: \"superChatRule\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tthemes: []\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tdefaultTheme,\r\n\t\tbackgroundType,\r\n\t\trules: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.modelValue;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:modelValue\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getTheme();\r\n\t},\r\n\tmethods: {\r\n\t\tadd() {\r\n\t\t\tconst previous =\r\n\t\t\t\tclone(this.rules.slice(-1)[0]) || superChatBlockSetting();\r\n\t\t\tthis.rules.push({\r\n\t\t\t\t...previous,\r\n\t\t\t\ttriggerValue: previous.triggerValue + 1,\r\n\t\t\t\tlistDuration: previous.listDuration + 5000\r\n\t\t\t});\r\n\t\t},\r\n\t\tremove(rule: any) {\r\n\t\t\tthis.rules = this.rules.filter((rul: any) => rule !== rul);\r\n\t\t},\r\n\t\tgetTheme() {\r\n\t\t\tloadSuperChat()\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.themes = res.list;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.themes = [];\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tapplyTheme(rule: any, themeID: any) {\r\n\t\t\tif (themeID === \"0\") {\r\n\t\t\t\trule.theme = defaultTheme();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst theme: any = this.themes.find(\r\n\t\t\t\t(theme: any) => theme.id === themeID\r\n\t\t\t);\r\n\t\t\tif (theme) {\r\n\t\t\t\trule.theme = theme.value;\r\n\t\t\t} else {\r\n\t\t\t\trule.themeID = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./rules.vue?vue&type=template&id=6c4f64e0&scoped=true\"\nimport script from \"./rules.vue?vue&type=script&lang=ts\"\nexport * from \"./rules.vue?vue&type=script&lang=ts\"\n\nimport \"./rules.vue?vue&type=style&index=0&id=6c4f64e0&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6c4f64e0\"\n\nexport default script","\r\nimport { defineComponent } from \"vue\";\r\nimport { displayType } from \"./data\";\r\nimport { superChat } from \"@front/datas/danmaku\";\r\nimport { mapState } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport rule from \"./rules.vue\";\r\nexport default defineComponent({\r\n\tname: \"superChat\",\r\n\tcomponents: { rule },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsuperChat: superChat()\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"danmakuProfile\"]),\r\n\t\tdisplayType\r\n\t},\r\n\tmounted() {\r\n\t\tthis.superChat =\r\n\t\t\tcloneDeep(this.danmakuProfile.common.superChat) || superChat();\r\n\t},\r\n\tmethods: {\r\n\t\tsave() {\r\n\t\t\tif (!this.saveCheck()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.danmakuProfile.common.superChat = cloneDeep(this.superChat);\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t},\r\n\t\tsort() {\r\n\t\t\tthis.superChat.rules.sort((a: any, b: any) => {\r\n\t\t\t\treturn b.triggerValue - a.triggerValue;\r\n\t\t\t});\r\n\t\t\tthis.superChat.rules = [...this.superChat.rules];\r\n\t\t},\r\n\t\tsaveCheck() {\r\n\t\t\tthis.sort();\r\n\t\t\tlet previous: any = null;\r\n\t\t\tlet errmsg = \"\";\r\n\t\t\tthis.superChat.rules.forEach((rule: any) => {\r\n\t\t\t\tif (!previous) {\r\n\t\t\t\t\tprevious = rule;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (rule.triggerValue === previous.triggerValue) {\r\n\t\t\t\t\terrmsg = \"错误：存在多个金额相同的规则\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (rule.listDuration > previous.listDuration) {\r\n\t\t\t\t\terrmsg = \"错误：金额越大的规则持续时间应该越长\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (errmsg) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: errmsg,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn !errmsg;\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=141013f4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=141013f4&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-141013f4\"\n\nexport default script","\r\nimport { defineComponent, markRaw } from \"vue\";\r\nimport styleConfig from \"./style/index.vue\";\r\nimport superChatConfig from \"./config/index.vue\";\r\nexport default defineComponent({\r\n\tname: \"superChat\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcomponents: {\r\n\t\t\t\tfirst: markRaw(superChatConfig),\r\n\t\t\t\tsecond: markRaw(styleConfig)\r\n\t\t\t},\r\n\t\t\tactiveTo: \"first\"\r\n\t\t};\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=00d4a3b9&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=00d4a3b9&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-00d4a3b9\"\n\nexport default script","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n"],"sourceRoot":""}