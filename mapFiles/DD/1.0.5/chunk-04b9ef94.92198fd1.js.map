{"version":3,"sources":["webpack:///./node_modules/node-gyp-build/index.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/constants.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/index.js","webpack:///./src/electron_browser/mixins/methods.ts","webpack:///./src/electron_browser/util_function/formatter.ts","webpack:///./node_modules/obs-websocket-js/dist/json.module.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/validation.js","webpack:///./node_modules/bufferutil/index.js","webpack:///./node_modules/utf-8-validate/fallback.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/event-target.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/receiver.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/stream.js","webpack:///./node_modules/obs-websocket-js/node_modules/crypto-js/enc-base64.js","webpack:///./node_modules/obs-websocket-js/node_modules/debug/src/browser.js","webpack:///./node_modules/obs-websocket-js/node_modules/crypto-js/sha256.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/buffer-util.js","webpack:///./node_modules/supports-color/index.js","webpack:///./src/electron_browser/views/roomMgmt/index.vue?f701","webpack:///./node_modules/obs-websocket-js/node_modules/debug/src/common.js","webpack:///./node_modules/bufferutil/fallback.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/websocket.js","webpack:///./node_modules/obs-websocket-js/node_modules/crypto-js/core.js","webpack:///./node_modules/eventemitter3/index.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/permessage-deflate.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/websocket-server.js","webpack:///./node_modules/isomorphic-ws/node.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/subprotocol.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/extension.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/limiter.js","webpack:///./node_modules/obs-websocket-js/node_modules/debug/src/node.js","webpack:///./node_modules/isomorphic-ws/node_modules/ws/lib/sender.js","webpack:///./node_modules/obs-websocket-js/node_modules/debug/src/index.js","webpack:///./node_modules/supports-color/node_modules/has-flag/index.js","webpack:///./src/electron_browser/views/roomMgmt/index.vue","webpack:///./src/electron_browser/util_function/obs.ts","webpack:///./src/electron_browser/views/roomMgmt/index.vue?c3b4","webpack:///./src/electron_browser/views/roomMgmt/index.vue?5590","webpack:///./node_modules/utf-8-validate/index.js"],"names":["fs","path","os","runtimeRequire","vars","process","config","variables","prebuildsOnly","PREBUILDS_ONLY","abi","versions","modules","runtime","isElectron","arch","platform","libc","LIBC","isAlpine","armv","ARM_VERSION","arm_version","uv","split","load","dir","readdirSync","err","getFirst","filter","files","join","matchBuild","name","test","parseTags","file","arr","extension","pop","tags","specificity","i","length","tag","napi","slice","matchTags","runtimeAgnostic","compareTags","a","b","electron","ELECTRON_RUN_AS_NODE","window","type","existsSync","module","exports","resolve","toUpperCase","replace","release","debug","prebuild","nearby","dirname","execPath","target","node","Boolean","Error","prebuilds","parsed","map","candidates","winner","sort","BINARY_TYPES","EMPTY_BUFFER","Buffer","alloc","GUID","kForOnEventAttribute","Symbol","kListener","kStatusCode","kWebSocket","NOOP","WebSocket","createWebSocketStream","Server","Receiver","Sender","WebSocketServer","closeStream","methods","title","showCancelButton","confirmButtonText","cancelButtonText","then","this","closeStreamConfirmed","statistic","$store","state","roomStatus","result","Object","keys","forEach","key","coinCount","diamondCount","duration","dispatch","roomProfile","liveID","unixTimeFormatter","timestamp","zeroPadding","n","hour","Math","floor","minute","second","String","thousandFormatter","count","unit","toFixed","hundrenFormatter","byteFormatter","byte","shift","WebSocketOpCode","EventSubscription","RequestBatchExecutionType","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","_extends","assign","bind","arguments","source","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","e","_construct","Parent","args","Class","push","Function","instance","_isNativeFunction","fn","toString","indexOf","_wrapNativeSuper","_cache","Map","undefined","TypeError","has","get","set","Wrapper","value","_objectWithoutPropertiesLoose","excluded","sourceKeys","authenticationHashing","salt","challenge","msg","hash","stringify","_excluded","_catch","body","recover","OBSWebSocketError","_Error","code","message","_this","BaseOBSWebSocket","_EventEmitter","_this2","_len","Array","_key","concat","_identified","internalListeners","socket","generateMessageId","requestCounter","_proto","connect","url","password","identificationParams","_temp3","connectionClosedPromise","_this4","internalEventPromise","connectionErrorPromise","Promise","race","createConnection","hello","emit","identify","reject","error","disconnect","_temp4","_this6","readyState","CLOSED","close","reidentify","data","_this8","identifiedPromise","Identified","Reidentify","requestType","requestData","_this10","requestId","responsePromise","Request","_ref","requestStatus","responseData","comment","cleanup","onopen","onmessage","onerror","onclose","removeAllListeners","_this12","connectionOpenedPromise","helloPromise","Hello","protocol","onOpen","onMessage","onError","onClose","_this12$socket","_ref2","authentication","rpcVersion","helloRest","_this14","Identify","identified","op","d","_this16","encodeMessage","encoded","send","event","_this18","once","_this20","decodeMessage","_ref3","Event","eventType","eventData","RequestResponse","reason","OBSWebSocket","_BaseOBSWebSocket","JSON","parse","s","m","h","w","y","str","match","exec","parseFloat","toLowerCase","fmtShort","ms","msAbs","abs","round","fmtLong","plural","isPlural","val","options","isFinite","long","tokenChars","isValidStatusCode","_isValidUTF8","buf","len","isValidUTF8","WS_NO_UTF_8_VALIDATE","__dirname","kCode","kData","kError","kMessage","kReason","kTarget","kType","kWasClean","CloseEvent","super","wasClean","ErrorEvent","MessageEvent","EventTarget","listener","wrapper","isBinary","_closeFrameReceived","_closeFrameSent","on","handler","listeners","removeListener","Writable","PerMessageDeflate","toArrayBuffer","unmask","GET_INFO","GET_PAYLOAD_LENGTH_16","GET_PAYLOAD_LENGTH_64","GET_MASK","GET_DATA","INFLATING","_binaryType","binaryType","_extensions","extensions","_isServer","isServer","_maxPayload","maxPayload","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_mask","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","chunk","encoding","cb","startLoop","dst","allocUnsafe","offset","Uint8Array","buffer","byteOffset","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","consume","RangeError","compressed","extensionName","haveLength","readUInt16BE","num","readUInt32BE","pow","controlMessage","decompress","dataMessage","perMessageDeflate","er","messageLength","fragments","end","ErrorCtor","prefix","statusCode","errorCode","captureStackTrace","Duplex","emitClose","stream","duplexOnEnd","destroyed","_writableState","finished","destroy","duplexOnError","listenerCount","ws","terminateOnDestroy","duplex","autoDestroy","objectMode","writableObjectMode","_readableState","pause","_destroy","callback","nextTick","called","terminate","_final","CONNECTING","_socket","endEmitted","_read","isPaused","resume","_write","root","factory","CryptoJS","C","C_lib","lib","WordArray","C_enc","enc","Base64","wordArray","words","sigBytes","_map","clamp","base64Chars","byte1","byte2","byte3","triplet","j","charAt","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","charCodeAt","paddingIndex","parseLoop","nBytes","bits1","bits2","bitsCombined","useColors","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","formatArgs","namespace","humanize","diff","c","color","splice","index","lastC","save","namespaces","storage","setItem","removeItem","r","getItem","DEBUG","localstorage","localStorage","warned","warn","colors","log","formatters","v","Hasher","C_algo","algo","H","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","W","SHA256","extend","_doReset","_hash","init","_doProcessBlock","M","f","g","gamma0x","gamma0","gamma1x","gamma1","ch","maj","sigma0","sigma1","t1","t2","_doFinalize","_data","dataWords","nBitsTotal","_nDataBytes","nBitsLeft","_process","clone","_createHelper","HmacSHA256","_createHmacHelper","list","totalLength","mask","output","_unmask","byteLength","toBuffer","readOnly","isBuffer","ArrayBuffer","from","isView","WS_NO_BUFFER_UTIL","bufferUtil","tty","hasFlag","env","forceColor","translateLevel","level","hasBasic","has256","has16m","supportsColor","haveStream","streamIsTTY","min","TERM","osRelease","Number","some","sign","CI_NAME","TEAMCITY_VERSION","COLORTERM","version","TERM_PROGRAM_VERSION","TERM_PROGRAM","getSupportLevel","isTTY","FORCE_COLOR","stdout","isatty","stderr","setup","selectColor","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Date","prev","coerce","unshift","format","formatter","logFn","delimiter","newDebug","enable","names","skips","substr","disable","toNamespace","regexp","substring","stack","default","EventEmitter","https","http","net","tls","randomBytes","createHash","Readable","URL","addEventListener","removeEventListener","closeTimeout","kAborted","protocolVersions","readyStates","subprotocolRegex","address","protocols","_closeCode","_closeMessage","_closeTimer","_paused","_protocol","_readyState","_receiver","_sender","_bufferedAmount","_redirects","isArray","initAsClient","includes","_url","head","receiver","generateMask","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setTimeout","setNoDelay","socketOnClose","socketOnData","socketOnEnd","socketOnError","OPEN","abortHandshake","_req","CLOSING","errorEmitted","ping","sendAfterClose","pong","needDrain","opts","binary","compress","fin","websocket","protocolVersion","followRedirects","maxRedirects","socketPath","hostname","timeout","method","host","port","parsedUrl","href","SyntaxError","isSecure","isUnixSocket","invalidURLMessage","pathname","emitErrorAndClose","defaultPort","request","protocolSet","Set","req","tlsConnect","netConnect","startsWith","headers","Connection","Upgrade","search","handshakeTimeout","offer","add","origin","Origin","username","auth","parts","_originalUnixSocket","_originalSecure","_originalHostOrSocketPath","entries","isSameHost","authorization","cookie","res","location","addr","abort","upgrade","digest","update","serverProt","protError","size","secWebSocketExtensions","extensionNames","accept","setSocket","servername","isIP","setHeader","receiverOnFinish","read","write","clearTimeout","property","crypto","globalThis","msCrypto","global","cryptoSecureRandomInt","getRandomValues","Uint32Array","readInt32LE","F","obj","subtype","Base","overrides","mixIn","$super","properties","propertyName","encoder","Hex","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","ceil","random","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","fromCharCode","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_append","doFlush","processedWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","max","_minBufferSize","nWordsReady","nBytesReady","cfg","messageUpdate","finalize","hasher","HMAC","Events","EE","context","addListener","emitter","evt","_events","_eventsCount","clearEvent","eventNames","events","getOwnPropertySymbols","handlers","l","ee","a1","a2","a3","a4","a5","off","prefixed","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","zlibLimiter","_options","_threshold","threshold","_deflate","_inflate","params","concurrency","concurrencyLimit","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","configurations","normalizeParams","acceptAsServer","acceptAsClient","offers","accepted","find","response","isInteger","done","_decompress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","inflateOnError","inflateOnData","flush","createDeflateRaw","zlibDeflateOptions","deflateOnData","Z_SYNC_FLUSH","subprotocol","keyRegex","RUNNING","handleProtocols","clientTracking","verifyClient","noServer","backlog","server","_server","createServer","STATUS_CODES","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","handleUpgrade","clients","_shouldEmitClose","abortHandshakeOrEmitwsClientError","shouldHandle","secWebSocketProtocol","info","secure","authorized","encrypted","verified","completeUpgrade","readable","values","next","delete","header","start","dest","elem","paramName","mustUnescape","isEscaping","inQuotes","token","k","kDone","kRun","pending","Infinity","jobs","job","util","deprecate","inspectOpts","fd","colorCode","getDate","hideDate","toISOString","reduce","prop","_","inspect","trim","O","randomFillSync","applyMask","kByteLength","maskBuffer","_generateMask","_maskBuffer","_firstFragment","_deflating","_queue","dataLength","merge","skipMasking","payloadLength","opcode","rsv1","writeUInt16BE","writeUIntBE","enqueue","sendFrame","frame","dequeue","cork","uncork","browser","flag","argv","position","terminatorPosition","class","id","element-loading-text","flex","span","model-value","danmakuStream","append","copy","loading","OBS","obs","catch","requestName","settings","mixins","liveType","categoryID","subCategoryID","timer","obsSync","canCut","magicScreen","computed","liveCover","userSession","userID","categoryValue","category","roomCategorys","roomCategory","commit","loadCache","getCutStatus","openStream","setInterval","saveCache","clearInterval","finally","img","cache","coverFile","generateUrl","validation","status","checkStatus","streaming","stopStream","setStreamSettings","streamSession","rtmpServer","streamKey","startStream","readyToStream","streamEncodec","resolution","streamName","portrait","panoramic","errmsg","render","__scopeId"],"mappings":"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","file":"js/chunk-04b9ef94.92198fd1.js","sourcesContent":["var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    (process.versions && process.versions.electron) ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', platform + '-' + arch)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","import { ComponentOptionsMixin } from \"vue\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport {\r\n\tunixTimeFormatter,\r\n\tthousandFormatter\r\n} from \"@front/util_function/formatter\";\r\nimport OBS from \"@front/util_function/obs\";\r\nexport const closeStream: ComponentOptionsMixin = {\r\n\tmethods: {\r\n\t\tcloseStream() {\r\n\t\t\tElMessageBox({\r\n\t\t\t\ttitle: \"确认退出？\",\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonText: \"确定\",\r\n\t\t\t\tcancelButtonText: \"取消\"\r\n\t\t\t}).then(this.closeStreamConfirmed);\r\n\t\t},\r\n\t\tasync closeStreamConfirmed() {\r\n\t\t\tconst { statistic } = this.$store.state.roomStatus;\r\n\t\t\tconst result: any = {};\r\n\t\t\tObject.keys(statistic).forEach(key => {\r\n\t\t\t\tresult[key] = thousandFormatter(statistic[key]);\r\n\t\t\t});\r\n\t\t\tresult.coinCount = thousandFormatter(statistic.diamondCount / 100);\r\n\t\t\tresult.duration = unixTimeFormatter(statistic.duration);\r\n\t\t\tthis.$store.dispatch(\r\n\t\t\t\t\"closeStream\",\r\n\t\t\t\tthis.$store.state.roomProfile.liveID\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n};\r\n","export const unixTimeFormatter = (timestamp: number) => {\r\n\tconst zeroPadding = (n: string) => {\r\n\t\tif (n.length < 2) {\r\n\t\t\treturn `0${n}`;\r\n\t\t}\r\n\t\treturn n;\r\n\t};\r\n\ttimestamp = timestamp / 1000;\r\n\tconst hour = Math.floor(timestamp / 3600);\r\n\tconst minute = Math.floor((timestamp - hour * 3600) / 60);\r\n\tconst second = Math.floor(timestamp % 60);\r\n\treturn `${zeroPadding(String(hour))}:${zeroPadding(\r\n\t\tString(minute)\r\n\t)}:${zeroPadding(String(second))}`;\r\n};\r\nexport const thousandFormatter = (count: number, unit = \"万\"): string => {\r\n\tif (count < 10000) {\r\n\t\treturn String(count);\r\n\t}\r\n\r\n\treturn `${(count / 10000).toFixed(1)}${unit}`;\r\n};\r\n\r\nexport const hundrenFormatter = (count: number): string => {\r\n\tif (count > 10000) {\r\n\t\treturn thousandFormatter(count, \"W\");\r\n\t}\r\n\tif (count > 1000) {\r\n\t\treturn `${(count / 1000).toFixed(1)}k`;\r\n\t}\r\n\treturn String(count);\r\n};\r\n\r\nexport const byteFormatter = (byte: number): string => {\r\n\tconst unit = [\"Byte\", \"KB\", \"MB\", \"GB\", \"T\"];\r\n\twhile (byte > 1024 && unit.length > 1) {\r\n\t\tbyte /= 1024;\r\n\t\tunit.shift();\r\n\t}\r\n\treturn `${byte.toFixed(2)} ${unit[0]}`;\r\n};\r\n","import createDebug from 'debug';\nimport EventEmitter from 'eventemitter3';\nimport WebSocketIpml from 'isomorphic-ws';\nimport sha256 from 'crypto-js/sha256.js';\nimport Base64 from 'crypto-js/enc-base64.js';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar WebSocketOpCode;\n\n(function (WebSocketOpCode) {\n  /**\r\n   * The initial message sent by obs-websocket to newly connected clients.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Hello\"] = 0] = \"Hello\";\n  /**\r\n   * The message sent by a newly connected client to obs-websocket in response to a `Hello`.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"Identify\"] = 1] = \"Identify\";\n  /**\r\n   * The response sent by obs-websocket to a client after it has successfully identified with obs-websocket.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"Identified\"] = 2] = \"Identified\";\n  /**\r\n   * The message sent by an already-identified client to update identification parameters.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"Reidentify\"] = 3] = \"Reidentify\";\n  /**\r\n   * The message sent by obs-websocket containing an event payload.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"Event\"] = 5] = \"Event\";\n  /**\r\n   * The message sent by a client to obs-websocket to perform a request.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"Request\"] = 6] = \"Request\";\n  /**\r\n   * The message sent by obs-websocket in response to a particular request from a client.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"RequestResponse\"] = 7] = \"RequestResponse\";\n  /**\r\n   * The message sent by a client to obs-websocket to perform a batch of requests.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"RequestBatch\"] = 8] = \"RequestBatch\";\n  /**\r\n   * The message sent by obs-websocket in response to a particular batch of requests from a client.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  WebSocketOpCode[WebSocketOpCode[\"RequestBatchResponse\"] = 9] = \"RequestBatchResponse\";\n})(WebSocketOpCode || (WebSocketOpCode = {}));\n/* eslint-disable no-bitwise, @typescript-eslint/prefer-literal-enum-member */\n\n\nvar EventSubscription;\n\n(function (EventSubscription) {\n  /**\r\n   * Subcription value used to disable all events.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n  EventSubscription[EventSubscription[\"None\"] = 0] = \"None\";\n  /**\r\n   * Subscription value to receive events in the `General` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"General\"] = 1] = \"General\";\n  /**\r\n   * Subscription value to receive events in the `Config` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Config\"] = 2] = \"Config\";\n  /**\r\n   * Subscription value to receive events in the `Scenes` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Scenes\"] = 4] = \"Scenes\";\n  /**\r\n   * Subscription value to receive events in the `Inputs` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Inputs\"] = 8] = \"Inputs\";\n  /**\r\n   * Subscription value to receive events in the `Transitions` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Transitions\"] = 16] = \"Transitions\";\n  /**\r\n   * Subscription value to receive events in the `Filters` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Filters\"] = 32] = \"Filters\";\n  /**\r\n   * Subscription value to receive events in the `Outputs` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Outputs\"] = 64] = \"Outputs\";\n  /**\r\n   * Subscription value to receive events in the `SceneItems` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"SceneItems\"] = 128] = \"SceneItems\";\n  /**\r\n   * Subscription value to receive events in the `MediaInputs` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"MediaInputs\"] = 256] = \"MediaInputs\";\n  /**\r\n   * Subscription value to receive the `VendorEvent` event.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Vendors\"] = 512] = \"Vendors\";\n  /**\r\n   * Subscription value to receive events in the `Ui` category.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"Ui\"] = 1024] = \"Ui\";\n  /**\r\n   * Helper to receive all non-high-volume events.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"All\"] = 1023] = \"All\";\n  /**\r\n   * Subscription value to receive the `InputVolumeMeters` high-volume event.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"InputVolumeMeters\"] = 65536] = \"InputVolumeMeters\";\n  /**\r\n   * Subscription value to receive the `InputActiveStateChanged` high-volume event.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"InputActiveStateChanged\"] = 131072] = \"InputActiveStateChanged\";\n  /**\r\n   * Subscription value to receive the `InputShowStateChanged` high-volume event.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"InputShowStateChanged\"] = 262144] = \"InputShowStateChanged\";\n  /**\r\n   * Subscription value to receive the `SceneItemTransformChanged` high-volume event.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  EventSubscription[EventSubscription[\"SceneItemTransformChanged\"] = 524288] = \"SceneItemTransformChanged\";\n})(EventSubscription || (EventSubscription = {}));\n/* eslint-enable no-bitwise, @typescript-eslint/prefer-literal-enum-member */\n\n\nvar RequestBatchExecutionType;\n\n(function (RequestBatchExecutionType) {\n  /**\r\n   * Not a request batch.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n  RequestBatchExecutionType[RequestBatchExecutionType[\"None\"] = -1] = \"None\";\n  /**\r\n   * A request batch which processes all requests serially, as fast as possible.\r\n   *\r\n   * Note: To introduce artificial delay, use the `Sleep` request and the `sleepMillis` request field.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  RequestBatchExecutionType[RequestBatchExecutionType[\"SerialRealtime\"] = 0] = \"SerialRealtime\";\n  /**\r\n   * A request batch type which processes all requests serially, in sync with the graphics thread. Designed to provide high accuracy for animations.\r\n   *\r\n   * Note: To introduce artificial delay, use the `Sleep` request and the `sleepFrames` request field.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  RequestBatchExecutionType[RequestBatchExecutionType[\"SerialFrame\"] = 1] = \"SerialFrame\";\n  /**\r\n   * A request batch type which processes all requests using all available threads in the thread pool.\r\n   *\r\n   * Note: This is mainly experimental, and only really shows its colors during requests which require lots of\r\n   * active processing, like `GetSourceScreenshot`.\r\n   *\r\n   * Initial OBS Version: 5.0.0\r\n   */\n\n  RequestBatchExecutionType[RequestBatchExecutionType[\"Parallel\"] = 2] = \"Parallel\";\n})(RequestBatchExecutionType || (RequestBatchExecutionType = {}));\n\n/**\r\n * SHA256 Hashing.\r\n *\r\n * @param  {string} [salt=''] salt.\r\n * @param  {string} [challenge=''] challenge.\r\n * @param  {string} msg Message to encode.\r\n * @returns {string} sha256 encoded string.\r\n */\n\nfunction authenticationHashing (salt, challenge, msg) {\n  var hash = Base64.stringify(sha256(msg + salt));\n  return Base64.stringify(sha256(hash + challenge));\n}\n\nvar _excluded = [\"authentication\", \"rpcVersion\"];\n\nfunction _catch(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n}\nvar debug = createDebug('obs-websocket-js');\nvar OBSWebSocketError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(OBSWebSocketError, _Error);\n\n  function OBSWebSocketError(code, message) {\n    var _this;\n\n    _this = _Error.call(this, message) || this;\n    _this.code = void 0;\n    _this.code = code;\n    return _this;\n  }\n\n  return OBSWebSocketError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar BaseOBSWebSocket = /*#__PURE__*/function (_EventEmitter) {\n  _inheritsLoose(BaseOBSWebSocket, _EventEmitter);\n\n  function BaseOBSWebSocket() {\n    var _this2;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _EventEmitter.call.apply(_EventEmitter, [this].concat(args)) || this;\n    _this2._identified = false;\n    _this2.internalListeners = new EventEmitter();\n    _this2.socket = void 0;\n    return _this2;\n  }\n\n  BaseOBSWebSocket.generateMessageId = function generateMessageId() {\n    return String(BaseOBSWebSocket.requestCounter++);\n  };\n\n  var _proto = BaseOBSWebSocket.prototype;\n\n  /**\r\n   * Connect to an obs-websocket server\r\n   *\r\n   * @param url Websocket server to connect to (including ws:// or wss:// protocol)\r\n   * @param password Password\r\n   * @param identificationParams Data for Identify event\r\n   * @returns Hello & Identified messages data (combined)\r\n   */\n  _proto.connect = function connect(url, password, identificationParams) {\n    if (url === void 0) {\n      url = 'ws://127.0.0.1:4455';\n    }\n\n    if (identificationParams === void 0) {\n      identificationParams = {};\n    }\n\n    try {\n      var _temp3 = function _temp3() {\n        return _catch(function () {\n          var connectionClosedPromise = _this4.internalEventPromise('ConnectionClosed');\n\n          var connectionErrorPromise = _this4.internalEventPromise('ConnectionError');\n\n          return Promise.resolve(Promise.race([function () {\n            try {\n              return Promise.resolve(_this4.createConnection(url)).then(function (hello) {\n                _this4.emit('Hello', hello);\n\n                return _this4.identify(hello, password, identificationParams);\n              });\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }(), // Choose the best promise for connection error/close\n          // In browser connection close has close code + reason,\n          // while in node error event has these\n          new Promise(function (resolve, reject) {\n            void connectionErrorPromise.then(function (e) {\n              if (e.message) {\n                reject(e);\n              }\n            });\n            void connectionClosedPromise.then(function (e) {\n              reject(e);\n            });\n          })]));\n        }, function (error) {\n          return Promise.resolve(_this4.disconnect()).then(function () {\n            throw error;\n          });\n        });\n      };\n\n      var _this4 = this;\n\n      var _temp4 = function () {\n        if (_this4.socket) {\n          return Promise.resolve(_this4.disconnect()).then(function () {});\n        }\n      }();\n\n      return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(_temp3) : _temp3(_temp4));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Disconnect from obs-websocket server\r\n   */\n  ;\n\n  _proto.disconnect = function disconnect() {\n    try {\n      var _this6 = this;\n\n      if (!_this6.socket || _this6.socket.readyState === WebSocketIpml.CLOSED) {\n        return Promise.resolve();\n      }\n\n      var connectionClosedPromise = _this6.internalEventPromise('ConnectionClosed');\n\n      _this6.socket.close();\n\n      return Promise.resolve(connectionClosedPromise).then(function () {});\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Update session parameters\r\n   *\r\n   * @param data Reidentify data\r\n   * @returns Identified message data\r\n   */\n  ;\n\n  _proto.reidentify = function reidentify(data) {\n    try {\n      var _this8 = this;\n\n      var identifiedPromise = _this8.internalEventPromise(\"op:\" + WebSocketOpCode.Identified);\n\n      return Promise.resolve(_this8.message(WebSocketOpCode.Reidentify, data)).then(function () {\n        return identifiedPromise;\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Send a request to obs-websocket\r\n   *\r\n   * @param requestType Request name\r\n   * @param requestData Request data\r\n   * @returns Request response\r\n   */\n  ;\n\n  _proto.call = function call(requestType, requestData) {\n    try {\n      var _this10 = this;\n\n      var requestId = BaseOBSWebSocket.generateMessageId();\n\n      var responsePromise = _this10.internalEventPromise(\"res:\" + requestId);\n\n      return Promise.resolve(_this10.message(WebSocketOpCode.Request, {\n        requestId: requestId,\n        requestType: requestType,\n        requestData: requestData\n      })).then(function () {\n        return Promise.resolve(responsePromise).then(function (_ref) {\n          var requestStatus = _ref.requestStatus,\n              responseData = _ref.responseData;\n\n          if (!requestStatus.result) {\n            throw new OBSWebSocketError(requestStatus.code, requestStatus.comment);\n          }\n\n          return responseData;\n        });\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Cleanup from socket disconnection\r\n   */\n  ;\n\n  _proto.cleanup = function cleanup() {\n    if (!this.socket) {\n      return;\n    }\n\n    this.socket.onopen = null;\n    this.socket.onmessage = null;\n    this.socket.onerror = null;\n    this.socket.onclose = null;\n    this.socket = undefined;\n    this._identified = false; // Cleanup leftovers\n\n    this.internalListeners.removeAllListeners();\n  }\n  /**\r\n   * Create connection to specified obs-websocket server\r\n   *\r\n   * @private\r\n   * @param url Websocket address\r\n   * @returns Promise for hello data\r\n   */\n  ;\n\n  _proto.createConnection = function createConnection(url) {\n    try {\n      var _this12 = this;\n\n      var connectionOpenedPromise = _this12.internalEventPromise('ConnectionOpened');\n\n      var helloPromise = _this12.internalEventPromise(\"op:\" + WebSocketOpCode.Hello);\n\n      _this12.socket = new WebSocketIpml(url, _this12.protocol);\n      _this12.socket.onopen = _this12.onOpen.bind(_this12);\n      _this12.socket.onmessage = _this12.onMessage.bind(_this12);\n      _this12.socket.onerror = _this12.onError.bind(_this12);\n      _this12.socket.onclose = _this12.onClose.bind(_this12);\n      return Promise.resolve(connectionOpenedPromise).then(function () {\n        var _this12$socket;\n\n        var protocol = (_this12$socket = _this12.socket) == null ? void 0 : _this12$socket.protocol; // Browsers don't autoclose on missing/wrong protocol\n\n        if (!protocol) {\n          throw new OBSWebSocketError(-1, 'Server sent no subprotocol');\n        }\n\n        if (protocol !== _this12.protocol) {\n          throw new OBSWebSocketError(-1, 'Server sent an invalid subprotocol');\n        }\n\n        return helloPromise;\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Send identify message\r\n   *\r\n   * @private\r\n   * @param hello Hello message data\r\n   * @param password Password\r\n   * @param identificationParams Identification params\r\n   * @returns Hello & Identified messages data (combined)\r\n   */\n  ;\n\n  _proto.identify = function identify(_ref2, password, identificationParams) {\n    var authentication = _ref2.authentication,\n        rpcVersion = _ref2.rpcVersion,\n        helloRest = _objectWithoutPropertiesLoose(_ref2, _excluded);\n\n    if (identificationParams === void 0) {\n      identificationParams = {};\n    }\n\n    try {\n      var _this14 = this;\n\n      // Set rpcVersion if unset\n      var data = _extends({\n        rpcVersion: rpcVersion\n      }, identificationParams);\n\n      if (authentication && password) {\n        data.authentication = authenticationHashing(authentication.salt, authentication.challenge, password);\n      }\n\n      var identifiedPromise = _this14.internalEventPromise(\"op:\" + WebSocketOpCode.Identified);\n\n      return Promise.resolve(_this14.message(WebSocketOpCode.Identify, data)).then(function () {\n        return Promise.resolve(identifiedPromise).then(function (identified) {\n          _this14._identified = true;\n\n          _this14.emit('Identified', identified);\n\n          return _extends({\n            rpcVersion: rpcVersion\n          }, helloRest, identified);\n        });\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Send message to obs-websocket\r\n   *\r\n   * @private\r\n   * @param op WebSocketOpCode\r\n   * @param d Message data\r\n   */\n  ;\n\n  _proto.message = function message(op, d) {\n    try {\n      var _this16 = this;\n\n      if (!_this16.socket) {\n        throw new Error('Not connected');\n      }\n\n      if (!_this16.identified && op !== 1) {\n        throw new Error('Socket not identified');\n      }\n\n      return Promise.resolve(_this16.encodeMessage({\n        op: op,\n        d: d\n      })).then(function (encoded) {\n        _this16.socket.send(encoded);\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Create a promise to listen for an event on internal listener\r\n   * (will be cleaned up on disconnect)\r\n   *\r\n   * @private\r\n   * @param event Event to listen to\r\n   * @returns Event data\r\n   */\n  ;\n\n  _proto.internalEventPromise = function internalEventPromise(event) {\n    try {\n      var _this18 = this;\n\n      return Promise.resolve(new Promise(function (resolve) {\n        _this18.internalListeners.once(event, resolve);\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Websocket open event listener\r\n   *\r\n   * @private\r\n   * @param e Event\r\n   */\n  ;\n\n  _proto.onOpen = function onOpen(e) {\n    debug('socket.open');\n    this.emit('ConnectionOpened');\n    this.internalListeners.emit('ConnectionOpened', e);\n  }\n  /**\r\n   * Websocket message event listener\r\n   *\r\n   * @private\r\n   * @param e Event\r\n   */\n  ;\n\n  _proto.onMessage = function onMessage(e) {\n    try {\n      var _this20 = this;\n\n      return Promise.resolve(_catch(function () {\n        return Promise.resolve(_this20.decodeMessage(e.data)).then(function (_ref3) {\n          var op = _ref3.op,\n              d = _ref3.d;\n          debug('socket.message: %d %j', op, d);\n\n          if (op === undefined || d === undefined) {\n            return;\n          }\n\n          switch (op) {\n            case WebSocketOpCode.Event:\n              {\n                var eventType = d.eventType,\n                    eventData = d.eventData; // @ts-expect-error Typescript just doesn't understand it\n\n                _this20.emit(eventType, eventData);\n\n                return;\n              }\n\n            case WebSocketOpCode.RequestResponse:\n              {\n                var requestId = d.requestId;\n\n                _this20.internalListeners.emit(\"res:\" + requestId, d);\n\n                return;\n              }\n\n            default:\n              _this20.internalListeners.emit(\"op:\" + op, d);\n\n          }\n        });\n      }, function (error) {\n        debug('error handling message: %o', error);\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }\n  /**\r\n   * Websocket error event listener\r\n   *\r\n   * @private\r\n   * @param e ErrorEvent\r\n   */\n  ;\n\n  _proto.onError = function onError(e) {\n    debug('socket.error: %o', e);\n    var error = new OBSWebSocketError(-1, e.message);\n    this.emit('ConnectionError', error);\n    this.internalListeners.emit('ConnectionError', error);\n  }\n  /**\r\n   * Websocket close event listener\r\n   *\r\n   * @private\r\n   * @param e Event\r\n   */\n  ;\n\n  _proto.onClose = function onClose(e) {\n    debug('socket.close: %s (%d)', e.reason, e.code);\n    var error = new OBSWebSocketError(e.code, e.reason);\n    this.emit('ConnectionClosed', error);\n    this.internalListeners.emit('ConnectionClosed', error);\n    this.cleanup();\n  };\n\n  _createClass(BaseOBSWebSocket, [{\n    key: \"identified\",\n    get: function get() {\n      return this._identified;\n    }\n  }]);\n\n  return BaseOBSWebSocket;\n}(EventEmitter); // https://github.com/developit/microbundle/issues/531#issuecomment-575473024\n// Not using ESM export due to it also being detected and breaking rollup based bundlers (vite)\n\nBaseOBSWebSocket.requestCounter = 1;\n\nif (typeof exports !== 'undefined') {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n}\n\nvar OBSWebSocket = /*#__PURE__*/function (_BaseOBSWebSocket) {\n  _inheritsLoose(OBSWebSocket, _BaseOBSWebSocket);\n\n  function OBSWebSocket() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _BaseOBSWebSocket.call.apply(_BaseOBSWebSocket, [this].concat(args)) || this;\n    _this.protocol = 'obswebsocket.json';\n    return _this;\n  }\n\n  var _proto = OBSWebSocket.prototype;\n\n  _proto.encodeMessage = function encodeMessage(data) {\n    try {\n      return Promise.resolve(JSON.stringify(data));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  _proto.decodeMessage = function decodeMessage(data) {\n    try {\n      return Promise.resolve(JSON.parse(data));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  return OBSWebSocket;\n}(BaseOBSWebSocket);\n\nexport { EventSubscription, OBSWebSocketError, RequestBatchExecutionType, WebSocketOpCode, OBSWebSocket as default };\n//# sourceMappingURL=json.module.js.map\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = {\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options = {}) {\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = listener;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data, true);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf, false);\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=7638922f&scoped=true&lang=scss\"","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    this._sender = new Sender(socket, this._extensions, options.generateMask);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n\n    websocket._url = address;\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n  let invalidURLMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isUnixSocket) {\n    invalidURLMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", or \"ws+unix:\"';\n  } else if (isUnixSocket && !parsedUrl.pathname) {\n    invalidURLMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidURLMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidURLMessage) {\n    const err = new SyntaxError(invalidURLMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalUnixSocket = isUnixSocket;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isUnixSocket\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isUnixSocket\n        ? websocket._originalUnixSocket\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalUnixSocket\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    if (res.headers.upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  req.end();\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (req.headers.upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!key || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","\"use strict\";\n\nmodule.exports = require('ws');","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        randomFillSync(mask, 0, 4);\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        [kByteLength]: byteLength,\n        fin: options.fin,\n        generateMask: this._generateMask,\n        mask: options.mask,\n        maskBuffer: this._maskBuffer,\n        opcode,\n        readOnly,\n        rsv1\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n      } else {\n        this.dispatch(data, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(data, {\n          [kByteLength]: byteLength,\n          fin: options.fin,\n          generateMask: this._generateMask,\n          mask: options.mask,\n          maskBuffer: this._maskBuffer,\n          opcode,\n          readOnly,\n          rsv1: false\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const params = this._queue[i];\n          const callback = params[params.length - 1];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","<template>\r\n\t<content-frame\r\n\t\tid=\"roomMgmt\"\r\n\t\tv-loading=\"loading\"\r\n\t\telement-loading-text=\"推流时间从10秒到30秒不等，请耐心等待\"\r\n\t>\r\n\t\t<row-frame title=\"弹幕流链接\" :flex=\"true\">\r\n\t\t\t<row-span :span=\"12\">\r\n\t\t\t\t<el-input size=\"mini\" :model-value=\"danmakuStream\">\r\n\t\t\t\t\t<template #append>\r\n\t\t\t\t\t\t<el-button\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"mini\"\r\n\t\t\t\t\t\t\tclass=\"btnBase attach\"\r\n\t\t\t\t\t\t\t@click=\"copy(danmakuStream)\"\r\n\t\t\t\t\t\t\t>复制\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-input>\r\n\t\t\t\t<div class=\"hint\">（将上访链接黏贴到推流软件内置浏览器中）</div>\r\n\t\t\t</row-span>\r\n\t\t</row-frame>\r\n\t</content-frame>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { room } from \"@front/datas\";\r\nimport { closeStream } from \"@front/mixins/methods\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport { sleep, isUrl } from \"@front/util_function/base\";\r\nimport { copy } from \"@front/util_function/clipboard\";\r\nimport OBS from \"@front/util_function/obs\";\r\nimport { getCutStatus, setCutStatus } from \"@front/api/room\";\r\nexport default defineComponent({\r\n\tname: \"roomMgmt\",\r\n\tmixins: [closeStream],\r\n\tdata() {\r\n\t\tconst roomProfile: room.ProfileDetail = cloneDeep(\r\n\t\t\tthis.$store.state.roomProfile\r\n\t\t);\r\n\t\tif (roomProfile.liveType.categoryID === 0) {\r\n\t\t\troomProfile.liveType.categoryID = 1;\r\n\t\t\troomProfile.liveType.subCategoryID = 101;\r\n\t\t}\r\n\t\tconst timer: any = null;\r\n\t\treturn {\r\n\t\t\tOBS,\r\n\t\t\tobsSync: false,\r\n\t\t\tloading: false,\r\n\t\t\tcanCut: false,\r\n\t\t\tcount: 0,\r\n\t\t\ttimer,\r\n\t\t\troomProfile,\r\n\t\t\tdanmakuStream: `http://${window.location.host}/obs/danmaku/`,\r\n\t\t\tmagicScreen: `http://${window.location.host}/obs/screen`\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters([\"categoryCascade\", \"isStreaming\"]),\r\n\t\t...mapState([\r\n\t\t\t\"streamSession\",\r\n\t\t\t\"streamEncodec\",\r\n\t\t\t\"roomCategorys\",\r\n\t\t\t\"userSession\"\r\n\t\t]),\r\n\t\tchanged(): boolean {\r\n\t\t\treturn (\r\n\t\t\t\tthis.roomProfile.title ===\r\n\t\t\t\t\tthis.$store.state.roomProfile.title &&\r\n\t\t\t\tthis.roomProfile.liveCover ===\r\n\t\t\t\t\tthis.$store.state.roomProfile.liveCover\r\n\t\t\t);\r\n\t\t},\r\n\t\tdanmakuOfficial(): string {\r\n\t\t\treturn `https://live.acfun.cn/room/${this.userSession.userID}?theme=default&showAuthorclubOnly=true&showAvatar=true`;\r\n\t\t},\r\n\t\tcategoryValue: {\r\n\t\t\tget(): Array<number> {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tthis.roomProfile.liveType.categoryID,\r\n\t\t\t\t\tthis.roomProfile.liveType.subCategoryID\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tset(e: any): void {\r\n\t\t\t\tconst subCategoryID = e[1];\r\n\t\t\t\tconst category = this.roomCategorys.find(\r\n\t\t\t\t\t(roomCategory: any) => {\r\n\t\t\t\t\t\treturn roomCategory.subCategoryID === subCategoryID;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tif (category) {\r\n\t\t\t\t\tthis.roomProfile.liveType = { ...category };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$store.commit(\"getCategory\");\r\n\t\tthis.$store.commit(\"getStreamSession\"); // get rtmp key when no streaming\r\n\t\tthis.loadCache();\r\n\t\tthis.getCutStatus();\r\n\t\tevent.on(\"openStream\", this.openStream);\r\n\t\tthis.timer = setInterval(() => {\r\n\t\t\tthis.$store.commit(\"getStreamEncodec\");\r\n\t\t}, 3000);\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tthis.saveCache();\r\n\t\tevent.off(\"openStream\", this.openStream);\r\n\t\tevent.emit(\"openStreamEnd\");\r\n\t\tclearInterval(this.timer);\r\n\t},\r\n\tmethods: {\r\n\t\tgetCutStatus() {\r\n\t\t\tgetCutStatus().then(({ canCut }) => {\r\n\t\t\t\tthis.canCut = canCut;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetCanCut() {\r\n\t\t\tsetCutStatus(this.canCut)\r\n\t\t\t\t.catch((message: any) => {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.finally(this.getCutStatus);\r\n\t\t},\r\n\t\tcopy,\r\n\t\tsaveCache() {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\"imgCache\",\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\ttitle: this.roomProfile.title,\r\n\t\t\t\t\timg: this.roomProfile.liveCover,\r\n\t\t\t\t\tcategory: this.roomProfile.liveType,\r\n\t\t\t\t\tobsSync: this.obsSync\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\tloadCache() {\r\n\t\t\tlet cache: any = localStorage.getItem(\"imgCache\");\r\n\t\t\tif (!cache) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcache = JSON.parse(cache);\r\n\t\t\tthis.roomProfile.title = cache.title;\r\n\t\t\tthis.roomProfile.liveCover = cache.img;\r\n\t\t\tthis.roomProfile.liveType = cache.category || room.category();\r\n\t\t\tthis.obsSync = cache.obsSync;\r\n\t\t},\r\n\t\tasync setRoomProfile() {\r\n\t\t\tawait this.$store.commit(\"setRoomProfile\", {\r\n\t\t\t\tliveID: this.$store.state.roomProfile.liveID,\r\n\t\t\t\tcoverFile: this.generateUrl(this.roomProfile.liveCover),\r\n\t\t\t\ttitle: this.roomProfile.title\r\n\t\t\t});\r\n\t\t\tevent.once(\"roomProfileChanged\", () => {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"修改成功\",\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync openStream() {\r\n\t\t\tif (!this.validation()) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tevent.emit(\"openStreamEnd\");\r\n\t\t\t\t}, 500);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.obsSync) {\r\n\t\t\t\tconst status = await this.OBS.checkStatus();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (status?.streaming) {\r\n\t\t\t\t\t\tawait this.OBS.stopStream();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait sleep(2000);\r\n\t\t\t\t\tawait this.OBS.setStreamSettings({\r\n\t\t\t\t\t\tserver: this.streamSession.rtmpServer,\r\n\t\t\t\t\t\tkey: this.streamSession.streamKey\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.OBS.startStream();\r\n\t\t\t\t\tthis.readyToStream();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\tElMessageBox({\r\n\t\t\t\t\t\ttitle: \"OBS启播失败\",\r\n\t\t\t\t\t\tconfirmButtonText: \"淦哦\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.readyToStream();\r\n\t\t},\r\n\t\tgenerateUrl(str: string) {\r\n\t\t\tif (isUrl(str)) {\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t\treturn `http://${window.location.host}${str}`;\r\n\t\t},\r\n\t\tasync readyToStream() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tif (!this?.streamEncodec?.resolution) {\r\n\t\t\t\tif (this.count < 60) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.count++;\r\n\t\t\t\t\t\tthis.readyToStream();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"推流未成功，请等待10秒/刷新密匙重新配置后重试\",\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tevent.emit(\"openStreamEnd\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.saveCache();\r\n\t\t\tthis.$store\r\n\t\t\t\t.dispatch(\"openStream\", {\r\n\t\t\t\t\ttitle: this.roomProfile.title,\r\n\t\t\t\t\tcoverFile: this.generateUrl(this.roomProfile.liveCover),\r\n\t\t\t\t\tstreamName: this.streamSession.streamName,\r\n\t\t\t\t\tportrait: false,\r\n\t\t\t\t\tpanoramic: false,\r\n\t\t\t\t\tcategoryID: this.roomProfile.liveType.categoryID,\r\n\t\t\t\t\tsubCategoryID: this.roomProfile.liveType.subCategoryID\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e: any) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tmessage: e,\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\toffset: 60\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tevent.emit(\"openStreamEnd\");\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tvalidation() {\r\n\t\t\tlet errmsg = \"\";\r\n\t\t\tif (!this.roomProfile.title) {\r\n\t\t\t\terrmsg += \"房间标题不为空 \";\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t!this.roomProfile.liveCover ||\r\n\t\t\t\tthis.roomProfile.liveCover.includes(\"base64\")\r\n\t\t\t) {\r\n\t\t\t\terrmsg += \"房间封面无效，请重新上传 \";\r\n\t\t\t}\r\n\t\t\tif (this.obsSync && !OBS.obs) {\r\n\t\t\t\terrmsg += \"OBS未能连接，请刷新OBS状态或确认插件是否安装 \";\r\n\t\t\t}\r\n\t\t\tif (errmsg) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"错误: \" + errmsg,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@front/styles/variables.scss\";\r\n#roomMgmt {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\t:deep .imgInput {\r\n\t\twidth: 100%;\r\n\t\tpadding-bottom: 40%;\r\n\t\tbox-shadow: $--box-shadow-base;\r\n\t}\r\n\t.btnBase {\r\n\t\tbackground-color: $--color-primary;\r\n\t\tcolor: white;\r\n\t\t&.attach {\r\n\t\t\tborder-top-left-radius: 0px !important;\r\n\t\t\tborder-bottom-left-radius: 0px !important;\r\n\t\t\tbox-shadow: none !important;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","const OBSWebSocket = require(\"obs-websocket-js\");\r\n\r\ninterface streamSettings {\r\n\tserver: string;\r\n\tkey: string;\r\n}\r\n\r\nexport class OBS {\r\n\tobs = null;\r\n\tconstructor() {\r\n\t\tthis.connect();\r\n\t}\r\n\r\n\tconnect() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet obs: any = this.obs;\r\n\t\t\tthis.obs = null;\r\n\t\t\tobs = new OBSWebSocket();\r\n\t\t\tobs.on(\"error\", (e: any) => {\r\n\t\t\t\tconsole.log(\"socket error:\", e);\r\n\t\t\t});\r\n\t\t\tobs.connect()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.obs = obs;\r\n\t\t\t\t\tresolve(obs);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e: Error) => {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tsend(requestName: string, args?: any) {\r\n\t\treturn this.connect()\r\n\t\t\t.then((obs: any) => {\r\n\t\t\t\treturn obs.send(requestName, args);\r\n\t\t\t})\r\n\t\t\t.catch((e: any) => {\r\n\t\t\t\treturn e;\r\n\t\t\t});\r\n\t}\r\n\r\n\tsetStreamSettings(settings: streamSettings) {\r\n\t\treturn this.send(\"SetStreamSettings\", {\r\n\t\t\ttype: \"rtmp_custom\",\r\n\t\t\tsettings\r\n\t\t});\r\n\t}\r\n\r\n\tstartStream() {\r\n\t\treturn this.send(\"StartStreaming\");\r\n\t}\r\n\r\n\tstopStream() {\r\n\t\treturn this.send(\"StopStreaming\");\r\n\t}\r\n\r\n\tcheckStatus() {\r\n\t\treturn this.send(\"GetStreamingStatus\");\r\n\t}\r\n}\r\n\r\nexport default new OBS();\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { room } from \"@front/datas\";\r\nimport { closeStream } from \"@front/mixins/methods\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport { sleep, isUrl } from \"@front/util_function/base\";\r\nimport { copy } from \"@front/util_function/clipboard\";\r\nimport OBS from \"@front/util_function/obs\";\r\nimport { getCutStatus, setCutStatus } from \"@front/api/room\";\r\nexport default defineComponent({\r\n\tname: \"roomMgmt\",\r\n\tmixins: [closeStream],\r\n\tdata() {\r\n\t\tconst roomProfile: room.ProfileDetail = cloneDeep(\r\n\t\t\tthis.$store.state.roomProfile\r\n\t\t);\r\n\t\tif (roomProfile.liveType.categoryID === 0) {\r\n\t\t\troomProfile.liveType.categoryID = 1;\r\n\t\t\troomProfile.liveType.subCategoryID = 101;\r\n\t\t}\r\n\t\tconst timer: any = null;\r\n\t\treturn {\r\n\t\t\tOBS,\r\n\t\t\tobsSync: false,\r\n\t\t\tloading: false,\r\n\t\t\tcanCut: false,\r\n\t\t\tcount: 0,\r\n\t\t\ttimer,\r\n\t\t\troomProfile,\r\n\t\t\tdanmakuStream: `http://${window.location.host}/obs/danmaku/`,\r\n\t\t\tmagicScreen: `http://${window.location.host}/obs/screen`\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters([\"categoryCascade\", \"isStreaming\"]),\r\n\t\t...mapState([\r\n\t\t\t\"streamSession\",\r\n\t\t\t\"streamEncodec\",\r\n\t\t\t\"roomCategorys\",\r\n\t\t\t\"userSession\"\r\n\t\t]),\r\n\t\tchanged(): boolean {\r\n\t\t\treturn (\r\n\t\t\t\tthis.roomProfile.title ===\r\n\t\t\t\t\tthis.$store.state.roomProfile.title &&\r\n\t\t\t\tthis.roomProfile.liveCover ===\r\n\t\t\t\t\tthis.$store.state.roomProfile.liveCover\r\n\t\t\t);\r\n\t\t},\r\n\t\tdanmakuOfficial(): string {\r\n\t\t\treturn `https://live.acfun.cn/room/${this.userSession.userID}?theme=default&showAuthorclubOnly=true&showAvatar=true`;\r\n\t\t},\r\n\t\tcategoryValue: {\r\n\t\t\tget(): Array<number> {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tthis.roomProfile.liveType.categoryID,\r\n\t\t\t\t\tthis.roomProfile.liveType.subCategoryID\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tset(e: any): void {\r\n\t\t\t\tconst subCategoryID = e[1];\r\n\t\t\t\tconst category = this.roomCategorys.find(\r\n\t\t\t\t\t(roomCategory: any) => {\r\n\t\t\t\t\t\treturn roomCategory.subCategoryID === subCategoryID;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tif (category) {\r\n\t\t\t\t\tthis.roomProfile.liveType = { ...category };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$store.commit(\"getCategory\");\r\n\t\tthis.$store.commit(\"getStreamSession\"); // get rtmp key when no streaming\r\n\t\tthis.loadCache();\r\n\t\tthis.getCutStatus();\r\n\t\tevent.on(\"openStream\", this.openStream);\r\n\t\tthis.timer = setInterval(() => {\r\n\t\t\tthis.$store.commit(\"getStreamEncodec\");\r\n\t\t}, 3000);\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tthis.saveCache();\r\n\t\tevent.off(\"openStream\", this.openStream);\r\n\t\tevent.emit(\"openStreamEnd\");\r\n\t\tclearInterval(this.timer);\r\n\t},\r\n\tmethods: {\r\n\t\tgetCutStatus() {\r\n\t\t\tgetCutStatus().then(({ canCut }) => {\r\n\t\t\t\tthis.canCut = canCut;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetCanCut() {\r\n\t\t\tsetCutStatus(this.canCut)\r\n\t\t\t\t.catch((message: any) => {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.finally(this.getCutStatus);\r\n\t\t},\r\n\t\tcopy,\r\n\t\tsaveCache() {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\"imgCache\",\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\ttitle: this.roomProfile.title,\r\n\t\t\t\t\timg: this.roomProfile.liveCover,\r\n\t\t\t\t\tcategory: this.roomProfile.liveType,\r\n\t\t\t\t\tobsSync: this.obsSync\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\tloadCache() {\r\n\t\t\tlet cache: any = localStorage.getItem(\"imgCache\");\r\n\t\t\tif (!cache) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcache = JSON.parse(cache);\r\n\t\t\tthis.roomProfile.title = cache.title;\r\n\t\t\tthis.roomProfile.liveCover = cache.img;\r\n\t\t\tthis.roomProfile.liveType = cache.category || room.category();\r\n\t\t\tthis.obsSync = cache.obsSync;\r\n\t\t},\r\n\t\tasync setRoomProfile() {\r\n\t\t\tawait this.$store.commit(\"setRoomProfile\", {\r\n\t\t\t\tliveID: this.$store.state.roomProfile.liveID,\r\n\t\t\t\tcoverFile: this.generateUrl(this.roomProfile.liveCover),\r\n\t\t\t\ttitle: this.roomProfile.title\r\n\t\t\t});\r\n\t\t\tevent.once(\"roomProfileChanged\", () => {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"修改成功\",\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync openStream() {\r\n\t\t\tif (!this.validation()) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tevent.emit(\"openStreamEnd\");\r\n\t\t\t\t}, 500);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.obsSync) {\r\n\t\t\t\tconst status = await this.OBS.checkStatus();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (status?.streaming) {\r\n\t\t\t\t\t\tawait this.OBS.stopStream();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait sleep(2000);\r\n\t\t\t\t\tawait this.OBS.setStreamSettings({\r\n\t\t\t\t\t\tserver: this.streamSession.rtmpServer,\r\n\t\t\t\t\t\tkey: this.streamSession.streamKey\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.OBS.startStream();\r\n\t\t\t\t\tthis.readyToStream();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\tElMessageBox({\r\n\t\t\t\t\t\ttitle: \"OBS启播失败\",\r\n\t\t\t\t\t\tconfirmButtonText: \"淦哦\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.readyToStream();\r\n\t\t},\r\n\t\tgenerateUrl(str: string) {\r\n\t\t\tif (isUrl(str)) {\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t\treturn `http://${window.location.host}${str}`;\r\n\t\t},\r\n\t\tasync readyToStream() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tif (!this?.streamEncodec?.resolution) {\r\n\t\t\t\tif (this.count < 60) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.count++;\r\n\t\t\t\t\t\tthis.readyToStream();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"推流未成功，请等待10秒/刷新密匙重新配置后重试\",\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tevent.emit(\"openStreamEnd\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.saveCache();\r\n\t\t\tthis.$store\r\n\t\t\t\t.dispatch(\"openStream\", {\r\n\t\t\t\t\ttitle: this.roomProfile.title,\r\n\t\t\t\t\tcoverFile: this.generateUrl(this.roomProfile.liveCover),\r\n\t\t\t\t\tstreamName: this.streamSession.streamName,\r\n\t\t\t\t\tportrait: false,\r\n\t\t\t\t\tpanoramic: false,\r\n\t\t\t\t\tcategoryID: this.roomProfile.liveType.categoryID,\r\n\t\t\t\t\tsubCategoryID: this.roomProfile.liveType.subCategoryID\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e: any) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tmessage: e,\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\toffset: 60\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tevent.emit(\"openStreamEnd\");\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tvalidation() {\r\n\t\t\tlet errmsg = \"\";\r\n\t\t\tif (!this.roomProfile.title) {\r\n\t\t\t\terrmsg += \"房间标题不为空 \";\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t!this.roomProfile.liveCover ||\r\n\t\t\t\tthis.roomProfile.liveCover.includes(\"base64\")\r\n\t\t\t) {\r\n\t\t\t\terrmsg += \"房间封面无效，请重新上传 \";\r\n\t\t\t}\r\n\t\t\tif (this.obsSync && !OBS.obs) {\r\n\t\t\t\terrmsg += \"OBS未能连接，请刷新OBS状态或确认插件是否安装 \";\r\n\t\t\t}\r\n\t\t\tif (errmsg) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"错误: \" + errmsg,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=7638922f&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7638922f&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-7638922f\"\n\nexport default script","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n"],"sourceRoot":""}