{"version":3,"sources":["webpack:///./src/electron_browser/views/danmakuSetting/index.vue","webpack:///./src/electron_browser/views/danmakuSetting/style/index.vue","webpack:///./src/electron_browser/views/danmakuSetting/style/qa.ts","webpack:///./src/electron_browser/views/danmakuSetting/style/index.vue?fb78","webpack:///./src/electron_browser/views/danmakuSetting/style/index.vue?c204","webpack:///./src/electron_browser/views/danmakuSetting/config/index.vue","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/common.vue","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/common.vue?afb5","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/common.vue?bc59","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/filter.vue","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/filter.vue?783f","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/filter.vue?cccb","webpack:///./src/electron_browser/views/danmakuSetting/config/settingBlocks/index.ts","webpack:///./src/electron_browser/views/danmakuSetting/config/index.vue?4502","webpack:///./src/electron_browser/views/danmakuSetting/config/index.vue?2d36","webpack:///./src/electron_browser/views/danmakuSetting/index.vue?7d1d","webpack:///./src/electron_browser/views/danmakuSetting/index.vue?f708","webpack:///./src/electron_browser/views/danmakuSetting/index.vue?5bb5","webpack:///./src/electron_browser/util_component/frames/zoomFrame.vue","webpack:///./src/electron_browser/util_component/frames/zoomFrame.vue?222c","webpack:///./src/electron_browser/util_component/frames/zoomFrame.vue?aa7f","webpack:///./src/electron_browser/views/danmakuSetting/config/index.vue?c2d2","webpack:///./src/electron_browser/util_component/frames/zoomFrame.vue?8409","webpack:///./src/electron_browser/views/danmakuSetting/style/index.vue?baa2"],"names":["style","class","activeTo","label","name","components","align","brightness","span","width","trigger","hint","hin","index","key","q","a","flex","title","loadCommand","type","dropdown","command","size","currentWidget","disabled","enable","styleType","typeOptions","value","saveCommand","min","max","step","zoomPreview","allow-zoom","styles","currentStyle","currentWidgets","length","setting","config-mode","danmaku","mockDanmaku","max-height","widgets","widget","id","addWidget","widgetOptions","avaliable","includes","list","selected","action","widgetSelected","styleDialog","generateList","labelEn","form-footer","schema","styleForm","options","styleOption","styleOptionValue","getStyle","placeholder","zoomFrame","baseList","base","danmakuRow","VueForm","icon","this","selectWidget","moveWidget","removeWidget","computed","Boolean","watch","n","o","deep","error","methods","loadFromStore","danmakuProfile","settingOfType","message","duration","loadFromFile","async","res","Object","assign","JSON","parse","reset","replace","fetch","then","json","saveToFile","removeStyleForm","$store","commit","state","web","toolBox","sameWidgetNum","filter","i","limit","offset","styleValue","currentIndex","indexOf","splice","generateMenu","output","option","styleOfType","push","children","map","e","pop","newStyle","keys","forEach","render","__scopeId","configMode","danmakuList","mockData","settings","settingTarget","settingBlocks","item","save","saveSync","maxNum","props","required","$emit","open","clubOnly","clubLevel","blackList","keyword","types","multiple","combineGift","combineLike","combineEnter","default","common","flow","mockTimer","commonSettings","changeDialog","getProfile","polling","clearTimeout","hasMedal","clubName","resetFilter","filterUpdate","tempRank","$nextTick","setTimeout","giftList","likeList","newMock","mock","filtered","target","settingType","first","second","dynamic","allowZoom","zoomMax","parentResizeListener","childResizeListener","parentWidth","parentHeight","childWidth","childHeight","child","$el","firstChild","parent","getActualWidth","ResizeObserver","observe","xZoom","yZoom","zoom","Math","transform","getBoundingClientRect","height","offsetWidth","offsetHeight"],"mappings":"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","file":"js/chunk-a3789674.04b6e6d3.js","sourcesContent":["<template>\n\t<div>\n\t\t<el-tabs class=\"tabs\" v-model=\"activeTo\">\n\t\t\t<el-tab-pane label=\"功能\" name=\"first\" />\n\t\t\t<el-tab-pane label=\"样式编辑器\" name=\"second\" />\n\t\t</el-tabs>\n\t\t<div style=\"height:504px\">\n\t\t\t<component :is=\"components[activeTo]\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, markRaw } from \"vue\";\nimport styleConfig from \"./style/index.vue\";\nimport danmakuConfig from \"./config/index.vue\";\nexport default defineComponent({\n\tname: \"danmakuConfig\",\n\tdata() {\n\t\treturn {\n\t\t\tcomponents: {\n\t\t\t\tfirst: markRaw(danmakuConfig),\n\t\t\t\tsecond: markRaw(styleConfig)\n\t\t\t},\n\t\t\tactiveTo: \"first\"\n\t\t};\n\t}\n});\n</script>\n<style scoped lang='scss'>\n@import \"@front/styles/variables.scss\";\n.tabs {\n\tposition: absolute;\n\ttop: -62px;\n\tright: 0px;\n\twidth: calc(100% - 50px);\n\t:deep .el-tabs__nav.is-top {\n\t\tfloat: right;\n\t}\n\t:deep .el-tabs__item {\n\t\tbox-shadow: none !important;\n\t}\n\t:deep .el-tabs__content {\n\t\tdisplay: none;\n\t}\n}\n</style>\n","<template>\n\t<content-frame align=\"row\" class=\"danmaku-setting\" :style=\"{'--brightness':brightness/100}\">\n\t\t<row-span :span=\"12\">\n\t\t\t<span class=\"hint\">\n\t\t\t\t用之前康康Q&A：\n\t\t\t\t<popver-help width=\"700px\" trigger=\"hover\">\n\t\t\t\t\t<div v-for=\"(hin,index) in hint\" :key=\"index\" style=\"margin-bottom:8px\">\n\t\t\t\t\t\tQ:<span class=\"hint\" v-html=\"hin.q\" /><br>\n\t\t\t\t\t\tA:<span class=\"hint\" v-html=\"hin.a\" />\n\t\t\t\t\t</div>\n\t\t\t\t</popver-help>\n\t\t\t</span>\n\t\t</row-span>\n\t\t<row-frame :flex=\"true\" width=\"100%\" style=\"margin-bottom:0px\">\n\t\t\t<row-span :span=\"2\">\n\t\t\t\t<row-frame width=\"100%\" title=\"step1:导入\">\n\t\t\t\t\t<el-dropdown @command=\"loadCommand\" type=\"primary\" trigger=\"click\" style=\"line-height:28px\">\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\">\n\t\t\t\t\t\t\t导入样式，从\n\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t<template #dropdown>\n\t\t\t\t\t\t\t<el-dropdown-menu>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"toolBox\">当前主播样式</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"web\">当前观众样式</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"d-toolBox\">默认主播样式</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"d-web\">默认观众样式</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"file\">文件</el-dropdown-item>\n\t\t\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-dropdown>\n\t\t\t\t</row-frame>\n\t\t\t</row-span>\n\t\t\t<row-span :span=\"8.5\">\n\t\t\t\t<row-frame width=\"100%\" title=\"step2:选择类型编辑\">\n\t\t\t\t\t<el-radio-group @change=\"currentWidget={}\" :disabled=\"!enable\" size=\"mini\" v-model=\"styleType\">\n\t\t\t\t\t\t<el-radio-button v-for=\"type in typeOptions\" :label=\"type.value\" :key=\"type.value\">{{type.label}}\n\t\t\t\t\t\t</el-radio-button>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</row-frame>\n\t\t\t</row-span>\n\t\t\t<row-span :span=\"1.5\">\n\t\t\t\t<row-frame width=\"100%\" title=\"step3:保存\">\n\t\t\t\t\t<el-dropdown @command=\"saveCommand\" type=\"primary\" trigger=\"click\" style=\"line-height:28px\">\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" :disabled=\"!enable\">\n\t\t\t\t\t\t\t保存到\n\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t<template #dropdown>\n\t\t\t\t\t\t\t<el-dropdown-menu>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"toolBox\">主播端</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"web\">观众端</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"both\">主播&观众端</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"file\">文件</el-dropdown-item>\n\t\t\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-dropdown>\n\t\t\t\t</row-frame>\n\t\t\t</row-span>\n\n\t\t</row-frame>\n\t\t<row-frame width=\"100%\" title=\"这是预览\">\n\t\t\t<div class=\"list-add-btn\" style=\"top:0px\">\n\t\t\t\t<div class=\"slider\">背景亮度：\n\t\t\t\t\t<el-slider style=\"width:100px\" v-model=\"brightness\" :min=\"20\" :max=\"100\" :step=\"1\" />\n\t\t\t\t</div>\n\t\t\t\t<el-checkbox v-model=\"zoomPreview\">缩放</el-checkbox>\n\t\t\t</div>\n\t\t\t<zoom-frame :allow-zoom=\"zoomPreview\" class=\"zoom-frame\" :styles=\"{width: '100%',height: '60px'}\">\n\t\t\t\t<div v-if=\"!enable\">么得内容，请先在上方导入样式</div>\n\t\t\t\t<div v-else-if=\"!currentStyle\">请先在上选择要编辑的弹幕类型</div>\n\t\t\t\t<div v-else-if=\"!currentWidgets.length\">请在左下添加组件</div>\n\t\t\t\t<danmaku-row style=\"white-space:nowrap\" v-else :setting=\"currentStyle\" :config-mode=\"true\" :danmaku=\"mockDanmaku\" />\n\t\t\t</zoom-frame>\n\t\t</row-frame>\n\t\t<row-frame :flex=\"true\" width=\"100%\" style=\"margin-bottom:0px\">\n\t\t\t<row-span :span=\"4\">\n\t\t\t\t<row-frame width=\"100%\" title=\"组件列表\">\n\t\t\t\t\t<div class=\"list-add-btn\" style=\"top:-10px\">\n\t\t\t\t\t\t<el-dropdown :max-height=\"200\" trigger=\"hover\">\n\t\t\t\t\t\t\t<el-button type=\"text\" :disabled=\"!currentStyle\">添加</el-button>\n\t\t\t\t\t\t\t<template #dropdown>\n\t\t\t\t\t\t\t\t<el-dropdown-menu>\n\t\t\t\t\t\t\t\t\t<el-dropdown-item v-show=\"!(widget.widgetOptions.avaliable.length&&!widget.widgetOptions.avaliable.includes(styleType))\" v-for=\"widget in widgets\" style=\"width:150px\" :key=\"widget.id\" @click=\"addWidget(widget)\">\n\t\t\t\t\t\t\t\t\t\t{{widget.label}}\n\t\t\t\t\t\t\t\t\t</el-dropdown-item>\n\t\t\t\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<base-list style=\"height:290px\" :list=\"currentWidgets\" :selected=\"currentWidget\" :action=\"action\" />\n\t\t\t\t</row-frame>\n\t\t\t</row-span>\n\t\t\t<row-span :span=\"8\">\n\t\t\t\t<row-frame width=\"100%\" title=\"设置参数\">\n\t\t\t\t\t<div v-show=\"widgetSelected\" class=\"list-add-btn\" style=\"top:0px;left:60px\">\n\t\t\t\t\t\t当前设置对象：{{currentWidget.label}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"list-add-btn\" style=\"top:-10px\">\n\t\t\t\t\t\t<el-button type=\"text\" :disabled=\"!widgetSelected\" @click=\"styleDialog=true;generateList()\">拉取样式</el-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"content\" style=\"height:290px;overflow-y:auto\">\n\t\t\t\t\t\t<vue-form :form-footer=\"{show:false}\" v-model=\"currentWidget.value\" v-if=\"widgets[currentWidget.labelEn]\" :schema=\"widgets[currentWidget.labelEn].styleForm\" />\n\t\t\t\t\t\t<div style=\"position:absolute;left:50%;top:50%;transform:translateX(-50%)\" v-else>右方选择组件</div>\n\t\t\t\t\t</div>\n\t\t\t\t</row-frame>\n\t\t\t</row-span>\n\t\t</row-frame>\n\t</content-frame>\n\t<el-dialog title=\"样式拉取(尽量用于拉取相同组件的样式，对于不同组件可能会出错)\" v-model=\"styleDialog\">\n\t\t<el-cascader :options=\"styleOption\" v-model=\"styleOptionValue\" @change=\"getStyle\" placeholder=\"请选择拉取样式\" />\n\t</el-dialog>\n</template>\n\n<script lang=\"ts\">\nimport {\n\ttypeOptions,\n\tstyleConfig\n} from \"@front/components/danmakuFlow/utils/data\";\nimport zoomFrame from \"@front/util_component/frames/zoomFrame.vue\";\nimport baseList from \"@front/components/base/list/base.vue\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { defineComponent } from \"vue\";\nimport { mapGetters } from \"vuex\";\nimport { randomId } from \"@front/util_function/base\";\nimport { loadAsText } from \"@front/util_function/file\";\nimport { toJSON } from \"@front/util_function/exportTo\";\nimport widgets from \"@front/components/danmakuFlow/widgets\";\nimport danmakuRow from \"@front/components/danmakuFlow/danmakuRow.vue\";\nimport { getMockByType } from \"@front/views/danmakuSetting/mock\";\nimport VueForm from \"@lljj/vue3-form-element\";\nimport { ElMessage } from \"element-plus\";\nimport { hint } from \"./qa\";\nexport default defineComponent({\n\tname: \"danmakuStyleConfig\",\n\tcomponents: { zoomFrame, baseList, danmakuRow, VueForm },\n\tdata() {\n\t\tconst currentWidgets: Array<any> = [];\n\t\tconst styleOption: Array<any> = [];\n\t\tconst styleOptionValue: Array<any> = [];\n\t\treturn {\n\t\t\thint: hint(),\n\t\t\tzoomPreview: true,\n\t\t\tstyleDialog: false, // 拉取样式选框\n\t\t\tstyleOption, // 拉取样式菜单\n\t\t\tstyleOptionValue, // 拉取样式缓存用\n\t\t\tstyleType: \"\",\n\t\t\tstyles: \"\",\n\t\t\twidgets,\n\t\t\tcurrentWidgets, // 当前弹幕类型里的组件列表\n\t\t\tcurrentStyle: false, // 当前弹幕类型设置\n\t\t\tcurrentWidget: {}, // 当前编辑的组件\n\t\t\tbrightness: 50,\n\t\t\taction: [\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-setting\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.selectWidget\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-top\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.moveWidget(-1)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-bottom\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.moveWidget(1)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-close\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.removeWidget\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters([\"danmakuProfile\"]),\n\t\ttypeOptions,\n\t\tmockDanmaku(): any {\n\t\t\t// @ts-ignore\n\t\t\treturn getMockByType(this.styleType);\n\t\t},\n\t\tenable(): boolean {\n\t\t\treturn Boolean(this.styles);\n\t\t},\n\t\twidgetSelected(): boolean {\n\t\t\t// @ts-ignore\n\t\t\treturn Boolean(this.currentWidget?.id);\n\t\t}\n\t},\n\twatch: {\n\t\tstyleType(n, o) {\n\t\t\tif (!n) {\n\t\t\t\treturn;\n\t\t\t} // @ts-ignore\n\t\t\tthis.styles[n] = this.currentStyle =\n\t\t\t\tthis.styles[n] || styleConfig(this.styleType);\n\t\t},\n\t\tcurrentStyle: {\n\t\t\thandler(n, o) {\n\t\t\t\tthis.currentWidgets = n?.widgets || [];\n\t\t\t},\n\t\t\tdeep: true\n\t\t},\n\t\tcurrentWidgets: {\n\t\t\thandler(n, o) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis.currentStyle.widgets = n;\n\t\t\t\t} catch (error) {}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\tloadCommand(command: string) {\n\t\t\tconst loadFromStore = (type: string) => {\n\t\t\t\tthis.styles = cloneDeep(\n\t\t\t\t\tthis.danmakuProfile(type).settingOfType\n\t\t\t\t);\n\t\t\t\tElMessage({\n\t\t\t\t\tmessage: \"读取成功\",\n\t\t\t\t\tduration: 1500,\n\t\t\t\t\ttype: \"success\"\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst loadFromFile = async () => {\n\t\t\t\tconst res: any = await loadAsText(\".json\");\n\t\t\t\tif (res) {\n\t\t\t\t\tthis.styles = Object.assign(this.styles, JSON.parse(res));\n\t\t\t\t} else {\n\t\t\t\t\tElMessage({\n\t\t\t\t\t\tduration: 1500,\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tmessage: \"读取失败\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst reset = (type: string) => {\n\t\t\t\ttype = type.replace(\"d-\", \"\");\n\t\t\t\tfetch(`/styles/${type}.json`)\n\t\t\t\t\t.then((res: any) => res.json())\n\t\t\t\t\t.then((json: any) => {\n\t\t\t\t\t\tthis.styles = json;\n\t\t\t\t\t});\n\t\t\t};\n\t\t\tthis.styleType = \"\";\n\t\t\tthis.currentWidgets = [];\n\t\t\tthis.currentWidget = {};\n\t\t\tthis.currentStyle = false;\n\t\t\tswitch (command) {\n\t\t\t\tcase \"toolBox\":\n\t\t\t\tcase \"web\":\n\t\t\t\t\tloadFromStore(command);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"file\":\n\t\t\t\t\tloadFromFile();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d-toolBox\":\n\t\t\t\tcase \"d-web\":\n\t\t\t\t\treset(command);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tsaveCommand(command: string) {\n\t\t\tconst saveToFile = () => {\n\t\t\t\ttoJSON(\"新弹幕样式\", this.removeStyleForm(this.styles));\n\t\t\t};\n\t\t\tswitch (command) {\n\t\t\t\tcase \"toolBox\":\n\t\t\t\tcase \"web\":\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {\n\t\t\t\t\t\tstyleType: command,\n\t\t\t\t\t\tstyle: this.removeStyleForm(this.styles)\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"both\":\n\t\t\t\t\tthis.$store.state.danmakuProfile.web.settingOfType = this.$store.state.danmakuProfile.toolBox.settingOfType = this.removeStyleForm(\n\t\t\t\t\t\tthis.styles\n\t\t\t\t\t);\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"file\":\n\t\t\t\t\tsaveToFile();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tElMessage({\n\t\t\t\tmessage: \"保存成功\",\n\t\t\t\tduration: 1500,\n\t\t\t\ttype: \"success\"\n\t\t\t});\n\t\t},\n\t\taddWidget(widget: any) {\n\t\t\tif (!this.currentWidgets) {\n\t\t\t\tthis.currentWidgets = [];\n\t\t\t}\n\t\t\tconst sameWidgetNum = this.currentWidgets.filter((i: any) => {\n\t\t\t\treturn i.labelEn === widget.labelEn;\n\t\t\t}).length;\n\t\t\tconst limit = widget.widgetOptions.limit;\n\t\t\tif (limit && limit === sameWidgetNum) {\n\t\t\t\tElMessage({\n\t\t\t\t\tmessage: `${widget.label} 在本类型弹幕中只能有${limit}个`,\n\t\t\t\t\tduration: 1500,\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\toffset: 60\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.currentWidgets = [\n\t\t\t\t...this.currentWidgets,\n\t\t\t\t{\n\t\t\t\t\tid: randomId(6),\n\t\t\t\t\tlabel: widget.label,\n\t\t\t\t\tlabelEn: widget.labelEn,\n\t\t\t\t\tvalue: cloneDeep(widget.styleValue)\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\tremoveWidget(i: any) {\n\t\t\tif (this.currentWidget === i) {\n\t\t\t\tthis.currentWidget = \"\";\n\t\t\t}\n\t\t\tthis.currentWidgets = this.currentWidgets.filter((o: any) => {\n\t\t\t\treturn i !== o;\n\t\t\t});\n\t\t\treturn this.currentWidgets;\n\t\t},\n\t\tmoveWidget(o: number): any {\n\t\t\treturn (i: any) => {\n\t\t\t\tconst currentIndex = this.currentWidgets.indexOf(i);\n\t\t\t\tif (o < 0) {\n\t\t\t\t\tif (currentIndex === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.removeWidget(i).splice(currentIndex - 1, 0, i);\n\t\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (currentIndex === this.currentWidgets.length - 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.removeWidget(i).splice(currentIndex + 1, 0, i);\n\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\n\t\t\t};\n\t\t},\n\t\tselectWidget(i: any) {\n\t\t\tthis.currentWidget = i;\n\t\t},\n\t\tgenerateList() {\n\t\t\tthis.styleOptionValue = [];\n\t\t\tconst generateMenu = (style: any) => {\n\t\t\t\tconst output = [];\n\t\t\t\tfor (const option of this.typeOptions) {\n\t\t\t\t\tconst styleOfType: any = style[option.value];\n\t\t\t\t\tif (!styleOfType?.widgets.length) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tlabel: styleOfType.label || styleOfType.name,\n\t\t\t\t\t\tchildren: styleOfType.widgets.map((widget: any) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: widget.label,\n\t\t\t\t\t\t\t\tvalue: widget.value\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn output;\n\t\t\t};\n\t\t\tthis.styleOption = [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"编辑中样式\",\n\t\t\t\t\tchildren: generateMenu(this.styles)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"主播弹幕样式\",\n\t\t\t\t\tchildren: generateMenu(\n\t\t\t\t\t\tthis.danmakuProfile(\"toolBox\").settingOfType\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"观众弹幕样式\",\n\t\t\t\t\tchildren: generateMenu(\n\t\t\t\t\t\tthis.danmakuProfile(\"web\").settingOfType\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t].filter(i => i.children.length);\n\t\t},\n\t\tgetStyle(e: any) {\n\t\t\tconst value = e.pop();\n\t\t\tconst currentWidget: any = this.currentWidget;\n\t\t\tif (value) {\n\t\t\t\tfor (const key in currentWidget.value) {\n\t\t\t\t\t// if (key === \"config\") {\n\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t// }\n\t\t\t\t\tif (value[key]) {\n\t\t\t\t\t\tObject.assign(currentWidget.value[key], value[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.styleDialog = false;\n\t\t},\n\t\tremoveStyleForm(style: any) {\n\t\t\tconst newStyle = cloneDeep(style);\n\t\t\ttry {\n\t\t\t\tObject.keys(newStyle).forEach((key: any) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!newStyle[key].widgets) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewStyle[key].widgets.forEach((widget: any) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tdelete widget.styleForm;\n\t\t\t\t\t\t\t} catch (error) {}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {}\n\t\t\t\t});\n\t\t\t} catch (error) {}\n\t\t\treturn newStyle;\n\t\t}\n\t}\n});\n</script>\n\n<style scoped lang='scss'>\n@import \"@front/styles/variables.scss\";\n@import \"@front/styles/scrollbar.scss\";\n@import \"@front/styles/backgrounds.scss\";\n.zoom-frame {\n\tposition: relative;\n\tz-index: 2;\n\tbackground-color: black;\n\t&::before {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-image: url($gird);\n\t\topacity: var(--brightness);\n\t}\n}\n.list-add-btn {\n\tposition: absolute;\n\tright: 0px;\n\tdisplay: flex;\n}\n.slider {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: -10px;\n\tmargin-right: 20px;\n}\n.drop-down-item {\n\twidth: 150px;\n}\n.content {\n\t@include scrollbarDark();\n\twidth: calc(100%);\n}\n</style>\n","export const hint = (): any => {\n\treturn [\n\t\t{\n\t\t\tq: \"要咋用？导入是啥？\",\n\t\t\ta:\n\t\t\t\t\"本工具箱支持样式导入导出，并且自带了2种样式（点击导入-主播版/观众版查看）,因此你可与其他同样使用工具箱的主播共享样式，或者让DD帮你定制样式;导入并编辑样式后应用到主播/观众端就可以啦\"\n\t\t},\n\t\t{\n\t\t\tq: \"什么是主播端/观众端？有什么区别？为什么要分两种？\",\n\t\t\ta:\n\t\t\t\t\"主播端就是开播以后主播看的弹幕,观众端同上,在开发过程中我们发现a站的弹幕姬样式在主播一侧看来非常累人，显示信息不清晰，因此将样式分开设置，主播端可以把样式调整的更简约，清晰显示弹幕，观众端可以更花哨\"\n\t\t},\n\t\t{\n\t\t\tq: \"那么怎么调整样式呢？\",\n\t\t\ta:\n\t\t\t\t\"一条弹幕由多个组件组成，如头像、用户名、评论等，选择某类型弹幕后在左下方添加/删除组件,点击齿轮编辑相应组件，点击上/下箭头调整组件左右排列,样式调整需要对一些基础的html/css知识有所了解,如果不是太懂建议只调整字体、颜色等,或者随便点点看看\"\n\t\t},\n\t\t{\n\t\t\tq: \"编辑完以后咋弄？\",\n\t\t\ta:\n\t\t\t\t\"直接保存到主播端/观众端即可，如果是在直播中，弹幕样式会实时更新上去\"\n\t\t},\n\t\t{\n\t\t\tq: \"每个类型弹幕都要设置一次，好麻烦！\",\n\t\t\ta:\n\t\t\t\t\"为此我们做了样式拉取功能，例如您在“评论”类型的弹幕中调整好了用户名的样式，在“点赞”类型的弹幕中只需添加用户名的组件并选中，点击右侧的“样式拉取”即可把评论的用户名样式拉过来\"\n\t\t},\n\t\t{\n\t\t\tq: \"啊我不懂/有点麻烦/懒\",\n\t\t\ta:\n\t\t\t\t\"可以找DD或站内@<a href='http&#58&#47&#47www.acfun.cn/u/45443067' target='_blank'>ACFUN-FOSS_开源⑨课</a>进行定制(免费)\"\n\t\t}\n\t];\n};\n","\nimport {\n\ttypeOptions,\n\tstyleConfig\n} from \"@front/components/danmakuFlow/utils/data\";\nimport zoomFrame from \"@front/util_component/frames/zoomFrame.vue\";\nimport baseList from \"@front/components/base/list/base.vue\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { defineComponent } from \"vue\";\nimport { mapGetters } from \"vuex\";\nimport { randomId } from \"@front/util_function/base\";\nimport { loadAsText } from \"@front/util_function/file\";\nimport { toJSON } from \"@front/util_function/exportTo\";\nimport widgets from \"@front/components/danmakuFlow/widgets\";\nimport danmakuRow from \"@front/components/danmakuFlow/danmakuRow.vue\";\nimport { getMockByType } from \"@front/views/danmakuSetting/mock\";\nimport VueForm from \"@lljj/vue3-form-element\";\nimport { ElMessage } from \"element-plus\";\nimport { hint } from \"./qa\";\nexport default defineComponent({\n\tname: \"danmakuStyleConfig\",\n\tcomponents: { zoomFrame, baseList, danmakuRow, VueForm },\n\tdata() {\n\t\tconst currentWidgets: Array<any> = [];\n\t\tconst styleOption: Array<any> = [];\n\t\tconst styleOptionValue: Array<any> = [];\n\t\treturn {\n\t\t\thint: hint(),\n\t\t\tzoomPreview: true,\n\t\t\tstyleDialog: false, // 拉取样式选框\n\t\t\tstyleOption, // 拉取样式菜单\n\t\t\tstyleOptionValue, // 拉取样式缓存用\n\t\t\tstyleType: \"\",\n\t\t\tstyles: \"\",\n\t\t\twidgets,\n\t\t\tcurrentWidgets, // 当前弹幕类型里的组件列表\n\t\t\tcurrentStyle: false, // 当前弹幕类型设置\n\t\t\tcurrentWidget: {}, // 当前编辑的组件\n\t\t\tbrightness: 50,\n\t\t\taction: [\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-setting\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.selectWidget\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-top\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.moveWidget(-1)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-bottom\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.moveWidget(1)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: \"el-icon-close\",\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\taction: this.removeWidget\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters([\"danmakuProfile\"]),\n\t\ttypeOptions,\n\t\tmockDanmaku(): any {\n\t\t\t// @ts-ignore\n\t\t\treturn getMockByType(this.styleType);\n\t\t},\n\t\tenable(): boolean {\n\t\t\treturn Boolean(this.styles);\n\t\t},\n\t\twidgetSelected(): boolean {\n\t\t\t// @ts-ignore\n\t\t\treturn Boolean(this.currentWidget?.id);\n\t\t}\n\t},\n\twatch: {\n\t\tstyleType(n, o) {\n\t\t\tif (!n) {\n\t\t\t\treturn;\n\t\t\t} // @ts-ignore\n\t\t\tthis.styles[n] = this.currentStyle =\n\t\t\t\tthis.styles[n] || styleConfig(this.styleType);\n\t\t},\n\t\tcurrentStyle: {\n\t\t\thandler(n, o) {\n\t\t\t\tthis.currentWidgets = n?.widgets || [];\n\t\t\t},\n\t\t\tdeep: true\n\t\t},\n\t\tcurrentWidgets: {\n\t\t\thandler(n, o) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis.currentStyle.widgets = n;\n\t\t\t\t} catch (error) {}\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\tloadCommand(command: string) {\n\t\t\tconst loadFromStore = (type: string) => {\n\t\t\t\tthis.styles = cloneDeep(\n\t\t\t\t\tthis.danmakuProfile(type).settingOfType\n\t\t\t\t);\n\t\t\t\tElMessage({\n\t\t\t\t\tmessage: \"读取成功\",\n\t\t\t\t\tduration: 1500,\n\t\t\t\t\ttype: \"success\"\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst loadFromFile = async () => {\n\t\t\t\tconst res: any = await loadAsText(\".json\");\n\t\t\t\tif (res) {\n\t\t\t\t\tthis.styles = Object.assign(this.styles, JSON.parse(res));\n\t\t\t\t} else {\n\t\t\t\t\tElMessage({\n\t\t\t\t\t\tduration: 1500,\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tmessage: \"读取失败\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst reset = (type: string) => {\n\t\t\t\ttype = type.replace(\"d-\", \"\");\n\t\t\t\tfetch(`/styles/${type}.json`)\n\t\t\t\t\t.then((res: any) => res.json())\n\t\t\t\t\t.then((json: any) => {\n\t\t\t\t\t\tthis.styles = json;\n\t\t\t\t\t});\n\t\t\t};\n\t\t\tthis.styleType = \"\";\n\t\t\tthis.currentWidgets = [];\n\t\t\tthis.currentWidget = {};\n\t\t\tthis.currentStyle = false;\n\t\t\tswitch (command) {\n\t\t\t\tcase \"toolBox\":\n\t\t\t\tcase \"web\":\n\t\t\t\t\tloadFromStore(command);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"file\":\n\t\t\t\t\tloadFromFile();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d-toolBox\":\n\t\t\t\tcase \"d-web\":\n\t\t\t\t\treset(command);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tsaveCommand(command: string) {\n\t\t\tconst saveToFile = () => {\n\t\t\t\ttoJSON(\"新弹幕样式\", this.removeStyleForm(this.styles));\n\t\t\t};\n\t\t\tswitch (command) {\n\t\t\t\tcase \"toolBox\":\n\t\t\t\tcase \"web\":\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {\n\t\t\t\t\t\tstyleType: command,\n\t\t\t\t\t\tstyle: this.removeStyleForm(this.styles)\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"both\":\n\t\t\t\t\tthis.$store.state.danmakuProfile.web.settingOfType = this.$store.state.danmakuProfile.toolBox.settingOfType = this.removeStyleForm(\n\t\t\t\t\t\tthis.styles\n\t\t\t\t\t);\n\t\t\t\t\tthis.$store.commit(\"updateStyle\", {});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"file\":\n\t\t\t\t\tsaveToFile();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tElMessage({\n\t\t\t\tmessage: \"保存成功\",\n\t\t\t\tduration: 1500,\n\t\t\t\ttype: \"success\"\n\t\t\t});\n\t\t},\n\t\taddWidget(widget: any) {\n\t\t\tif (!this.currentWidgets) {\n\t\t\t\tthis.currentWidgets = [];\n\t\t\t}\n\t\t\tconst sameWidgetNum = this.currentWidgets.filter((i: any) => {\n\t\t\t\treturn i.labelEn === widget.labelEn;\n\t\t\t}).length;\n\t\t\tconst limit = widget.widgetOptions.limit;\n\t\t\tif (limit && limit === sameWidgetNum) {\n\t\t\t\tElMessage({\n\t\t\t\t\tmessage: `${widget.label} 在本类型弹幕中只能有${limit}个`,\n\t\t\t\t\tduration: 1500,\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\toffset: 60\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.currentWidgets = [\n\t\t\t\t...this.currentWidgets,\n\t\t\t\t{\n\t\t\t\t\tid: randomId(6),\n\t\t\t\t\tlabel: widget.label,\n\t\t\t\t\tlabelEn: widget.labelEn,\n\t\t\t\t\tvalue: cloneDeep(widget.styleValue)\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\tremoveWidget(i: any) {\n\t\t\tif (this.currentWidget === i) {\n\t\t\t\tthis.currentWidget = \"\";\n\t\t\t}\n\t\t\tthis.currentWidgets = this.currentWidgets.filter((o: any) => {\n\t\t\t\treturn i !== o;\n\t\t\t});\n\t\t\treturn this.currentWidgets;\n\t\t},\n\t\tmoveWidget(o: number): any {\n\t\t\treturn (i: any) => {\n\t\t\t\tconst currentIndex = this.currentWidgets.indexOf(i);\n\t\t\t\tif (o < 0) {\n\t\t\t\t\tif (currentIndex === 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.removeWidget(i).splice(currentIndex - 1, 0, i);\n\t\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (currentIndex === this.currentWidgets.length - 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.removeWidget(i).splice(currentIndex + 1, 0, i);\n\t\t\t\tthis.currentWidgets = [...this.currentWidgets];\n\t\t\t};\n\t\t},\n\t\tselectWidget(i: any) {\n\t\t\tthis.currentWidget = i;\n\t\t},\n\t\tgenerateList() {\n\t\t\tthis.styleOptionValue = [];\n\t\t\tconst generateMenu = (style: any) => {\n\t\t\t\tconst output = [];\n\t\t\t\tfor (const option of this.typeOptions) {\n\t\t\t\t\tconst styleOfType: any = style[option.value];\n\t\t\t\t\tif (!styleOfType?.widgets.length) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tlabel: styleOfType.label || styleOfType.name,\n\t\t\t\t\t\tchildren: styleOfType.widgets.map((widget: any) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: widget.label,\n\t\t\t\t\t\t\t\tvalue: widget.value\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn output;\n\t\t\t};\n\t\t\tthis.styleOption = [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"编辑中样式\",\n\t\t\t\t\tchildren: generateMenu(this.styles)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"主播弹幕样式\",\n\t\t\t\t\tchildren: generateMenu(\n\t\t\t\t\t\tthis.danmakuProfile(\"toolBox\").settingOfType\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"观众弹幕样式\",\n\t\t\t\t\tchildren: generateMenu(\n\t\t\t\t\t\tthis.danmakuProfile(\"web\").settingOfType\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t].filter(i => i.children.length);\n\t\t},\n\t\tgetStyle(e: any) {\n\t\t\tconst value = e.pop();\n\t\t\tconst currentWidget: any = this.currentWidget;\n\t\t\tif (value) {\n\t\t\t\tfor (const key in currentWidget.value) {\n\t\t\t\t\t// if (key === \"config\") {\n\t\t\t\t\t// \tcontinue;\n\t\t\t\t\t// }\n\t\t\t\t\tif (value[key]) {\n\t\t\t\t\t\tObject.assign(currentWidget.value[key], value[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.styleDialog = false;\n\t\t},\n\t\tremoveStyleForm(style: any) {\n\t\t\tconst newStyle = cloneDeep(style);\n\t\t\ttry {\n\t\t\t\tObject.keys(newStyle).forEach((key: any) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!newStyle[key].widgets) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewStyle[key].widgets.forEach((widget: any) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tdelete widget.styleForm;\n\t\t\t\t\t\t\t} catch (error) {}\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {}\n\t\t\t\t});\n\t\t\t} catch (error) {}\n\t\t\treturn newStyle;\n\t\t}\n\t}\n});\n","import { render } from \"./index.vue?vue&type=template&id=ebeb2a10&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=ebeb2a10&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-ebeb2a10\"\n\nexport default script","<template>\n\t<content-frame class=\"danmaku-setting\" :style=\"{'--brightness':brightness/100}\">\n\t\t<row-frame title=\"预览\">\n\t\t\t<div class=\"list-add-btn\" style=\"top:0px\">\n\t\t\t\t<div class=\"slider\">背景亮度：\n\t\t\t\t\t<el-slider style=\"width:100px\" v-model=\"brightness\" :min=\"20\" :max=\"100\" :step=\"1\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<row-span>\n\t\t\t\t<div class=\"danmaku-list-bg\">\n\t\t\t\t\t<flow class=\"danmaku-list\" :configMode=\"true\" :danmakuList=\"mockData\" :max=\"100\" :settings=\"settings\" />\n\t\t\t\t</div>\n\t\t\t</row-span>\n\t\t</row-frame>\n\t\t<row-frame title=\"设置对象\">\n\t\t\t<row-span>\n\t\t\t\t<el-radio-group v-model=\"settingTarget\" size=\"mini\">\n\t\t\t\t\t<el-radio-button label=\"toolBox\">主播版</el-radio-button>\n\t\t\t\t\t<el-radio-button label=\"web\">观众版</el-radio-button>\n\t\t\t\t</el-radio-group>\n\t\t\t</row-span>\n\t\t</row-frame>\n\t\t<div class=\"right-content\">\n\t\t\t<component v-model:settings=\"settings\" v-model:mockData=\"mockData\" v-for=\"(item,index) in settingBlocks\" :key=\"index\" :is=\"item\" />\n\t\t\t<el-button @click=\"save\" size=\"mini\" type=\"primary\">保存（{{{'toolBox':'主播端','web':'观众端'}[settingTarget]}}设置）</el-button>\n\t\t\t<el-button v-show=\"settingTarget==='toolBox'\" @click=\"saveSync\" size=\"mini\" type=\"primary\">保存并同步到观众端</el-button>\n\t\t</div>\n\t</content-frame>\n\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, markRaw } from \"vue\";\nimport { mapState } from \"vuex\";\nimport { initMock, getMock } from \"./../mock\";\nimport flow from \"@front/components/danmakuFlow/index.vue\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport random from \"lodash/random\";\nimport { toANY } from \"@front/util_function/type\";\nimport { rank } from \"@front/datas/room\";\nimport { settings, commonSettings } from \"@front/datas/danmaku\";\nimport { settingBlocks } from \"./settingBlocks\";\nimport { Filter } from \"@front/components/danmakuFlow/utils/common\";\nimport { ElMessage } from \"element-plus\";\nexport default defineComponent({\n\tname: \"danmakuSetting\",\n\tcomponents: { flow },\n\tdata() {\n\t\treturn {\n\t\t\tmockTimer: toANY(null),\n\t\t\tmockData: initMock(),\n\t\t\tsettingBlocks: settingBlocks().map(i => markRaw(i)),\n\t\t\tbrightness: 50,\n\t\t\tsettingTarget: \"toolBox\",\n\t\t\tsettings: settings(),\n\t\t\tcommonSettings: commonSettings(),\n\t\t\tchangeDialog: false,\n\t\t\tfilter: new Filter()\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.getProfile(this.settingTarget);\n\t\tthis.polling();\n\t},\n\tbeforeUnmount() {\n\t\tclearTimeout(this.mockTimer);\n\t},\n\tcomputed: {\n\t\t...mapState([\"danmakuSession\", \"rank\", \"danmakuProfile\"]),\n\t\ttempRank(): any {\n\t\t\treturn {\n\t\t\t\t...rank(),\n\t\t\t\thasMedal: true,\n\t\t\t\tclubName: \"ACER\"\n\t\t\t};\n\t\t}\n\t},\n\twatch: {\n\t\tsettingTarget: {\n\t\t\thandler(n, o) {\n\t\t\t\tthis.getProfile(n);\n\t\t\t}\n\t\t},\n\t\tsettings: {\n\t\t\thandler() {\n\t\t\t\tthis.resetFilter();\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\tpolling() {\n\t\t\tclearTimeout(this.mockTimer);\n\t\t\tthis.mockData = this.filter.filterUpdate(\n\t\t\t\t[...getMock(random(0, 3))],\n\t\t\t\tthis.mockData,\n\t\t\t\tthis.settings,\n\t\t\t\tthis.commonSettings,\n\t\t\t\tthis.tempRank\n\t\t\t).list;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.mockTimer = setTimeout(this.polling, random(0, 2) * 1000);\n\t\t\t});\n\t\t},\n\t\tresetFilter() {\n\t\t\tthis.filter.giftList = [];\n\t\t\tthis.filter.likeList = [];\n\t\t\tconst newMock = [...this.mockData].map((mock: any) => {\n\t\t\t\treturn { ...mock };\n\t\t\t});\n\t\t\tthis.mockData = this.filter.filter(\n\t\t\t\tnewMock,\n\t\t\t\tthis.settings,\n\t\t\t\tthis.commonSettings,\n\t\t\t\tthis.tempRank\n\t\t\t).filtered;\n\t\t},\n\t\tgetProfile(target: any) {\n\t\t\tthis.settings = cloneDeep(this.danmakuProfile[target]);\n\t\t\tthis.commonSettings =\n\t\t\t\tcloneDeep(this.$store.state.danmakuProfile.common) ||\n\t\t\t\tcommonSettings();\n\t\t},\n\t\tsave() {\n\t\t\tthis.$store.commit(\"updateSettings\", {\n\t\t\t\tsettingType: this.settingTarget,\n\t\t\t\tsetting: this.settings\n\t\t\t});\n\t\t\tElMessage({\n\t\t\t\tmessage: \"设置已保存\",\n\t\t\t\tduration: 1500,\n\t\t\t\ttype: \"success\",\n\t\t\t\toffset: 60\n\t\t\t});\n\t\t},\n\t\tsaveSync() {\n\t\t\tconst save = {\n\t\t\t\t...this.settings\n\t\t\t};\n\t\t\tdelete save.settingOfType;\n\t\t\tObject.assign(this.danmakuProfile.toolBox, save);\n\t\t\tObject.assign(this.danmakuProfile.web, save);\n\t\t\tthis.$store.commit(\"updateSettings\", {});\n\t\t\tElMessage({\n\t\t\t\tmessage: \"设置已保存并同步\",\n\t\t\t\tduration: 1500,\n\t\t\t\ttype: \"success\",\n\t\t\t\toffset: 60\n\t\t\t});\n\t\t}\n\t}\n});\n</script>\n<style scoped lang='scss'>\n@import \"@front/styles/variables.scss\";\n@import \"@front/styles/scrollbar.scss\";\n@import \"@front/styles/backgrounds.scss\";\n.danmaku-setting {\n\tposition: absolute;\n\theight: 100%;\n\t.danmaku-list-bg {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tbackground-color: black;\n\t\toverflow: hidden;\n\t\tborder: $--border-base;\n\t\tborder-radius: $--border-radius-base;\n\t\tbox-shadow: $--box-shadow-base;\n\t\t&::before {\n\t\t\tcontent: \"\";\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbackground-image: url($gird);\n\t\t\topacity: var(--brightness);\n\t\t}\n\t}\n\t.danmaku-list {\n\t\theight: 350px !important;\n\t\twidth: 100%;\n\t}\n\n\t.right-content {\n\t\t@include scrollbarDark();\n\t\twidth: 55%;\n\t\t:deep .el-checkbox-button__inner {\n\t\t\tpadding-left: 5px !important;\n\t\t\tpadding-right: 5px !important;\n\t\t}\n\t\t:deep > div {\n\t\t\twidth: 100% !important;\n\t\t}\n\t\toverflow-y: scroll;\n\t}\n}\n.disabled {\n\tcolor: $--color-text-secondary;\n}\n.list-add-btn {\n\tposition: absolute;\n\tright: 0px;\n\tdisplay: flex;\n\t.slider {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-top: -10px;\n\t\tmargin-right: 20px;\n\t}\n}\n</style>\n","<template>\n\t<row-frame title=\"一般设置\" :flex=\"true\">\n\t\t<row-span :span=\"5\">\n\t\t\t最大回滚弹幕数量\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-input-number size=\"mini\" v-model=\"setting.maxNum\" />\n\t\t</row-span>\n\t\t<span class=\"hint\">请根据机器性能自行调节</span>\n\t</row-frame>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n\tprops: {\n\t\tsettings: {\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tsetting: {\n\t\t\tget(): any {\n\t\t\t\treturn this.settings;\n\t\t\t},\n\t\t\tset(e: any) {\n\t\t\t\tthis.$emit(\"update:settings\", e);\n\t\t\t}\n\t\t}\n\t}\n});\n</script>\n\n<style scoped lang='scss'>\n</style>\n","\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n\tprops: {\n\t\tsettings: {\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tsetting: {\n\t\t\tget(): any {\n\t\t\t\treturn this.settings;\n\t\t\t},\n\t\t\tset(e: any) {\n\t\t\t\tthis.$emit(\"update:settings\", e);\n\t\t\t}\n\t\t}\n\t}\n});\n","import { render } from \"./common.vue?vue&type=template&id=3c615228&scoped=true\"\nimport script from \"./common.vue?vue&type=script&lang=ts\"\nexport * from \"./common.vue?vue&type=script&lang=ts\"\nscript.render = render\nscript.__scopeId = \"data-v-3c615228\"\n\nexport default script","<template>\n\t<row-frame title=\"过滤器\" :flex=\"true\">\n\t\t<row-span :span=\"3\">\n\t\t\t开启过滤\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch v-model=\"setting.filter.open\" />\n\t\t</row-span>\n\t\t<!-- <row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t游客过滤\n\t\t</row-span> -->\n\t\t<!-- <row-span :span=\"3\">\n\t\t\t<el-switch v-model=\"setting.filter.visitor\" :disabled=\"!setting.filter.open\" />\n\t\t</row-span> -->\n\t</row-frame>\n\t<row-frame :flex=\"true\">\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t牌子过滤\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch v-model=\"setting.filter.clubOnly\" :disabled=\"!setting.filter.open\" />\n\t\t</row-span>\n\t\t<row-span :class=\"{disabled:!(setting.filter.open)}\" :span=\"3\">\n\t\t\t等级过滤\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-input-number :disabled=\"!(setting.filter.open)\" style=\"margin-left:8px\" v-model=\"setting.clubLevel\" :min=\"0\" :step=\"1\" size=\"mini\" />\n\t\t</row-span>\n\t\t<div class=\"hint\">牌子过滤：只显示挂主播牌子的弹幕（主播没牌子则不生效）；<br>\n\t\t\t等级过滤：只显示大于一定等级的牌子的弹幕</div>\n\t</row-frame>\n\t<row-frame :flex=\"true\">\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t黑名单\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.blackList\" />\n\t\t</row-span>\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t关键词屏蔽\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.keyword\" />\n\t\t</row-span>\n\t</row-frame>\n\t<row-frame :flex=\"true\">\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t弹幕显示\n\t\t</row-span>\n\t\t<row-span :span=\"9\" v-show=\"setting.filter.blackList\">\n\t\t\t<el-select :disabled=\"!setting.filter.open\" v-model=\"setting.filter.types\" multiple size=\"mini\" style=\"width:100%\" placeholder=\"多选显示弹幕类型\">\n\t\t\t\t<el-option v-for=\"type in typeOptions\" :label=\"type.label\" :value=\"type.value\" :key=\"type.value\" />\n\t\t\t</el-select>\n\t\t</row-span>\n\t</row-frame>\n\t<row-frame title=\"弹幕合并\" :flex=\"true\">\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t礼物连击\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.combineGift\" />\n\t\t</row-span>\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t点赞\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.combineLike\" />\n\t\t</row-span>\n\t</row-frame>\n\t<row-frame title=\"\" :flex=\"true\">\n\t\t<row-span :span=\"3\" :class=\"{disabled:!setting.filter.open}\">\n\t\t\t进入直播间\n\t\t</row-span>\n\t\t<row-span :span=\"3\">\n\t\t\t<el-switch :disabled=\"!setting.filter.open\" v-model=\"setting.filter.combineEnter\" />\n\t\t</row-span>\n\t\t<div class=\"hint\">合并：针对一定时期内相同用户发出的相同类型弹幕进行合并</div>\n\t</row-frame>\n\n</template>\n\n<script lang=\"ts\">\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n\tprops: {\n\t\tsettings: {\n\t\t\trequired: true\n\t\t},\n\t\tmockData: {\n\t\t\tdefault: () => {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\ttypeOptions,\n\t\tsetting: {\n\t\t\tget(): any {\n\t\t\t\treturn this.settings;\n\t\t\t},\n\t\t\tset(e: any) {\n\t\t\t\tthis.$emit(\"update:settings\", e);\n\t\t\t}\n\t\t}\n\t}\n});\n</script>\n","\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n\tprops: {\n\t\tsettings: {\n\t\t\trequired: true\n\t\t},\n\t\tmockData: {\n\t\t\tdefault: () => {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\ttypeOptions,\n\t\tsetting: {\n\t\t\tget(): any {\n\t\t\t\treturn this.settings;\n\t\t\t},\n\t\t\tset(e: any) {\n\t\t\t\tthis.$emit(\"update:settings\", e);\n\t\t\t}\n\t\t}\n\t}\n});\n","import { render } from \"./filter.vue?vue&type=template&id=51e16fca\"\nimport script from \"./filter.vue?vue&type=script&lang=ts\"\nexport * from \"./filter.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","// import settingTarget from \"./settingTarget.vue\";\nimport common from \"./common.vue\";\n// import combine from \"./combine.vue\";\nimport filter from \"./filter.vue\";\nexport const settingBlocks = (): Array<any> => {\n\treturn [common, filter];\n};\n","\nimport { defineComponent, markRaw } from \"vue\";\nimport { mapState } from \"vuex\";\nimport { initMock, getMock } from \"./../mock\";\nimport flow from \"@front/components/danmakuFlow/index.vue\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport random from \"lodash/random\";\nimport { toANY } from \"@front/util_function/type\";\nimport { rank } from \"@front/datas/room\";\nimport { settings, commonSettings } from \"@front/datas/danmaku\";\nimport { settingBlocks } from \"./settingBlocks\";\nimport { Filter } from \"@front/components/danmakuFlow/utils/common\";\nimport { ElMessage } from \"element-plus\";\nexport default defineComponent({\n\tname: \"danmakuSetting\",\n\tcomponents: { flow },\n\tdata() {\n\t\treturn {\n\t\t\tmockTimer: toANY(null),\n\t\t\tmockData: initMock(),\n\t\t\tsettingBlocks: settingBlocks().map(i => markRaw(i)),\n\t\t\tbrightness: 50,\n\t\t\tsettingTarget: \"toolBox\",\n\t\t\tsettings: settings(),\n\t\t\tcommonSettings: commonSettings(),\n\t\t\tchangeDialog: false,\n\t\t\tfilter: new Filter()\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.getProfile(this.settingTarget);\n\t\tthis.polling();\n\t},\n\tbeforeUnmount() {\n\t\tclearTimeout(this.mockTimer);\n\t},\n\tcomputed: {\n\t\t...mapState([\"danmakuSession\", \"rank\", \"danmakuProfile\"]),\n\t\ttempRank(): any {\n\t\t\treturn {\n\t\t\t\t...rank(),\n\t\t\t\thasMedal: true,\n\t\t\t\tclubName: \"ACER\"\n\t\t\t};\n\t\t}\n\t},\n\twatch: {\n\t\tsettingTarget: {\n\t\t\thandler(n, o) {\n\t\t\t\tthis.getProfile(n);\n\t\t\t}\n\t\t},\n\t\tsettings: {\n\t\t\thandler() {\n\t\t\t\tthis.resetFilter();\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\tpolling() {\n\t\t\tclearTimeout(this.mockTimer);\n\t\t\tthis.mockData = this.filter.filterUpdate(\n\t\t\t\t[...getMock(random(0, 3))],\n\t\t\t\tthis.mockData,\n\t\t\t\tthis.settings,\n\t\t\t\tthis.commonSettings,\n\t\t\t\tthis.tempRank\n\t\t\t).list;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.mockTimer = setTimeout(this.polling, random(0, 2) * 1000);\n\t\t\t});\n\t\t},\n\t\tresetFilter() {\n\t\t\tthis.filter.giftList = [];\n\t\t\tthis.filter.likeList = [];\n\t\t\tconst newMock = [...this.mockData].map((mock: any) => {\n\t\t\t\treturn { ...mock };\n\t\t\t});\n\t\t\tthis.mockData = this.filter.filter(\n\t\t\t\tnewMock,\n\t\t\t\tthis.settings,\n\t\t\t\tthis.commonSettings,\n\t\t\t\tthis.tempRank\n\t\t\t).filtered;\n\t\t},\n\t\tgetProfile(target: any) {\n\t\t\tthis.settings = cloneDeep(this.danmakuProfile[target]);\n\t\t\tthis.commonSettings =\n\t\t\t\tcloneDeep(this.$store.state.danmakuProfile.common) ||\n\t\t\t\tcommonSettings();\n\t\t},\n\t\tsave() {\n\t\t\tthis.$store.commit(\"updateSettings\", {\n\t\t\t\tsettingType: this.settingTarget,\n\t\t\t\tsetting: this.settings\n\t\t\t});\n\t\t\tElMessage({\n\t\t\t\tmessage: \"设置已保存\",\n\t\t\t\tduration: 1500,\n\t\t\t\ttype: \"success\",\n\t\t\t\toffset: 60\n\t\t\t});\n\t\t},\n\t\tsaveSync() {\n\t\t\tconst save = {\n\t\t\t\t...this.settings\n\t\t\t};\n\t\t\tdelete save.settingOfType;\n\t\t\tObject.assign(this.danmakuProfile.toolBox, save);\n\t\t\tObject.assign(this.danmakuProfile.web, save);\n\t\t\tthis.$store.commit(\"updateSettings\", {});\n\t\t\tElMessage({\n\t\t\t\tmessage: \"设置已保存并同步\",\n\t\t\t\tduration: 1500,\n\t\t\t\ttype: \"success\",\n\t\t\t\toffset: 60\n\t\t\t});\n\t\t}\n\t}\n});\n","import { render } from \"./index.vue?vue&type=template&id=0644e57c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0644e57c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0644e57c\"\n\nexport default script","\nimport { defineComponent, markRaw } from \"vue\";\nimport styleConfig from \"./style/index.vue\";\nimport danmakuConfig from \"./config/index.vue\";\nexport default defineComponent({\n\tname: \"danmakuConfig\",\n\tdata() {\n\t\treturn {\n\t\t\tcomponents: {\n\t\t\t\tfirst: markRaw(danmakuConfig),\n\t\t\t\tsecond: markRaw(styleConfig)\n\t\t\t},\n\t\t\tactiveTo: \"first\"\n\t\t};\n\t}\n});\n","import { render } from \"./index.vue?vue&type=template&id=66a0b505&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=66a0b505&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-66a0b505\"\n\nexport default script","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=66a0b505&scoped=true&lang=scss\"","<template>\n\t<div class=\"zoomFrame\" :style=\"styles\">\n\t\t<div class=\"zoomContent\" :style=\"dynamic\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n\tname: \"frame\",\n\tprops: {\n\t\tallowZoom: {\n\t\t\tdefault: true\n\t\t},\n\t\tzoomMax: {\n\t\t\tdefault: 1000\n\t\t},\n\t\tstyles: {\n\t\t\tdefault: {}\n\t\t}\n\t},\n\tdata() {\n\t\tconst parentResizeListener: any = null;\n\t\tconst childResizeListener: any = null;\n\t\treturn {\n\t\t\tparentResizeListener,\n\t\t\tchildResizeListener,\n\t\t\tparentWidth: 100,\n\t\t\tparentHeight: 100,\n\t\t\tchildWidth: 100,\n\t\t\tchildHeight: 100\n\t\t};\n\t},\n\tmounted() {\n\t\tconst child = this.$el.firstChild;\n\t\tconst parent = this.$el;\n\t\tthis.getActualWidth(parent, child);\n\t\t// @ts-ignore\n\t\tthis.childResizeListener = new ResizeObserver(() => {\n\t\t\tthis.getActualWidth(parent, child);\n\t\t}).observe(child);\n\t\t// @ts-ignore\n\t\tthis.parentResizeListener = new ResizeObserver(() => {\n\t\t\tthis.getActualWidth(parent, child);\n\t\t}).observe(parent);\n\t},\n\tcomputed: {\n\t\tdynamic(): any {\n\t\t\tif (this.allowZoom) {\n\t\t\t\tconst xZoom = this.childWidth / this.parentWidth;\n\t\t\t\tconst yZoom = this.childHeight / this.parentHeight;\n\t\t\t\tlet zoom = 0.9 / Math.max(xZoom, yZoom);\n\t\t\t\t// console.log(zoom)\n\t\t\t\tif (zoom > this.zoomMax) {\n\t\t\t\t\tzoom = this.zoomMax;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttransform: `translateX(-50%) translateY(-50%) scaleX(${zoom}) scaleY(${zoom})`\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\ttransform:\n\t\t\t\t\t\t\"translateX(-50%) translateY(-50%) scaleX(1) scaleY(1)\"\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tgetActualWidth(parent: any, child: any) {\n\t\t\tthis.parentWidth = parent.getBoundingClientRect().width;\n\t\t\tthis.parentHeight = parent.getBoundingClientRect().height;\n\t\t\tthis.childWidth = child.offsetWidth;\n\t\t\tthis.childHeight = child.offsetHeight;\n\t\t}\n\t}\n});\n</script>\n\n<style scoped lang=\"scss\">\n.zoomFrame {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\t.zoomContent {\n\t\tposition: absolute;\n\t\ttransition: all 0.15s;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\ttransform: translateX(-50%) translateY(-50%);\n\t}\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n\tname: \"frame\",\n\tprops: {\n\t\tallowZoom: {\n\t\t\tdefault: true\n\t\t},\n\t\tzoomMax: {\n\t\t\tdefault: 1000\n\t\t},\n\t\tstyles: {\n\t\t\tdefault: {}\n\t\t}\n\t},\n\tdata() {\n\t\tconst parentResizeListener: any = null;\n\t\tconst childResizeListener: any = null;\n\t\treturn {\n\t\t\tparentResizeListener,\n\t\t\tchildResizeListener,\n\t\t\tparentWidth: 100,\n\t\t\tparentHeight: 100,\n\t\t\tchildWidth: 100,\n\t\t\tchildHeight: 100\n\t\t};\n\t},\n\tmounted() {\n\t\tconst child = this.$el.firstChild;\n\t\tconst parent = this.$el;\n\t\tthis.getActualWidth(parent, child);\n\t\t// @ts-ignore\n\t\tthis.childResizeListener = new ResizeObserver(() => {\n\t\t\tthis.getActualWidth(parent, child);\n\t\t}).observe(child);\n\t\t// @ts-ignore\n\t\tthis.parentResizeListener = new ResizeObserver(() => {\n\t\t\tthis.getActualWidth(parent, child);\n\t\t}).observe(parent);\n\t},\n\tcomputed: {\n\t\tdynamic(): any {\n\t\t\tif (this.allowZoom) {\n\t\t\t\tconst xZoom = this.childWidth / this.parentWidth;\n\t\t\t\tconst yZoom = this.childHeight / this.parentHeight;\n\t\t\t\tlet zoom = 0.9 / Math.max(xZoom, yZoom);\n\t\t\t\t// console.log(zoom)\n\t\t\t\tif (zoom > this.zoomMax) {\n\t\t\t\t\tzoom = this.zoomMax;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttransform: `translateX(-50%) translateY(-50%) scaleX(${zoom}) scaleY(${zoom})`\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\ttransform:\n\t\t\t\t\t\t\"translateX(-50%) translateY(-50%) scaleX(1) scaleY(1)\"\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tgetActualWidth(parent: any, child: any) {\n\t\t\tthis.parentWidth = parent.getBoundingClientRect().width;\n\t\t\tthis.parentHeight = parent.getBoundingClientRect().height;\n\t\t\tthis.childWidth = child.offsetWidth;\n\t\t\tthis.childHeight = child.offsetHeight;\n\t\t}\n\t}\n});\n","import { render } from \"./zoomFrame.vue?vue&type=template&id=99b91f76&scoped=true\"\nimport script from \"./zoomFrame.vue?vue&type=script&lang=ts\"\nexport * from \"./zoomFrame.vue?vue&type=script&lang=ts\"\n\nimport \"./zoomFrame.vue?vue&type=style&index=0&id=99b91f76&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-99b91f76\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=0644e57c&scoped=true&lang=scss\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./zoomFrame.vue?vue&type=style&index=0&id=99b91f76&scoped=true&lang=scss\"","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=ebeb2a10&scoped=true&lang=scss\""],"sourceRoot":""}