{"version":3,"sources":["webpack:///./src/electron_browser/views/login/index.vue?4d40","webpack:///./src/electron_browser/views/login/index.vue","webpack:///./src/electron_browser/util_function/cookies.ts","webpack:///./src/electron_browser/components/system/topbars/base.vue","webpack:///./src/electron_browser/components/system/topbars/base.vue?04ad","webpack:///./src/electron_browser/components/system/topbars/base.vue?6d73","webpack:///./src/electron_browser/views/login/index.vue?7103","webpack:///./src/electron_browser/views/login/index.vue?0842","webpack:///./src/electron_browser/components/system/topbars/base.vue?67d2"],"names":["id","class","src","name","mode","welcome","loginTexts","welcomeLogo","welcomeLogoKey","welcomeText","userData","account","disabled","logining","login","placeholder","type","password","disclaimerCheck","disclaimerDialog","keepLogined","loginDisabled","key","loginText","custom-class","title","footer","size","disclaimer","common","version","Cookies","value","localStorage","setItem","getItem","minimize","close","HandlerMoving","components","methods","render","__scopeId","topbarBase","loginFailedText","computed","this","$store","state","api","streamStatus","step","getCookie","dispatch","then","autoLogin","res","danmakuProfile","general","streamToolEnable","streamToolPath","sessionStorage","validation","setCookie","String","Math","random","setTimeout","$router","replace","catch","err","console","error","get","JSON","parse","set","stringify"],"mappings":"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","file":"js/chunk-5680e45f.a4b937c4.js","sourcesContent":["export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=2ebee0d7&lang=scss&scoped=true\"","<template>\n\t<div id=\"login\">\n\t\t<topbar-base class=\"topbar\" />\n\t\t<transition name=\"fade\" mode=\"out-in\">\n\t\t\t<div class=\"panel\" v-if=\"!welcome\">\n\t\t\t\t<hero-base class=\"hero\" />\n\t\t\t\t<div class=\"form\">\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<el-input v-model=\"userData.account\" :disabled=\"logining\" @keypress.enter=\"login\" placeholder=\"A站账号手机号/邮箱\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<el-input type=\"password\" v-model=\"userData.password\" :disabled=\"logining\" @keypress.enter=\"login\" placeholder=\"A站密码\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row sep\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<el-checkbox class=\"logCheck\" v-model=\"userData.disclaimerCheck\" :disabled=\"logining\" />\n\t\t\t\t\t\t\t同意 ><el-button type=\"text\" class=\"buttonText\" @click=\"disclaimerDialog = true\" :disabled=\"logining\">免责声明\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<el-checkbox class=\"logCheck\" v-model=\"userData.keepLogined\" :disabled=\"logining\" />\n\t\t\t\t\t\t\t保持登录\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<el-button type=\"primary\" :disabled=\"loginDisabled\" class=\"logBtn\" @click=\"login\">登陆</el-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row logText\">\n\t\t\t\t\t\t<transition name=\"fade\" mode=\"out-in\">\n\t\t\t\t\t\t\t<div :key=\"loginText\">{{ loginText }}</div>\n\t\t\t\t\t\t</transition>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"welcome\" v-else>\n\t\t\t\t<img class=\"welcomeLogo\" :src=\"`${loginTexts.welcomeLogo}?a=${welcomeLogoKey}`\" />\n\t\t\t\t<div class=\"welcomeText\">{{ loginTexts.welcomeText }}</div>\n\t\t\t</div>\n\t\t</transition>\n\t\t<footer-base class=\"foter right\" />\n\t\t<el-dialog custom-class=\"dialogBase\" title=\"免责声明\" v-model=\"disclaimerDialog\">\n\t\t\t<div>{{ loginTexts.disclaimer }}</div>\n\t\t\t<template #footer>\n\t\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"\n\t\t\t\t\t\tuserData.disclaimerCheck = true;\n\t\t\t\t\t\tdisclaimerDialog = false;\n\t\t\t\t\t\">我同意</el-button>\n\t\t\t</template>\n\t\t</el-dialog>\n\t\t<img class=\"acgirl\" src=\"/imgs/common/welcome.png\" />\n\t\t<div class=\"foter left\">软件版本号：{{common.version}}</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Cookies from \"@front/util_function/cookies\";\nimport topbarBase from \"@front/components/system/topbars/base.vue\";\nimport {\n\tbackendRestart,\n\tloadConfig,\n\tlaunch\n} from \"@front/util_function/system\";\nimport { assign } from \"@front/util_function/base\";\nimport { isOnline } from \"@front/api/server\";\nimport { login as loginTexts, common } from \"@front/texts\";\nexport default defineComponent({\n\tname: \"login\",\n\tcomponents: {\n\t\ttopbarBase\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuserData: {\n\t\t\t\taccount: \"\",\n\t\t\t\tpassword: \"\",\n\t\t\t\tkeepLogined: false,\n\t\t\t\tdisclaimerCheck: false\n\t\t\t},\n\t\t\tcommon: common(),\n\t\t\tdisclaimerDialog: false,\n\t\t\tlogining: false,\n\t\t\tloginFailedText: \"\",\n\t\t\twelcome: false,\n\t\t\twelcomeLogoKey: \"111\"\n\t\t};\n\t},\n\tcomputed: {\n\t\tloginTexts,\n\t\tapi(): any {\n\t\t\treturn this.$store.state.api;\n\t\t},\n\t\tloginDisabled(): boolean {\n\t\t\treturn (\n\t\t\t\t!this.userData.account ||\n\t\t\t\t!this.userData.password ||\n\t\t\t\t!this.userData.disclaimerCheck ||\n\t\t\t\tthis.logining ||\n\t\t\t\tthis.$store.state.streamStatus.step === \"offline\"\n\t\t\t);\n\t\t},\n\t\tloginText(): string {\n\t\t\tif (this.logining) {\n\t\t\t\treturn \"登陆中...\";\n\t\t\t}\n\t\t\tif (this.loginFailedText) {\n\t\t\t\treturn `登陆失败： ${this.loginFailedText}`;\n\t\t\t}\n\t\t\tif (this.$store.state.streamStatus.step !== \"offline\") {\n\t\t\t\treturn \"服务端已连接\";\n\t\t\t}\n\t\t\treturn \"服务端离线,请尝试关闭工具箱并右键以管理员权限打开\";\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.getCookie();\n\t\tthis.$store.dispatch(\"startServe\").then(() => {\n\t\t\tthis.autoLogin();\n\t\t});\n\t\tloadConfig().then((res: any) => {\n\t\t\tif (res) {\n\t\t\t\tassign(this.$store.state.danmakuProfile, res);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tres?.general?.streamToolEnable &&\n\t\t\t\tres?.general?.streamToolPath\n\t\t\t) {\n\t\t\t\tlaunch(res?.general?.streamToolPath);\n\t\t\t}\n\t\t});\n\t},\n\tmethods: {\n\t\tautoLogin(): void {\n\t\t\tif (\n\t\t\t\tthis.getCookie() &&\n\t\t\t\tthis.userData.keepLogined &&\n\t\t\t\tsessionStorage.getItem(\"firstTime\") !== \"false\"\n\t\t\t) {\n\t\t\t\tthis.login();\n\t\t\t}\n\t\t},\n\t\tlogin() {\n\t\t\tif (!isOnline()) {\n\t\t\t\tthis.$store\n\t\t\t\t\t.dispatch(\"startServe\")\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.login();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error: any) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tbackendRestart();\n\t\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.logining = true;\n\t\t\tif (!this.validation()) {\n\t\t\t\tthis.logining = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store\n\t\t\t\t.dispatch(\"login\", this.userData)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.$store.state.userData = this.userData;\n\t\t\t\t\tsessionStorage.setItem(\"logined\", \"true\");\n\t\t\t\t\tsessionStorage.setItem(\"firstTime\", \"false\");\n\t\t\t\t\tif (this.userData.keepLogined) {\n\t\t\t\t\t\tthis.setCookie();\n\t\t\t\t\t}\n\t\t\t\t\tthis.welcomeLogoKey = String(Math.random());\n\t\t\t\t\tthis.welcome = true;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.$router.replace(\"dashboard\");\n\t\t\t\t\t\tthis.welcome = false;\n\t\t\t\t\t\tthis.logining = false;\n\t\t\t\t\t}, 4000);\n\t\t\t\t})\n\t\t\t\t.catch((err: any) => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthis.logining = false;\n\t\t\t\t\tthis.welcome = false;\n\t\t\t\t\tthis.loginFailedText = err;\n\t\t\t\t\t// backendRestart();\n\t\t\t\t});\n\t\t},\n\t\tgetCookie() {\n\t\t\tconst userData = Cookies.get(\"userData\");\n\t\t\tif (!userData) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.userData = JSON.parse(userData);\n\t\t\treturn true;\n\t\t},\n\t\tsetCookie() {\n\t\t\tCookies.set(\"userData\", JSON.stringify(this.userData));\n\t\t},\n\t\tvalidation() {\n\t\t\tif (\n\t\t\t\t!this.userData.account ||\n\t\t\t\t!this.userData.password ||\n\t\t\t\t!this.userData.disclaimerCheck\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@front/styles/variables.scss\";\n#login {\n\twidth: 100%;\n\theight: 100%;\n\tfont-size: $--font-size-base;\n\tcolor: rgba($color: white, $alpha: 0.9);\n\tbackground-color: $--color-primary;\n\tbox-shadow: $--box-shadow-dark;\n\tborder-radius: $--border-radius-small;\n\t.topbar {\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t}\n\t.welcome {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%) translateY(-50%);\n\t\tuser-select: none;\n\t\ttext-align: center;\n\t\t.welcomeLogo {\n\t\t\twidth: 200px;\n\t\t\tmargin-top: -200px;\n\t\t\tpointer-events: none;\n\t\t}\n\t\t.welcomeText {\n\t\t\ttext-align: center;\n\t\t\tpadding: 24px 0px;\n\t\t\tfont-size: $--font-size-extra-large;\n\t\t}\n\t}\n\t.panel {\n\t\tposition: absolute;\n\t\ttop: 215px;\n\t\tleft: 120px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tz-index: 100;\n\t\t.hero {\n\t\t\tposition: fixed;\n\t\t\tleft: 425px;\n\t\t\ttop: 121px;\n\t\t\twidth: calc(100vw - 645px);\n\t\t}\n\t\t.form {\n\t\t\tpadding: 24px 0px;\n\t\t\theight: 300px;\n\t\t\twidth: 300px;\n\t\t\t.row {\n\t\t\t\tpadding: 6px 0px;\n\t\t\t\t.logBtn {\n\t\t\t\t\twidth: 300px;\n\t\t\t\t\theight: 42px;\n\t\t\t\t\tbackground-color: $--color-primary-light-3;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tbackground-color: $--color-primary-light-5;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t&.sep {\n\t\t\t\t\tdisplay: flex !important;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tuser-select: none;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&.logText {\n\t\t\t\tpadding: 16px 0px;\n\t\t\t\tuser-select: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tword-break: break-all;\n\t\t\t}\n\n\t\t\t.buttonText {\n\t\t\t\tcolor: $--color-primary-light-3 !important;\n\t\t\t}\n\t\t}\n\t}\n}\n.foter {\n\tposition: absolute;\n\tbottom: 0px;\n\tfont-size: $--font-size-extra-small;\n\tcolor: rgba($color: white, $alpha: 0.5);\n\tpadding: 16px 0px;\n\t&.left {\n\t\tleft: 10px;\n\t\ttext-align: left;\n\t}\n\t&.right {\n\t\tright: 10px;\n\t\ttext-align: right;\n\t}\n}\n.acgirl {\n\tposition: absolute;\n\tright: 0px;\n\tbottom: 60px;\n}\n</style>\n","export default class Cookies {\n\tstatic set(key: string, value: string): void {\n\t\tlocalStorage.setItem(key, value);\n\t}\n\n\tstatic get(key: string): string | null {\n\t\treturn localStorage.getItem(key);\n\t}\n}\n","<template>\n\t<div id=\"topbar\">\n\t\t<div class=\"handler\">\n\t\t\t<handler-moving>\n\t\t\t\t<span class=\"el-icon-more-outline\" />\n\t\t\t</handler-moving>\n\t\t</div>\n\t\t<div class=\"button el-icon-minus\" @click=\"minimize()\" />\n\t\t<div class=\"button el-icon-close\" @click=\"close()\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, defineAsyncComponent } from \"vue\";\nimport { minimize, close } from \"@front/util_function/system\";\nconst HandlerMoving = defineAsyncComponent(() =>\n\timport(\"@front/components/system/HandlerMoving.vue\")\n);\nexport default defineComponent({\n\tname: \"topbarBase\",\n\tcomponents: {\n\t\tHandlerMoving\n\t},\n\tmethods: {\n\t\tminimize,\n\t\tclose\n\t}\n});\n</script>\n\n<style scoped lang='scss'>\n#topbar {\n\twidth: 100%;\n\theight: 24px;\n\tdisplay: flex;\n\tposition: relative;\n\ttransition: background-color 0.25s;\n\tcursor: move;\n\t&:hover {\n\t\tbackground: rgba(0, 0, 0, 0.05);\n\t}\n\t.handler {\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t\tcolor: white;\n\t}\n\t.button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tcursor: pointer;\n\t\tborder: none;\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t\tfont-size: 14px;\n\t\tcolor: white;\n\t\tborder-radius: 0px;\n\t\tpadding: 2px 8px;\n\t\tmargin: 0px;\n\t\ttransition: background-color 0.25s;\n\t\t&:hover {\n\t\t\tbackground-color: rgba(0, 0, 0, 0.25);\n\t\t}\n\t}\n}\n</style>\n","\nimport { defineComponent, defineAsyncComponent } from \"vue\";\nimport { minimize, close } from \"@front/util_function/system\";\nconst HandlerMoving = defineAsyncComponent(() =>\n\timport(\"@front/components/system/HandlerMoving.vue\")\n);\nexport default defineComponent({\n\tname: \"topbarBase\",\n\tcomponents: {\n\t\tHandlerMoving\n\t},\n\tmethods: {\n\t\tminimize,\n\t\tclose\n\t}\n});\n","import { render } from \"./base.vue?vue&type=template&id=5f1e490e&scoped=true\"\nimport script from \"./base.vue?vue&type=script&lang=ts\"\nexport * from \"./base.vue?vue&type=script&lang=ts\"\n\nimport \"./base.vue?vue&type=style&index=0&id=5f1e490e&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-5f1e490e\"\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport Cookies from \"@front/util_function/cookies\";\nimport topbarBase from \"@front/components/system/topbars/base.vue\";\nimport {\n\tbackendRestart,\n\tloadConfig,\n\tlaunch\n} from \"@front/util_function/system\";\nimport { assign } from \"@front/util_function/base\";\nimport { isOnline } from \"@front/api/server\";\nimport { login as loginTexts, common } from \"@front/texts\";\nexport default defineComponent({\n\tname: \"login\",\n\tcomponents: {\n\t\ttopbarBase\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuserData: {\n\t\t\t\taccount: \"\",\n\t\t\t\tpassword: \"\",\n\t\t\t\tkeepLogined: false,\n\t\t\t\tdisclaimerCheck: false\n\t\t\t},\n\t\t\tcommon: common(),\n\t\t\tdisclaimerDialog: false,\n\t\t\tlogining: false,\n\t\t\tloginFailedText: \"\",\n\t\t\twelcome: false,\n\t\t\twelcomeLogoKey: \"111\"\n\t\t};\n\t},\n\tcomputed: {\n\t\tloginTexts,\n\t\tapi(): any {\n\t\t\treturn this.$store.state.api;\n\t\t},\n\t\tloginDisabled(): boolean {\n\t\t\treturn (\n\t\t\t\t!this.userData.account ||\n\t\t\t\t!this.userData.password ||\n\t\t\t\t!this.userData.disclaimerCheck ||\n\t\t\t\tthis.logining ||\n\t\t\t\tthis.$store.state.streamStatus.step === \"offline\"\n\t\t\t);\n\t\t},\n\t\tloginText(): string {\n\t\t\tif (this.logining) {\n\t\t\t\treturn \"登陆中...\";\n\t\t\t}\n\t\t\tif (this.loginFailedText) {\n\t\t\t\treturn `登陆失败： ${this.loginFailedText}`;\n\t\t\t}\n\t\t\tif (this.$store.state.streamStatus.step !== \"offline\") {\n\t\t\t\treturn \"服务端已连接\";\n\t\t\t}\n\t\t\treturn \"服务端离线,请尝试关闭工具箱并右键以管理员权限打开\";\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.getCookie();\n\t\tthis.$store.dispatch(\"startServe\").then(() => {\n\t\t\tthis.autoLogin();\n\t\t});\n\t\tloadConfig().then((res: any) => {\n\t\t\tif (res) {\n\t\t\t\tassign(this.$store.state.danmakuProfile, res);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tres?.general?.streamToolEnable &&\n\t\t\t\tres?.general?.streamToolPath\n\t\t\t) {\n\t\t\t\tlaunch(res?.general?.streamToolPath);\n\t\t\t}\n\t\t});\n\t},\n\tmethods: {\n\t\tautoLogin(): void {\n\t\t\tif (\n\t\t\t\tthis.getCookie() &&\n\t\t\t\tthis.userData.keepLogined &&\n\t\t\t\tsessionStorage.getItem(\"firstTime\") !== \"false\"\n\t\t\t) {\n\t\t\t\tthis.login();\n\t\t\t}\n\t\t},\n\t\tlogin() {\n\t\t\tif (!isOnline()) {\n\t\t\t\tthis.$store\n\t\t\t\t\t.dispatch(\"startServe\")\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.login();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error: any) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tbackendRestart();\n\t\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.logining = true;\n\t\t\tif (!this.validation()) {\n\t\t\t\tthis.logining = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store\n\t\t\t\t.dispatch(\"login\", this.userData)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.$store.state.userData = this.userData;\n\t\t\t\t\tsessionStorage.setItem(\"logined\", \"true\");\n\t\t\t\t\tsessionStorage.setItem(\"firstTime\", \"false\");\n\t\t\t\t\tif (this.userData.keepLogined) {\n\t\t\t\t\t\tthis.setCookie();\n\t\t\t\t\t}\n\t\t\t\t\tthis.welcomeLogoKey = String(Math.random());\n\t\t\t\t\tthis.welcome = true;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.$router.replace(\"dashboard\");\n\t\t\t\t\t\tthis.welcome = false;\n\t\t\t\t\t\tthis.logining = false;\n\t\t\t\t\t}, 4000);\n\t\t\t\t})\n\t\t\t\t.catch((err: any) => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthis.logining = false;\n\t\t\t\t\tthis.welcome = false;\n\t\t\t\t\tthis.loginFailedText = err;\n\t\t\t\t\t// backendRestart();\n\t\t\t\t});\n\t\t},\n\t\tgetCookie() {\n\t\t\tconst userData = Cookies.get(\"userData\");\n\t\t\tif (!userData) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.userData = JSON.parse(userData);\n\t\t\treturn true;\n\t\t},\n\t\tsetCookie() {\n\t\t\tCookies.set(\"userData\", JSON.stringify(this.userData));\n\t\t},\n\t\tvalidation() {\n\t\t\tif (\n\t\t\t\t!this.userData.account ||\n\t\t\t\t!this.userData.password ||\n\t\t\t\t!this.userData.disclaimerCheck\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n});\n","import { render } from \"./index.vue?vue&type=template&id=2ebee0d7&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=2ebee0d7&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2ebee0d7\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./base.vue?vue&type=style&index=0&id=5f1e490e&scoped=true&lang=scss\""],"sourceRoot":""}