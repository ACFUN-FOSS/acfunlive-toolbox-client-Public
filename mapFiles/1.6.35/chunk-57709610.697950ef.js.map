{"version":3,"sources":["webpack:///./src/electron_browser/views/robot/ruleChain.vue?510d","webpack:///./src/electron_browser/views/robot/index.vue?0f3f","webpack:///./src/electron_browser/views/robot/index.vue","webpack:///./src/electron_browser/views/robot/ruleChain.vue","webpack:///./src/electron_browser/views/robot/ruleChain.vue?f410","webpack:///./src/electron_browser/views/robot/ruleChain.vue?a32d","webpack:///./src/electron_browser/views/robot/rule.ts","webpack:///./src/electron_browser/views/robot/index.vue?1987","webpack:///./src/electron_browser/views/robot/index.vue?5baf","webpack:///./src/electron_browser/components/danmakuFlow/utils/form.ts"],"names":["class","href","target","align","id","openVoiceFolder","getVoiceList","width","title","form-footer","robotSetting","schema","ui-schema","uiSchema","span","size","style","type","save","typeOptions","wi","label","key","value","enable","includes","allow","rules","voice-list","voices","disabled","length","preview","model-value","switchType","$event","rule","index","filter","i","getterOptions","getterOption","avaliable","voiceList","voice","addCommand","trigger","dropdown","command","name","props","modelValue","default","computed","getter","this","e","$emit","methods","push","render","__scopeId","properties","rtype","volume","minimum","maximum","speed","ignoreOwner","comboReading","giftLevel","api","apiSecret","appID","apiKey","voiceName","components","ruleChain","VueForm","danmakuProfile","toolBox","Object","assign","Array","isArray","then","res","list","on","ty","danmaku","$store","commit","message","duration","offset","stringF","others","booleanF","integerF","numberF","step","multipleOf","colorF","showAlpha","format","gradientF","fontF","backgroundImageF","selectF","options","eNum","eNumNames","forEach","undefined","enum","enumNames","degreeF","description","minItems","items","level","color"],"mappings":"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","file":"js/chunk-57709610.697950ef.js","sourcesContent":["export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ruleChain.vue?vue&type=style&index=0&id=19955e04&scoped=true&lang=scss\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=0922572e&scoped=true&lang=scss\"","<template>\r\n\t<content-frame align=\"row\" id=\"robot\">\r\n\t\t<span class=\"hint\">鸡鸡人（机器人）即tts语音，请先点击试听确定系统支持此功能 鸡鸡人的语音等待列表为10条，超出后最早的语音会被略过</span>\r\n\t\t<span class=\"hint\">鸡鸡人仅会朗读设置了规则并且通过了弹幕流过滤的弹幕，并且不会朗读纯表情评论</span>\r\n\t\t<span class=\"hint\">讯飞语音需要在<a href=\"https://passport.xfyun.cn/register\" target=\"_blank\">这里</a>注册并获取密匙</span>\r\n\t\t<span class=\"hint\">###新增音频朗读，需要将mp3格式的音频文件放在<a @click.stop=\"openVoiceFolder\" href=\"#\">这里</a>###<a\r\n\t\t\t\t@click.stop=\"getVoiceList()\" href=\"#\">刷新音频列表</a></span>\r\n\t\t<row-frame width=\"100%\" title=\"通用设置\">\r\n\t\t\t<vue-form :form-footer=\"{show:false}\" v-model=\"robotSetting\" :schema=\"schema\" :ui-schema=\"uiSchema\" />\r\n\t\t\t<row-span :span=\"4\">\r\n\t\t\t\t<el-button size=\"mini\" style=\"margin-top:-8px\" type=\"primary\" @click=\"save\">保存</el-button>\r\n\t\t\t</row-span>\r\n\r\n\t\t</row-frame>\r\n\t\t<row-frame width=\"100%\" wi v-for=\"type in typeOptions\" :title=\"type.label\" :key=\"type.value\">\r\n\t\t\t<rule-chain v-if=\"robotSetting.enable.includes(type.value)\" :allow=\"type.value\"\r\n\t\t\t\tv-model=\"robotSetting.rules[type.value]\" :voice-list=\"voices\" />\r\n\t\t\t<el-button v-if=\"robotSetting.enable.includes(type.value)\" size=\"mini\"\r\n\t\t\t\t:disabled=\"!robotSetting.rules[type.value].length\" @click=\"preview(type.value)\" style=\"margin-top:8px\">\r\n\t\t\t\t点击试听</el-button>\r\n\t\t\t<el-checkbox style=\"margin-left:8px\" :model-value=\"robotSetting.enable.includes(type.value)\"\r\n\t\t\t\t@update:model-value=\"switchType($event,type.value)\">开启</el-checkbox>\r\n\t\t</row-frame>\r\n\t</content-frame>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { robotSetting } from \"@/electron_browser/datas/aboutDanmaku\";\r\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\r\nimport { read } from \"@front/api/robot\";\r\nimport { getVoiceList, openFolder } from \"@front/util_function/system\";\r\nimport { getMockByType } from \"@front/views/danmakuSetting/mock/index\";\r\nimport ruleChain from \"./ruleChain.vue\";\r\nimport VueForm from \"@lljj/vue3-form-element\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { uiSchema, schema } from \"./rule\";\r\nexport default defineComponent({\r\n\tname: \"robot\",\r\n\tcomponents: {\r\n\t\truleChain,\r\n\t\tVueForm\r\n\t},\r\n\tdata() {\r\n\t\tconst voices: any = [];\r\n\t\treturn {\r\n\t\t\tuiSchema: uiSchema(),\r\n\t\t\tschema: schema(),\r\n\t\t\trobotSetting: robotSetting(),\r\n\t\t\tvoices\r\n\t\t};\r\n\t},\r\n\tbeforeMount() {\r\n\t\tif (this.danmakuProfile.toolBox.robotSetting) {\r\n\t\t\tthis.robotSetting = Object.assign(\r\n\t\t\t\tthis.robotSetting,\r\n\t\t\t\tcloneDeep(this.danmakuProfile.toolBox.robotSetting)\r\n\t\t\t);\r\n\t\t\tif (!Array.isArray(this.robotSetting.enable)) {\r\n\t\t\t\tthis.robotSetting.enable = [];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.getVoiceList();\r\n\t},\r\n\tcomputed: {\r\n\t\ttypeOptions,\r\n\t\t...mapState([\"danmakuProfile\"])\r\n\t},\r\n\tmethods: {\r\n\t\topenVoiceFolder() {\r\n\t\t\topenFolder(\"./voices\");\r\n\t\t},\r\n\t\tgetVoiceList() {\r\n\t\t\tgetVoiceList().then((res: any) => {\r\n\t\t\t\tthis.voices = res.list;\r\n\t\t\t});\r\n\t\t},\r\n\t\tswitchType(on: boolean, type: any) {\r\n\t\t\tthis.robotSetting.enable = this.robotSetting.enable.filter(\r\n\t\t\t\tty => ty !== type\r\n\t\t\t);\r\n\t\t\tif (on) {\r\n\t\t\t\tthis.robotSetting.enable.push(type);\r\n\t\t\t}\r\n\t\t},\r\n\t\tpreview(type: number) {\r\n\t\t\tconst danmaku = getMockByType(type);\r\n\t\t\tconst { speed, volume, rtype, api } = this.robotSetting;\r\n\t\t\tread({\r\n\t\t\t\tdanmaku,\r\n\t\t\t\tspeed,\r\n\t\t\t\tvolume,\r\n\t\t\t\trtype,\r\n\t\t\t\tapi,\r\n\t\t\t\trules: this.robotSetting.rules[type]\r\n\t\t\t});\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tthis.danmakuProfile.toolBox.robotSetting = this.robotSetting;\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/scrollbar.scss\";\r\n\r\n#robot {\r\n\tposition: absolute;\r\n\tbox-sizing: border-box;\r\n\theight: 100%;\r\n\t@include scrollbarDark();\r\n\toverflow-x: hidden;\r\n}\r\n</style>\r\n","<template>\r\n\t<span>\r\n\t\t<span class=\"rule\" v-for=\"(rule,index) in value\" :key=\"index\">\r\n\t\t\t<span class=\"el-icon-error remove\" @click=\"value = value.filter(i=>i!=rule)\" />\r\n\t\t\t<el-input style=\"width:150px;margin-right:8px;margin-top:8px\" v-model=\"rule.value\" size=\"mini\"\r\n\t\t\t\tv-if=\"rule.type=='text'\" />\r\n\t\t\t<el-select style=\"width:150px;margin-right:8px;margin-top:8px\" v-model=\"rule.value\" size=\"mini\"\r\n\t\t\t\tv-else-if=\"rule.type=='variable'\">\r\n\t\t\t\t<el-option v-for=\"getterOption in getterOptions\" v-show=\"getterOption.avaliable.includes(allow)\"\r\n\t\t\t\t\t:label=\"getterOption.label\" :key=\"getterOption.value\" :value=\"getterOption.value\" />\r\n\t\t\t</el-select>\r\n\t\t\t<el-select style=\"width:150px;margin-right:8px;margin-top:8px\" v-model=\"rule.value\" size=\"mini\" v-else>\r\n\t\t\t\t<el-option v-for=\"(voice,index) in voiceList\" :label=\"voice.label\" :key=\"index\" :value=\"voice.value\" />\r\n\t\t\t</el-select>\r\n\t\t</span>\r\n\t\t<el-dropdown @command=\"addCommand\" type=\"primary\" trigger=\"click\" style=\"line-height:28px\">\r\n\t\t\t<el-button size=\"mini\" type=\"primary\" style=\"margin-right:8px;margin-top:8px\">添加</el-button>\r\n\t\t\t<template #dropdown>\r\n\t\t\t\t<el-dropdown-menu>\r\n\t\t\t\t\t<el-dropdown-item command=\"text\">文本</el-dropdown-item>\r\n\t\t\t\t\t<el-dropdown-item command=\"voice\">音频</el-dropdown-item>\r\n\t\t\t\t\t<el-dropdown-item command=\"variable\">变量</el-dropdown-item>\r\n\t\t\t\t</el-dropdown-menu>\r\n\t\t\t</template>\r\n\t\t</el-dropdown>\r\n\r\n\t</span>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { getterOptions } from \"@front/components/danmakuFlow/utils/getter\";\r\nexport default defineComponent({\r\n\tname: \"ruleChain\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tvoiceList: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tallow: {\r\n\t\t\tdefault: 1000\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tgetterOptions,\r\n\t\tvalue: {\r\n\t\t\tget(): Array<any> {\r\n\t\t\t\treturn this.modelValue;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:modelValue\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\taddCommand(command: any) {\r\n\t\t\tthis.value.push({\r\n\t\t\t\ttype: command\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.rule {\r\n\tposition: relative;\r\n\t.remove {\r\n\t\tdisplay: none;\r\n\t}\r\n\t&:hover {\r\n\t\t.remove {\r\n\t\t\tdisplay: block;\r\n\t\t\tcolor: $--color-danger;\r\n\t\t\tfont-size: $--font-size-extra-large;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0px;\r\n\t\t\tright: 0px;\r\n\t\t\ttransform: translateX(0%) translateY(-50%);\r\n\t\t\tz-index: 100;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { getterOptions } from \"@front/components/danmakuFlow/utils/getter\";\r\nexport default defineComponent({\r\n\tname: \"ruleChain\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tvoiceList: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tallow: {\r\n\t\t\tdefault: 1000\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tgetterOptions,\r\n\t\tvalue: {\r\n\t\t\tget(): Array<any> {\r\n\t\t\t\treturn this.modelValue;\r\n\t\t\t},\r\n\t\t\tset(e: any) {\r\n\t\t\t\tthis.$emit(\"update:modelValue\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\taddCommand(command: any) {\r\n\t\t\tthis.value.push({\r\n\t\t\t\ttype: command\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./ruleChain.vue?vue&type=template&id=19955e04&scoped=true\"\nimport script from \"./ruleChain.vue?vue&type=script&lang=ts\"\nexport * from \"./ruleChain.vue?vue&type=script&lang=ts\"\n\nimport \"./ruleChain.vue?vue&type=style&index=0&id=19955e04&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-19955e04\"\n\nexport default script","import {\r\n\tintegerF,\r\n\tselectF,\r\n\tstringF,\r\n\tnumberF,\r\n\tbooleanF\r\n} from \"@front/components/danmakuFlow/utils/form\";\r\nexport const schema = () => {\r\n\treturn {\r\n\t\ttype: \"object\",\r\n\t\tproperties: {\r\n\t\t\trtype: selectF(\r\n\t\t\t\t\"音源\",\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel: \"windows自带\",\r\n\t\t\t\t\t\tvalue: \"default\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel: \"科大讯飞\",\r\n\t\t\t\t\t\tvalue: \"kdxf\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"20%\"\r\n\t\t\t),\r\n\r\n\t\t\tvolume: {\r\n\t\t\t\t...integerF(\"音量\", \"20%\"),\r\n\t\t\t\tminimum: 0,\r\n\t\t\t\tmaximum: 100\r\n\t\t\t},\r\n\t\t\tspeed: {\r\n\t\t\t\t...integerF(\"语速\", \"20%\"),\r\n\t\t\t\tminimum: 0,\r\n\t\t\t\tmaximum: 10\r\n\t\t\t},\r\n\t\t\tignoreOwner: booleanF(\"忽略主播\", \"20%\"),\r\n\t\t\tcomboReading: booleanF(\"评论连读\", \"20%\"),\r\n\t\t\tgiftLevel: integerF(\r\n\t\t\t\t\"礼物语音阈值（单位是AC币，一次性送出相应价值礼物才会触发语音）\",\r\n\t\t\t\t\"100%\"\r\n\t\t\t),\r\n\t\t\tapi: {\r\n\t\t\t\ttype: \"object\",\r\n\t\t\t\t\"ui:hidden\":\r\n\t\t\t\t\t\"{{!parentFormData.rtype||parentFormData.rtype==='default'}}\",\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tapiSecret: stringF(\"api-secret\", \"25%\"),\r\n\t\t\t\t\tappID: stringF(\"app-ID\", \"25%\"),\r\n\t\t\t\t\tapiKey: stringF(\"api-key\", \"25%\"),\r\n\t\t\t\t\tvoiceName: stringF(\"角色声音\", \"25%\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\ttype: \"array\",\r\n\t\t\t\t\"ui:hidden\": \"{{true}}\"\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const uiSchema = () => {\r\n\treturn {\r\n\t\tvolume: {\r\n\t\t\t\"ui:widget\": \"el-slider\"\r\n\t\t},\r\n\t\tspeed: {\r\n\t\t\t\"ui:widget\": \"el-slider\"\r\n\t\t}\r\n\t};\r\n};\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { robotSetting } from \"@/electron_browser/datas/aboutDanmaku\";\r\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\r\nimport { read } from \"@front/api/robot\";\r\nimport { getVoiceList, openFolder } from \"@front/util_function/system\";\r\nimport { getMockByType } from \"@front/views/danmakuSetting/mock/index\";\r\nimport ruleChain from \"./ruleChain.vue\";\r\nimport VueForm from \"@lljj/vue3-form-element\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { uiSchema, schema } from \"./rule\";\r\nexport default defineComponent({\r\n\tname: \"robot\",\r\n\tcomponents: {\r\n\t\truleChain,\r\n\t\tVueForm\r\n\t},\r\n\tdata() {\r\n\t\tconst voices: any = [];\r\n\t\treturn {\r\n\t\t\tuiSchema: uiSchema(),\r\n\t\t\tschema: schema(),\r\n\t\t\trobotSetting: robotSetting(),\r\n\t\t\tvoices\r\n\t\t};\r\n\t},\r\n\tbeforeMount() {\r\n\t\tif (this.danmakuProfile.toolBox.robotSetting) {\r\n\t\t\tthis.robotSetting = Object.assign(\r\n\t\t\t\tthis.robotSetting,\r\n\t\t\t\tcloneDeep(this.danmakuProfile.toolBox.robotSetting)\r\n\t\t\t);\r\n\t\t\tif (!Array.isArray(this.robotSetting.enable)) {\r\n\t\t\t\tthis.robotSetting.enable = [];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.getVoiceList();\r\n\t},\r\n\tcomputed: {\r\n\t\ttypeOptions,\r\n\t\t...mapState([\"danmakuProfile\"])\r\n\t},\r\n\tmethods: {\r\n\t\topenVoiceFolder() {\r\n\t\t\topenFolder(\"./voices\");\r\n\t\t},\r\n\t\tgetVoiceList() {\r\n\t\t\tgetVoiceList().then((res: any) => {\r\n\t\t\t\tthis.voices = res.list;\r\n\t\t\t});\r\n\t\t},\r\n\t\tswitchType(on: boolean, type: any) {\r\n\t\t\tthis.robotSetting.enable = this.robotSetting.enable.filter(\r\n\t\t\t\tty => ty !== type\r\n\t\t\t);\r\n\t\t\tif (on) {\r\n\t\t\t\tthis.robotSetting.enable.push(type);\r\n\t\t\t}\r\n\t\t},\r\n\t\tpreview(type: number) {\r\n\t\t\tconst danmaku = getMockByType(type);\r\n\t\t\tconst { speed, volume, rtype, api } = this.robotSetting;\r\n\t\t\tread({\r\n\t\t\t\tdanmaku,\r\n\t\t\t\tspeed,\r\n\t\t\t\tvolume,\r\n\t\t\t\trtype,\r\n\t\t\t\tapi,\r\n\t\t\t\trules: this.robotSetting.rules[type]\r\n\t\t\t});\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tthis.danmakuProfile.toolBox.robotSetting = this.robotSetting;\r\n\t\t\tthis.$store.commit(\"updateSettings\", {});\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"设置已保存\",\r\n\t\t\t\tduration: 1500,\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t\toffset: 60\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=0922572e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0922572e&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0922572e\"\n\nexport default script","import { defineAsyncComponent } from \"vue\";\r\n\r\nexport const stringF = (title: string, width = \"25%\", others = {}) => {\r\n\treturn {\r\n\t\ttype: \"string\",\r\n\t\ttitle,\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t},\r\n\t\t...others\r\n\t};\r\n};\r\nexport const booleanF = (title: string, width = \"25%\", others = {}) => {\r\n\treturn {\r\n\t\ttype: \"boolean\",\r\n\t\ttitle,\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t},\r\n\t\t...others\r\n\t};\r\n};\r\nexport const integerF = (title: string, width = \"25%\", others = {}) => {\r\n\treturn {\r\n\t\ttype: \"integer\",\r\n\t\ttitle,\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t},\r\n\t\t...others\r\n\t};\r\n};\r\nexport const numberF = (title: string, width = \"25%\", step = 0.1) => {\r\n\treturn {\r\n\t\ttype: \"number\",\r\n\t\ttitle,\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t},\r\n\t\tmultipleOf: step\r\n\t};\r\n};\r\nexport const colorF = (title: string, width = \"25%\", showAlpha = true) => {\r\n\treturn {\r\n\t\ttype: \"string\",\r\n\t\ttitle,\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth,\r\n\t\t\tshowAlpha\r\n\t\t},\r\n\t\tformat: \"color\"\r\n\t};\r\n};\r\n\r\nexport const gradientF = (title: string, width = \"25%\") => {\r\n\treturn {\r\n\t\ttype: \"string\",\r\n\t\ttitle,\r\n\t\t\"ui:widget\": defineAsyncComponent(() =>\r\n\t\t\timport(\"@front/components/form/gradientPicker/index.vue\")\r\n\t\t),\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const fontF = (title: string, width = \"25%\") => {\r\n\treturn {\r\n\t\ttype: \"string\",\r\n\t\ttitle,\r\n\t\t\"ui:widget\": defineAsyncComponent(() =>\r\n\t\t\timport(\"@front/components/form/fontPicker/index.vue\")\r\n\t\t),\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const backgroundImageF = (title: string) => {\r\n\treturn {\r\n\t\ttype: \"string\",\r\n\t\ttitle,\r\n\t\t\"ui:widget\": defineAsyncComponent(() =>\r\n\t\t\timport(\"@front/components/base/imgInput/imgInputStatic.vue\")\r\n\t\t)\r\n\t};\r\n};\r\nexport const selectF = (title: string, options: Array<any>, width = \"25%\") => {\r\n\tconst eNum: any = [];\r\n\tconst eNumNames: any = [];\r\n\toptions.forEach((i: any) => {\r\n\t\tif (!i.label) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\teNumNames.push(i.label);\r\n\t\tif (i.value !== undefined) {\r\n\t\t\teNum.push(i.value);\r\n\t\t} else {\r\n\t\t\teNum.push(i.label);\r\n\t\t}\r\n\t});\r\n\treturn {\r\n\t\ttype: \"string\",\r\n\t\ttitle,\r\n\t\t\"ui:options\": {\r\n\t\t\tsize: \"mini\",\r\n\t\t\twidth\r\n\t\t},\r\n\t\tenum: eNum,\r\n\t\tenumNames: eNumNames\r\n\t};\r\n};\r\n\r\nexport const degreeF = (title: string, width = \"25%\") => {\r\n\treturn {\r\n\t\ttitle,\r\n\t\tdescription: \"请按从上到下，等级从小到大顺序添加\",\r\n\t\twidth,\r\n\t\ttype: \"array\",\r\n\t\tminItems: 1,\r\n\t\titems: {\r\n\t\t\ttype: \"object\",\r\n\t\t\tproperties: {\r\n\t\t\t\tlevel: {\r\n\t\t\t\t\t...integerF(\"大于此等级\", \"25%\"),\r\n\t\t\t\t\tdefault: 0\r\n\t\t\t\t},\r\n\t\t\t\tcolor: colorF(\"显示颜色为\", \"25%\")\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n"],"sourceRoot":""}