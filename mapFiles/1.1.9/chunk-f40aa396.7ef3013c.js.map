{"version":3,"sources":["webpack:///./src/electron_browser/util_function/formatter.ts","webpack:///./src/electron_browser/views/streamMonitor/shrink.vue?b22f","webpack:///./src/electron_browser/views/streamMonitor/shrink.vue","webpack:///./src/electron_browser/views/streamMonitor/shrink.vue?ed76","webpack:///./src/electron_browser/views/streamMonitor/shrink.vue?0b9e"],"names":["unixTimeFormatter","timestamp","zeroPadding","n","length","hour","Math","floor","minute","second","String","thousandFormatter","count","unit","toFixed","hundrenFormatter","id","class","name","streamStatus","step","common","unstreamable","size","type","$store","dispatch","isStreaming","style","roomProfile","liveCover","label","title","icon","num","roomStatus","watchingCount","statistic","likeCount","bananaCount","diamondCount","liveType","categoryName","subCategoryName","state","liveDuration","max","disabled","loading","openStream","$route","components","flow","computed","methods","this","$router","push","path","emit","once","render","__scopeId"],"mappings":"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","file":"js/chunk-f40aa396.7ef3013c.js","sourcesContent":["export const unixTimeFormatter = (timestamp: number) => {\r\n\tconst zeroPadding = (n: string) => {\r\n\t\tif (n.length < 2) {\r\n\t\t\treturn `0${n}`;\r\n\t\t}\r\n\t\treturn n;\r\n\t};\r\n\ttimestamp = timestamp / 1000;\r\n\tconst hour = Math.floor(timestamp / 3600);\r\n\tconst minute = Math.floor((timestamp - hour * 3600) / 60);\r\n\tconst second = Math.floor(timestamp % 60);\r\n\treturn `${zeroPadding(String(hour))}:${zeroPadding(\r\n\t\tString(minute)\r\n\t)}:${zeroPadding(String(second))}`;\r\n};\r\nexport const thousandFormatter = (count: number, unit = \"万\"): string => {\r\n\tif (count < 10000) {\r\n\t\treturn String(count);\r\n\t}\r\n\r\n\treturn `${(count / 10000).toFixed(1)}${unit}`;\r\n};\r\n\r\nexport const hundrenFormatter = (count: number): string => {\r\n\tif (count > 10000) {\r\n\t\treturn thousandFormatter(count, \"W\");\r\n\t}\r\n\tif (count > 1000) {\r\n\t\treturn `${(count / 1000).toFixed(1)}k`;\r\n\t}\r\n\treturn String(count);\r\n};\r\n","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./shrink.vue?vue&type=style&index=0&id=c2aa7e30&scoped=true&lang=scss\"","<template>\r\n\t<div id=\"shrink\">\r\n\t\t<transition name=\"fade\">\r\n\t\t\t<div class=\"unstreamable\" v-if=\"streamStatus.step==='nostreamable'\">\r\n\t\t\t\t{{common.unstreamable}}<br>\r\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"$store.dispatch('nostreamable')\">点击重试</el-button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"unstreamable\" v-else-if=\"!isStreaming\">\r\n\t\t\t\t<el-button type=\"primary\" :disabled=\"loading\" class=\"logBtn\" size=\"medium\" @click=\"openStream\">\r\n\t\t\t\t\t{{$route.name===\"roomMgmt\"?\"确认开播\":\"点我开播\"}}\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"shrinkPanel\">\r\n\t\t\t\t<div class=\"avatar\" :style=\"{backgroundImage:`url(${roomProfile.liveCover||'/imgs/common/noCover.jpg'})`}\" />\r\n\t\t\t\t<div class=\"roomProfile\">\r\n\t\t\t\t\t<title-scrolling :label=\"roomProfile.title\" />\r\n\t\t\t\t\t<div class=\"roomStatus\">\r\n\t\t\t\t\t\t<icon-counter class=\"counter\" title=\"观众\" icon=\"el-icon-user-solid\" :num=\"roomStatus.watchingCount\" />\r\n\t\t\t\t\t\t<icon-counter class=\"counter\" title=\"点赞\" icon=\"self-like\" :num=\"thousandFormatter(roomStatus.statistic.likeCount)\" />\r\n\t\t\t\t\t\t<icon-counter class=\"counter\" title=\"香蕉\" icon=\"self-banana\" :num=\"thousandFormatter(roomStatus.statistic.bananaCount)\" />\r\n\t\t\t\t\t\t<icon-counter class=\"counter\" title=\"ac币\" icon=\"self-coin\" :num=\"thousandFormatter(roomStatus.statistic.diamondCount/100)\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"type\">\r\n\t\t\t\t\t\t{{`${roomProfile.liveType.categoryName} - ${roomProfile.liveType.subCategoryName}    已播时长：${unixTimeFormatter($store.state.roomStatus.liveDuration)}`}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"flow\">\r\n\t\t\t\t\t<flow style=\"font-size:14px\" :max=\"1\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</transition>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { mapState, mapGetters } from \"vuex\";\r\nimport { defineComponent } from \"vue\";\r\nimport flow from \"@front/components/danmakuFlow/index.vue\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport {\r\n\tunixTimeFormatter,\r\n\tthousandFormatter\r\n} from \"@front/util_function/formatter\";\r\nimport { common } from \"@front/texts\";\r\nexport default defineComponent({\r\n\tname: \"shrink\",\r\n\tcomponents: {\r\n\t\tflow\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"roomProfile\", \"streamStatus\", \"roomStatus\"]),\r\n\t\t...mapGetters([\"isStreaming\"]),\r\n\t\tcommon\r\n\t},\r\n\tmethods: {\r\n\t\tunixTimeFormatter,\r\n\t\tthousandFormatter,\r\n\t\topenStream() {\r\n\t\t\tif (this.$route.name !== \"roomMgmt\") {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: \"/roomMgmt\"\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tevent.emit(\"openStream\");\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tevent.once(\"openStreamEnd\", () => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n#shrink {\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\twidth: 100%;\r\n\theight: 70px;\r\n\t.unstreamable {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(255, 255, 255);\r\n\t\tcolor: $--color-text-secondary;\r\n\t\tuser-select: none;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twhite-space: pre;\r\n\t\ttext-align: center;\r\n\t\ttransition: all 0.25s;\r\n\t\t&:hover {\r\n\t\t\tcolor: $--color-text-primary;\r\n\t\t}\r\n\t}\r\n\t.shrinkPanel {\r\n\t\tbox-sizing: border-box;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tpadding: 8px 30px;\r\n\t\tdisplay: flex;\r\n\t\t& > div {\r\n\t\t\tflex-shrink: 0;\r\n\t\t}\r\n\t\t.avatar {\r\n\t\t\theight: 54px;\r\n\t\t\twidth: 54px;\r\n\t\t\tborder-radius: $--border-radius-base;\r\n\t\t\tbackground-size: auto 100%;\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t\tbox-shadow: $--box-shadow-base;\r\n\t\t\tbackground-position: center;\r\n\t\t}\r\n\t\t.roomProfile {\r\n\t\t\tdisplay: flex;\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 250px;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tpadding-left: 16px;\r\n\t\t\twhite-space: pre;\r\n\t\t\tcolor: $--color-text-secondary;\r\n\t\t\tuser-select: none;\r\n\t\t\t.roomStatus {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-size: $--font-size-extra-small;\r\n\t\t\t}\r\n\t\t\t.type {\r\n\t\t\t\tfont-size: $--font-size-extra-small;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { mapState, mapGetters } from \"vuex\";\r\nimport { defineComponent } from \"vue\";\r\nimport flow from \"@front/components/danmakuFlow/index.vue\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport {\r\n\tunixTimeFormatter,\r\n\tthousandFormatter\r\n} from \"@front/util_function/formatter\";\r\nimport { common } from \"@front/texts\";\r\nexport default defineComponent({\r\n\tname: \"shrink\",\r\n\tcomponents: {\r\n\t\tflow\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"roomProfile\", \"streamStatus\", \"roomStatus\"]),\r\n\t\t...mapGetters([\"isStreaming\"]),\r\n\t\tcommon\r\n\t},\r\n\tmethods: {\r\n\t\tunixTimeFormatter,\r\n\t\tthousandFormatter,\r\n\t\topenStream() {\r\n\t\t\tif (this.$route.name !== \"roomMgmt\") {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: \"/roomMgmt\"\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tevent.emit(\"openStream\");\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tevent.once(\"openStreamEnd\", () => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./shrink.vue?vue&type=template&id=c2aa7e30&scoped=true\"\nimport script from \"./shrink.vue?vue&type=script&lang=ts\"\nexport * from \"./shrink.vue?vue&type=script&lang=ts\"\n\nimport \"./shrink.vue?vue&type=style&index=0&id=c2aa7e30&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-c2aa7e30\"\n\nexport default script"],"sourceRoot":""}